<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rrweb录屏</title>
    <script src="../../../node_modules/rrweb/dist/rrweb.min.js"></script>
    <script src="../../../node_modules/rrweb/dist/record/rrweb-record.min.js"></script>
    <link rel="stylesheet" href="../../../node_modules/rrweb/dist/rrweb.min.css" />
    <link rel="stylesheet" href="../../../node_modules/rrweb-player/dist/style.css" />
    <script src="../../../node_modules/rrweb-player/dist/index.js"></script>
    <script src='http://82.156.16.159:8080/data/EPSPlanet_SDK/XbsjEarth/XbsjEarth.js'></script>
</head>

<body>
    <button onclick="start()">录制</button>
    <button onclick="replay()">播放</button>
    <div id='earthContainer' style='width: 100%; height: 100%; background: grey'></div>
    <div id="video"></div>
</body>
<script>
    let earth;
    XE.ready().then(() => {
        // 1.1 创建地球
        earth = new XE.Earth('earthContainer');
        // only for Debug
        window.earth = earth;
    })
    // rrweb行为录制
    let events = [];
    let stopFunc = rrweb.record({
        emit(event) {
            // 用任意方式存储 event
            events.push(event);
            if (events.length > 100) {
                stopFunc()
            }
        },
        recordCanvas: true
    });
    function start() {

        stopFunc()
    }


    function replay() {
        let player = new rrwebPlayer({
            target: document.getElementById('video'),
            props: {
                events: events,
                UNSAFE_replayCanvas: true
            }
        })
    }
</script>

</html>