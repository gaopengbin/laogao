(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b278a"],{"23f9":function(e,t,n){"use strict";n.r(t);n("b0c0");var o=n("7a23"),i={class:"epsplanet-panel-base",style:{width:"296px"}},c={class:"tool-panel-button"},a=Object(o["createTextVNode"])("创建"),l=Object(o["createTextVNode"])("编辑"),r=Object(o["createTextVNode"])("保存");function s(e,t,n,s,u,d){var b=Object(o["resolveComponent"])("el-input"),p=Object(o["resolveComponent"])("el-form-item"),h=Object(o["resolveComponent"])("el-option"),m=Object(o["resolveComponent"])("el-select"),f=Object(o["resolveComponent"])("el-slider"),j=Object(o["resolveComponent"])("el-switch"),O=Object(o["resolveComponent"])("el-form"),g=Object(o["resolveComponent"])("el-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",i,[Object(o["createVNode"])(O,{ref:"form","label-width":"60px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{label:"名称"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(b,{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.name=t}),placeholder:"未命名开挖分析",size:"small"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(p,{label:"选择"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{size:"small",modelValue:e.selectTileset,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selectTileset=t}),placeholder:"请选择",onChange:e.changeTileset,onVisibleChange:e.xiala,"value-key":"index","popper-class":"tool-panel-popper"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.tilesetList,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(h,{key:e.index,label:e.name,value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange","onVisibleChange"])]})),_:1}),Object(o["createVNode"])(p,{label:"深度"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{modelValue:e.deep,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.deep=t}),min:-100,max:100,step:1,"show-input":"","show-input-controls":!1},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(p,{label:"显隐"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(j,{modelValue:e.show,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.show=t}),"inactive-color":"#dcdfe6"},null,8,["modelValue"])]})),_:1})]})),_:1},512),Object(o["createElementVNode"])("div",c,[Object(o["createVNode"])(g,{class:Object(o["normalizeClass"])(0==e.creating?"primary-btn":"warning-btn"),onClick:t[4]||(t[4]=function(t){return e.creating=!e.creating})},{default:Object(o["withCtx"])((function(){return[a]})),_:1},8,["class"]),Object(o["createVNode"])(g,{class:Object(o["normalizeClass"])(0==e.editing?"primary-btn":"warning-btn"),onClick:t[5]||(t[5]=function(t){return e.editing=!e.editing})},{default:Object(o["withCtx"])((function(){return[l]})),_:1},8,["class"]),Object(o["createVNode"])(g,{size:"small",class:"primary-btn",onClick:e.save},{default:Object(o["withCtx"])((function(){return[r]})),_:1},8,["onClick"])])])}var u=n("5530"),d=n("1da1"),b=(n("d3b7"),n("159b"),n("96cf"),n("9ca6")),p=Object(o["defineComponent"])({name:"EpsplanetPotholing",props:[],setup:function(){var e,t,n=Object(o["getCurrentInstance"])(),i=n.proxy,c=i,a=Object(o["reactive"])({name:"未命名开挖分析",tilesetList:[{}],selectTileset:void 0,creating:!1,editing:!1,show:!0,theHeight:0,height:100,deep:0,bottomTextureRotationEditing:!1,applyToTerrain:!1,sampledDistance:10,wallImageUrl:"",wallImageHeight:3,imageHeight:3,wallImageWidthScale:1,bottomImageUrl:"",bottomImageHeight:3,bottomImageWidthScale:1,_disposer:[0],isSaved:!1,tips:"shift + 鼠标右键结束绘制"});function l(){t=new XE.Obj.CutSurface(e),t.creating=!0,a._disposer=[],a._disposer.push(XE.MVVM.bind(c,"name",t,"name"),XE.MVVM.bind(c,"creating",t,"creating"),XE.MVVM.bind(c,"editing",t,"editing"),XE.MVVM.bind(c,"show",t,"show"),XE.MVVM.bind(c,"height",t,"height"),XE.MVVM.watch((function(){return t.creating}),(function(){t.creating||(a.theHeight=t.height)})))}function r(){a.tilesetList=[],e.tilesetCollection.forEach((function(e,t){a.tilesetList.push({name:e.name,index:t})}))}function s(n){console.log(t.getDiscardGuid());var o=e.tilesetCollection[n.index];e.tilesetCollection.forEach((function(e){return e.xbsjFlattenGuid=""})),o.xbsjFlattenGuid=t.getDiscardGuid()}function p(){a.isSaved=!0;var n=new XE.SceneTree.Leaf(t);e.sceneTree.root.children.push(n),c.confirmAnalysis(n)}function h(){t&&!a.isSaved&&(t.destroy(),t=void 0),a._disposer&&(a._disposer.forEach((function(e){return e()})),a._disposer.length=0)}Object(o["onMounted"])(Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b["Service"].instance.getEarth();case 2:e=t.sent,l();case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){h()})),Object(o["watch"])((function(){return a.deep}),(function(e){a.height=a.theHeight-e}));var m=Object(o["toRefs"])(a);return Object(u["a"])(Object(u["a"])({},m),{},{init:l,xiala:r,changeTileset:s,save:p,del:h})}}),h=n("6b0d"),m=n.n(h);const f=m()(p,[["render",s]]);t["default"]=f}}]);