(function(e){function t(t){for(var o,i,c=t[0],l=t[1],s=t[2],d=0,p=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,s||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,c=1;c<n.length;c++){var l=n[c];0!==a[l]&&(o=!1)}o&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},a={index:0},r=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var u=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("a429")},2544:function(e,t,n){"use strict";n("3fdf")},"2c81":function(e,t,n){},"2eee":function(e,t,n){e.exports=n.p+"assets/img/ramp.8e8b488b.jpg"},"3b50":function(e,t,n){"use strict";n("dce6")},"3fdf":function(e,t,n){},"4b5a":function(e,t,n){e.exports=n.p+"assets/img/四车道-沥青.4ce3be97.jpg"},"532d":function(e,t,n){e.exports=n.p+"assets/img/双车道-沥青.f9035f93.jpg"},"5dc2":function(e,t,n){e.exports=n.p+"assets/img/单车道-水泥.4e9ebe56.jpg"},"7f71":function(e,t,n){e.exports=n.p+"assets/img/三车道-水泥.01c2f9f3.jpg"},"9f19":function(e,t,n){},a429:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),a=Object(o["createElementVNode"])("h1",null,"EPSPlanet Base Widgets Lib",-1),r={class:"theme-light"};function i(e,t,n,i,c,l){var s=Object(o["resolveComponent"])("el-header"),u=Object(o["resolveComponent"])("epsplanet-statusBar"),d=Object(o["resolveComponent"])("epsplanet-button"),p=Object(o["resolveComponent"])("epsplanet-toolbar"),m=Object(o["resolveComponent"])("epsplanet-basemap"),b=Object(o["resolveComponent"])("epsplanet-earth"),f=Object(o["resolveComponent"])("el-main"),h=Object(o["resolveComponent"])("el-container");return Object(o["openBlock"])(),Object(o["createBlock"])(h,{style:{height:"100%"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{style:{"background-color":"#2c2f38",color:"aliceblue"}},{default:Object(o["withCtx"])((function(){return[a]})),_:1}),Object(o["createVNode"])(f,{style:{padding:"0 !important",overflow:"hidden"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(b,{container:"earthContainer0",style:{width:"100%",height:"100%"},showCompass:!0,showDistanceLegend:!0,onClickBtn:e.clickBtn,onOnReady:e.onReady},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u),Object(o["createElementVNode"])("button",{onClick:t[0]||(t[0]=function(){return e.changeTheme&&e.changeTheme.apply(e,arguments)}),style:{position:"absolute",bottom:"30px",left:"10px"}}," 切换主题 "),Object(o["createElementVNode"])("button",{onClick:t[1]||(t[1]=function(){return e.openPanel&&e.openPanel.apply(e,arguments)}),style:{position:"absolute",bottom:"30px",left:"60px","z-index":"99"}}," test "),Object(o["createElementVNode"])("div",r,[Object(o["createVNode"])(p,{mode:"horizontal",position:e.toolbarPosition},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.comps,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:t,btnName:e.btnName,icon:e.icon,title:e.label,position:e.position,panel:e.panel,type:e.type},{default:Object(o["withCtx"])((function(t){return[(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(e.component),{btnClass:t.btnClass},null,8,["btnClass"]))]})),_:2},1032,["btnName","icon","title","position","panel","type"])})),128))]})),_:1},8,["position"]),Object(o["createVNode"])(p,{mode:"vertical",position:{top:"130px",left:"10px"}},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.comps_measure,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:t,icon:e.icon,title:e.label,position:e.position,type:e.type},{default:Object(o["withCtx"])((function(t){return[(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(e.component),{btnClass:t.btnClass},null,8,["btnClass"]))]})),_:2},1032,["icon","title","position","type"])})),128))]})),_:1}),Object(o["createVNode"])(p,{mode:"vertical",position:{top:"420px",left:"10px"}},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.comps_effect,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:t,icon:e.icon,title:e.label,position:e.position,type:e.type},{default:Object(o["withCtx"])((function(t){return[(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(e.component),{btnClass:t.btnClass},null,8,["btnClass"]))]})),_:2},1032,["icon","title","position","type"])})),128))]})),_:1}),Object(o["createVNode"])(p,{mode:"vertical",position:{top:"200px",right:"30px"}},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.comps_plot,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:t,icon:e.icon,title:e.label,position:e.position},{default:Object(o["withCtx"])((function(t){return[(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(e.component),{btnClass:t.btnClass},null,8,["btnClass"]))]})),_:2},1032,["icon","title","position"])})),128))]})),_:1}),Object(o["createVNode"])(p,{mode:"horizontal",position:{top:"10px",left:"600px"}},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.comps_analysis,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:t,icon:e.icon,title:e.label,position:e.position,panel:e.panel},{default:Object(o["withCtx"])((function(t){return[(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(e.component),{btnClass:t.btnClass},null,8,["btnClass"]))]})),_:2},1032,["icon","title","position","panel"])})),128))]})),_:1}),Object(o["createVNode"])(m,{style:{bottom:"110px",right:"10px"}})])]})),_:1},8,["onClickBtn","onOnReady"])]})),_:1})]})),_:1})}var c=n("2909"),l=(n("99af"),n("d81d"),n("b0c0"),["title"]),s={class:"tool-header"},u={class:"tool-content"};function d(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-button"),d=Object(o["resolveDirective"])("drag");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["epsplanet-button",e.randomClass])},[Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])(["iconfont",e.icon]),onClick:t[0]||(t[0]=function(){return e.openPanel&&e.openPanel.apply(e,arguments)}),title:e.title,style:Object(o["normalizeStyle"])({color:e.iconColor})},null,14,l),e.btnName?(Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:0,onClick:e.openPanel},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.btnName),1)]})),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0)],2),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["epsplanet-popover",e.randomClass])},[e.opened?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:0,class:Object(o["normalizeClass"])(["tool-panel",e.randomClass])},[Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("div",s,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.title)+" ",1),Object(o["createElementVNode"])("i",{class:"iconfont icon-close",onClick:t[1]||(t[1]=function(){return e.closePanel&&e.closePanel.apply(e,arguments)})}),Object(o["createElementVNode"])("i",{class:"iconfont icon-minus",onClick:t[2]||(t[2]=function(){return e.hiddenPanel&&e.hiddenPanel.apply(e,arguments)})})])),[[d],[o["vShow"],e.showTitle]]),Object(o["createElementVNode"])("div",u,[Object(o["renderSlot"])(e.$slots,"default",{btnClass:e.randomClass}),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["collapse",e.dockMode]),onClick:t[3]||(t[3]=function(){return e.collapse&&e.collapse.apply(e,arguments)})},[Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])(["iconfont",e.collapseIcon])},null,2)],2),[[o["vShow"],e.dockMode]])])],2)):Object(o["createCommentVNode"])("",!0)],2),[[o["vShow"],e.show&&e.hasPanel]])],64)}var p=n("5530");n("d3b7"),n("25f0");function m(){return Math.random().toString(36).substr(2)}var b={params:{type:Object,require:!1,default:null},icon:{type:String,require:!1,default:""},btnName:{type:String,require:!1,default:""},title:{type:String,require:!1,default:""},position:{type:Object,require:!1,default:{top:0,left:0}},type:{type:String,require:!1,default:"panel"},hasPanel:{type:Boolean,require:!1,default:!0},panel:{type:Object,require:!1,default:{size:void 0,position:{top:10,left:10},dockMode:void 0}}},f=["click"],h=n("1da1"),j=(n("96cf"),n("d4ec")),O=n("bee2"),g=function(){function e(t){Object(j["a"])(this,e),this.hasEarth=!1,this.name=t}return Object(O["a"])(e,[{key:"setEarth",value:function(e){this.earth=e,this.hasEarth=!0}},{key:"getEarth",value:function(){var e=this;return new Promise((function(t){var n=0,o=setInterval((function(){if(50==n&&(clearInterval(o),t(!1)),e.hasEarth){clearInterval(o);var a=setInterval((function(){e.earth&&(clearInterval(a),t(e.earth))}),100)}n++}),100)}))}},{key:"destroyEarth",value:function(e){this.earth=e&&e.destroy(),this.hasEarth=!1}}],[{key:"getInstance",value:function(){return null==this.instance&&(console.log("create new"),this.instance=new e("earth")),e.instance}}]),e}();function v(e,t){var n=document.getElementById("app"),o=n.getAttribute("data-sunwayTheme"),a=document.getElementsByClassName("epsplanet-button "+e)[0].children[0];a.style.color=t?"aqua":"dark"==o?"aliceblue":""}function w(e){if(!e)return null;var t=e.getBoundingClientRect(),n=document.documentElement.clientTop,o=document.documentElement.clientLeft;return{top:t.top-n,left:t.left-o,bottom:t.bottom-n,right:t.right-o,width:t.width,height:t.height}}function C(e,t,n){var o=w(t),a=w(n._viewer.container);if(o&&a)switch(e.toLowerCase()){case"left":t.style.top=a.top+"px",t.style.left="0px",t.style.height=a.height+"px",N(n,"margin-left",o.width+"px");break;case"bottom":t.style.left=a.left+"px",t.style.bottom="0px",t.style.width=a.width+"px",t.style.width=a.width+"px",N(n,"height","calc(100% - ".concat(o.height,"px)"));break;default:break}}function V(e,t,n){return x.apply(this,arguments)}function x(){return x=Object(h["a"])(regeneratorRuntime.mark((function e(t,n,o){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g.instance.getEarth();case 2:a=e.sent,o?y(t,n,a):E(t,n,a);case 4:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function y(e,t,n){var o=w(t),a=w(n._viewer.container);if(o&&a)switch(e.toLowerCase()){case"left":t.style.top=a.top+"px",t.style.left="0px",t.style.height=a.height+"px",N(n,"margin-left",o.width+"px"),N(n,"width","auto");break;case"bottom":t.style.left=a.left+"px",t.style.bottom="0px",t.style.width=a.width+"px",N(n,"height","calc(100% - ".concat(o.height,"px)"));break;default:break}}function E(e,t,n){var o=w(t),a=w(n._viewer.container);if(o&&a)switch(e.toLowerCase()){case"left":t.style.left=-o.width+"px",N(n,"margin-left","0px"),N(n,"width","100%");break;case"bottom":t.style.bottom=-o.height+"px",N(n,"height","100%");break;default:break}}function N(e,t,n){var o=e._viewer.container;o.style[t]=n}function _(e){return k.apply(this,arguments)}function k(){return k=Object(h["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=6;break}return e.next=3,g.instance.getEarth();case 3:if(t=e.sent,t){e.next=6;break}return e.abrupt("return");case 6:n=t._viewer.container,n.style.width="100%",n.style.height="100%",n.style.margin="0";case 10:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}var M=Object(o["defineComponent"])({name:"EpsplanetButton",props:b,emits:f,components:{},directives:{drag:{mounted:function(e){var t=e,n=e.parentElement.parentElement;t.onmousedown=function(t){if("false"!=e.dataset.dragable){var o=t.clientX-n.offsetLeft,a=t.clientY-n.offsetTop;document.onmousemove=function(e){var t=e.clientX-o,r=e.clientY-a;n.style.left=t+"px",n.style.top=r+"px"},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}}}},setup:function(e,t){var n,a,r,i,c,l,s=Object(o["getCurrentInstance"])(),u=Object(o["reactive"])(e.params)||{},d=null!==(n=null===u||void 0===u?void 0:u.icon)&&void 0!==n?n:Object(o["reactive"])(e.icon),b=null!==(a=null===u||void 0===u?void 0:u.btnName)&&void 0!==a?a:Object(o["reactive"])(e.btnName),f=null!==(r=null===u||void 0===u?void 0:u.title)&&void 0!==r?r:Object(o["reactive"])(e.title),h=null!==(i=null===u||void 0===u?void 0:u.position)&&void 0!==i?i:Object(o["reactive"])(e.position),j=null!==(c=null===u||void 0===u?void 0:u.type)&&void 0!==c?c:Object(o["reactive"])(e.type),O=Object(o["reactive"])(e.hasPanel),g=null!==(l=null===u||void 0===u?void 0:u.panel)&&void 0!==l?l:Object(o["reactive"])(e.panel),v=null===g||void 0===g?void 0:g.showTitle,w=null===g||void 0===g?void 0:g.dockMode,x=Object(o["reactive"])({icon:d,btnName:b,title:f,type:j,panel:g,hasPanel:O,opened:!1,show:!1,randomClass:"",iconColor:"",collapseIcon:"icon-zuo",config:{},showTitle:!0,dockShowTitle:v,dockMode:w,isCollapse:!0});function y(){x.show=!1}function E(){x.iconColor="",x.opened=!1,x.show=!1,w&&_()}function N(){if("panel"==x.type)x.opened?(t.emit("click",s),x.show=!x.show):(x.iconColor="aqua",x.opened=!0,x.show=!0,setTimeout((function(){var e=document.getElementsByClassName("tool-panel "+x.randomClass)[0];if("left"==g.dockMode||"right"==g.dockMode){g.size&&(e.style.width=g.size.width+"px",e.style.height="100%"),e.children[0].dataset.dragable="false";var n=document.getElementsByClassName("epsplanet-popover "+x.randomClass)[0];C(g.dockMode,n,window["earth"]),x.isCollapse=!1}else if("top"==g.dockMode||"bottom"==g.dockMode){g.size&&(e.style.width="100%",e.style.height=g.size.height+"px"),e.children[0].dataset.dragable="false";var o=document.getElementsByClassName("epsplanet-popover "+x.randomClass)[0];C(g.dockMode,o,window["earth"]),x.isCollapse=!1}else if(g.size&&(e.style.width=g.size.width+"px",e.style.height=g.size.height+"px"),g.position){var a=e.parentElement;a.style.top=g.position.top+"px",a.style.left=g.position.left+"px"}t.emit("click",s)}),10));else if("switch"==x.type)t.emit("click",s),x.iconColor=""==x.iconColor?"aqua":"",x.opened=!x.opened;else if("trigger"==x.type){t.emit("click",s);var e=document.getElementsByClassName("epsplanet-button "+x.randomClass)[0].children[0];e.style.color;e.style.color=""==e.style.color?"aqua":"",x.iconColor=e.style.color,x.opened=!1,setTimeout((function(){x.opened=!0}),10)}}function k(){var e=document.getElementsByClassName("epsplanet-popover "+x.randomClass)[0];V(w,e,x.isCollapse),x.isCollapse=!x.isCollapse}Object(o["watch"])((function(){return x.isCollapse}),(function(e){switch(w.toLowerCase()){case"left":x.collapseIcon=e?"icon-zuo":"icon-you";break;case"bottom":x.collapseIcon=e?"icon-zhankai":"icon-shouqi";break;default:break}})),Object(o["onBeforeMount"])((function(){if(x.randomClass=m(),g.dockMode){switch(x.dockMode.toLowerCase()){case"left":x.collapseIcon="icon-zuo";break;case"bottom":x.collapseIcon="icon-zhankai";break;default:break}x.showTitle=v}else x.showTitle=!0})),Object(o["onMounted"])((function(){var e=document.getElementsByClassName("epsplanet-button "+x.randomClass)[0];e.style.top=h.top+"px",e.style.left=h.left+"px"}));var M=Object(o["toRefs"])(x);return Object(p["a"])(Object(p["a"])({},M),{},{openPanel:N,hiddenPanel:y,closePanel:E,collapse:k,ctx:s})}}),T=n("6b0d"),P=n.n(T);const S=P()(M,[["render",d]]);var z=S;z.install=function(e){e.component(z.name,z)};var R=z,B=["title"];function X(e,t,n,a,r,i){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:Object(o["normalizeClass"])(["tool-bar",e.mode]),style:Object(o["normalizeStyle"])(e.style),ref:"toolbar"},[e.collapsable?(Object(o["openBlock"])(),Object(o["createElementBlock"])("i",{key:0,class:Object(o["normalizeClass"])(["iconfont",e.collapseIcon]),onClick:t[0]||(t[0]=function(){return e.collapse&&e.collapse.apply(e,arguments)}),title:e.isCollapse?"展开":"收缩"},null,10,B)):Object(o["createCommentVNode"])("",!0),Object(o["renderSlot"])(e.$slots,"default")],6)}var L={mode:{type:String,require:!1,default:"vertical "},position:{type:Object,require:!1,default:{top:0,left:0}},collapsable:{type:Boolean,require:!1,default:!1}},U=Object(o["defineComponent"])({name:"EpsplanetToolbar",props:L,setup:function(e){var t,n=Object(o["ref"])(null),a=Object(o["ref"])(!1),r=Object(o["reactive"])(e.mode),i=Object(o["reactive"])(e.collapsable),c=Object(o["reactive"])(e.position),l=c,s=Object(o["reactive"])({mode:r,style:l,collapsable:i,collapseIcon:"icon-zhankai"});Object(o["onMounted"])((function(){t=n.value.clientHeight-10}));var u=Object(o["toRefs"])(s);function d(){n.value.style.height||(n.value.style.height=t+"px"),setTimeout((function(){a.value?(s.collapseIcon="icon-zhankai",n.value.style.height=t+"px"):(s.collapseIcon="icon-shouqi",n.value.style.height="10px"),a.value=!a.value}),10)}return Object(p["a"])(Object(p["a"])({},u),{},{toolbar:n,collapse:d,isCollapse:a})}});const A=P()(U,[["render",X]]);var D=A;D.install=function(e){e.component(D.name,D)};var I=D,G={class:"tool-header"},H={class:"tool-content"};function F(e,t,n,a,r,i){var c=Object(o["resolveDirective"])("drag");return Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:Object(o["normalizeClass"])(["epsplanet-popover",e.randomClass])},[e.opened?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:0,class:Object(o["normalizeClass"])(["tool-panel",e.randomClass])},[Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("div",G,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.title)+" ",1),Object(o["createElementVNode"])("i",{class:"iconfont icon-close",onClick:t[0]||(t[0]=function(){return e.closePanel&&e.closePanel.apply(e,arguments)})}),Object(o["createElementVNode"])("i",{class:"iconfont icon-minus",onClick:t[1]||(t[1]=function(){return e.hiddenPanel&&e.hiddenPanel.apply(e,arguments)})})])),[[c],[o["vShow"],e.showTitle]]),Object(o["createElementVNode"])("div",H,[Object(o["renderSlot"])(e.$slots,"default",{btnClass:e.randomClass}),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["collapse",e.dockMode]),onClick:t[2]||(t[2]=function(){return e.collapse&&e.collapse.apply(e,arguments)})},[Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])(["iconfont",e.collapseIcon])},null,2)],2),[[o["vShow"],e.dockMode]])])],2)):Object(o["createCommentVNode"])("",!0)],2)),[[o["vShow"],e.show]])}var W={title:{type:String,require:!1,default:"标题"},panel:{type:Object,require:!1}},q=Object(o["defineComponent"])({name:"EpsplanetPanel",props:W,directives:{drag:{mounted:function(e){var t=e,n=e.parentElement.parentElement;t.onmousedown=function(t){if("false"!=e.dataset.dragable){var o=t.clientX-n.offsetLeft,a=t.clientY-n.offsetTop;document.onmousemove=function(e){var t=e.clientX-o,r=e.clientY-a;n.style.left=t+"px",n.style.top=r+"px"},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}}}},setup:function(e,t){var n=Object(o["getCurrentInstance"])(),a=(n.proxy,Object(o["reactive"])(e.title)),r=Object(o["reactive"])(e.panel),i=null===r||void 0===r?void 0:r.showTitle,c=null===r||void 0===r?void 0:r.dockMode,l=Object(o["reactive"])({title:a,panel:r,opened:!1,show:!0,randomClass:"",collapseIcon:"icon-zuo",showTitle:!0,dockShowTitle:i,dockMode:c,isCollapse:!0});function s(){l.show=!1}function u(){l.opened=!1,l.show=!1,c&&_()}function d(){var e=document.getElementsByClassName("epsplanet-popover "+l.randomClass)[0];V(c,e,l.isCollapse),l.isCollapse=!l.isCollapse}Object(o["watch"])((function(){return l.opened}),(function(e){e&&setTimeout((function(){var e=document.getElementsByClassName("tool-panel "+l.randomClass)[0];if("left"==r.dockMode||"right"==r.dockMode){r.size&&(e.style.width=r.size.width+"px",e.style.height="100%"),e.children[0].dataset.dragable="false";var t=document.getElementsByClassName("epsplanet-popover "+l.randomClass)[0];C(r.dockMode,t,window["earth"]),l.isCollapse=!1}else if("top"==r.dockMode||"bottom"==r.dockMode){r.size&&(e.style.width="100%",e.style.height=r.size.height+"px"),e.children[0].dataset.dragable="false";var n=document.getElementsByClassName("epsplanet-popover "+l.randomClass)[0];C(r.dockMode,n,window["earth"]),l.isCollapse=!1}else if(r.size&&(e.style.width=r.size.width+"px",e.style.height=r.size.height+"px"),r.position){var o=e.parentElement;o.style.top=r.position.top+"px",o.style.left=r.position.left+"px"}}),10)})),Object(o["watch"])((function(){return l.isCollapse}),(function(e){switch(c.toLowerCase()){case"left":l.collapseIcon=e?"icon-zuo":"icon-you";break;case"bottom":l.collapseIcon=e?"icon-zhankai":"icon-shouqi";break;default:break}})),Object(o["onBeforeMount"])((function(){if(l.randomClass=m(),r.dockMode){switch(l.dockMode.toLowerCase()){case"left":l.collapseIcon="icon-zuo";break;case"bottom":l.collapseIcon="icon-zhankai";break;default:break}l.showTitle=i}else l.showTitle=!0})),Object(o["onMounted"])((function(){console.log(e.title,r)})),Object(o["onBeforeUnmount"])((function(){}));var b=Object(o["toRefs"])(l);return Object(p["a"])(Object(p["a"])({},b),{},{closePanel:u,hiddenPanel:s,collapse:d})}});const K=P()(q,[["render",F]]);var Y=K;Y.install=function(e){e.component(Y.name,Y)};var J=Y,Q={class:"epsplanet-panel-base layerlist",style:{width:"296px"}},Z={class:"nodeBtn"},$=["onClick"];function ee(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-tree");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Q,[Object(o["createVNode"])(c,{ref:"treeRef",data:e.treeData,"show-checkbox":"","node-key":"id",props:e.defaultProps,"default-checked-keys":e.defaultChecked,"default-expanded-keys":e.defaultExpanded,onCheckChange:e.handleCheck,onNodeExpand:e.handleExpand,onNodeCollapse:e.handleCollapse},{default:Object(o["withCtx"])((function(t){var n=t.node,a=t.data;return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.label)+" ",1),Object(o["createElementVNode"])("span",Z,[n.isLeaf?(Object(o["openBlock"])(),Object(o["createElementBlock"])("a",{key:0,class:"iconfont icon-shu-4",onClick:function(t){return e.locate(a,n)},title:"定位"},null,8,$)):Object(o["createCommentVNode"])("",!0)])]})),_:1},8,["data","props","default-checked-keys","default-expanded-keys","onCheckChange","onNodeExpand","onNodeCollapse"])])}n("159b");var te=n("2ef0"),ne=n.n(te),oe=Object(o["defineComponent"])({name:"EpsplanetLayerList",props:[],setup:function(){var e,t=Object(o["getCurrentInstance"])(),n=t.proxy,a=Object(o["reactive"])({treeData:[],defaultProps:{children:"children",label:"label"},defaultChecked:[],defaultExpanded:[],expandKeys:[],disposer:[]});function r(e){var t=[];return e.forEach((function(e){if(e.children){var n=r(e.children);t.push({label:e.title,children:n,id:e.xbsjID}),e.expand&&a.expandKeys.push(e.xbsjID)}else t.push({label:e.title,guid:e.czmObject.xbsjGuid,isLeaf:!0,id:e.xbsjID}),e.czmObject.show&&a.defaultChecked.push(e.xbsjID)})),t}function i(){a.treeData=r(e.sceneTree.root.children),a.disposer.push(XE.MVVM.watch((function(){if(e.sceneTree)return e.sceneTree.root.toJSONStr()}),(function(){ne.a.debounce((function(){c()}),100)()})))}function c(){e.sceneTree&&(a.defaultChecked=[],a.expandKeys=[],a.treeData=r(e.sceneTree.root.children),n.$refs.treeRef.store.setDefaultCheckedKey(a.defaultChecked),n.$refs.treeRef.store.setDefaultExpandedKeys(a.expandKeys))}function l(t,n,o){if(t.children&&!o&&d(t.id).then((function(e){e.enabled=n})),t.guid){var a=e.getObject(t.guid);console.log(a),a.show=n}}function s(e){d(e.id).then((function(e){e.expand=!0}))}function u(e){d(e.id).then((function(e){e.expand=!1}))}function d(t){return new Promise((function(n){var o=e.sceneTree.root.children;function a(e){e.forEach((function(e){e.xbsjID==t&&n(e),e.children&&a(e.children)}))}a(o)}))}function m(t,n){e.getObject(t.guid).flyTo()}function b(){a.disposer.forEach((function(e){return e()}))}Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,i();case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){b()})),window["refresh"]=c,window["getByID"]=d;var f=Object(o["toRefs"])(a);return Object(p["a"])(Object(p["a"])({},f),{},{init:i,handleCheck:l,handleExpand:s,handleCollapse:u,locate:m,del:b})}});const ae=P()(oe,[["render",ee]]);var re=ae;re.install=function(e){e.component(re.name,re)};var ie=re,ce=["id"];function le(e,t,n,a,r,i){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{id:e.container,style:{width:"100%",height:"100%",display:"inline-block",position:"relative"}},[Object(o["renderSlot"])(e.$slots,"default")],8,ce)}var se={params:{type:Object,require:!1,default:null},container:{type:String,require:!0},showCompass:{type:Boolean,require:!1,default:!1},compassStyle:{type:Object,require:!1,default:{left:void 0,top:30,right:30,bottom:void 0}},showDistanceLegend:{type:Boolean,require:!1,default:!1},distanceLegendStyle:{type:Object,require:!1,default:{left:void 0,top:void 0,right:30,bottom:20}},showDefaultBasemap:{type:Boolean,require:!1,default:!0}},ue=["onReady"],de=Object(o["defineComponent"])({name:"EpsplanetEarth",props:se,emits:ue,setup:function(e,t){var n,a,r,i,c,l,s,u=g.getInstance(),d=Object(o["reactive"])(e.params),m=null!==(n=null===d||void 0===d?void 0:d.container)&&void 0!==n?n:Object(o["reactive"])(e.container),b=null!==(a=null===d||void 0===d?void 0:d.showCompass)&&void 0!==a?a:Object(o["reactive"])(e.showCompass),f=null!==(r=null===d||void 0===d?void 0:d.showDistanceLegend)&&void 0!==r?r:Object(o["reactive"])(e.showDistanceLegend),j=null!==(i=null===d||void 0===d?void 0:d.compassStyle)&&void 0!==i?i:Object(o["reactive"])(e.compassStyle),O=(null!==(c=null===d||void 0===d?void 0:d.showDefaultBasemap)&&void 0!==c||Object(o["reactive"])(e.showDefaultBasemap),null!==(l=null===d||void 0===d?void 0:d.distanceLegendStyle)&&void 0!==l?l:Object(o["reactive"])(e.distanceLegendStyle)),v=Object(o["reactive"])({params:d,container:m,showCompass:b});function w(){XE.ready().then((function(){XE.HTML.loadJS("EPSPlanet_SDK/XbsjEarth-Plugins/turf.min.js"),XE.HTML.loadJS("EPSPlanet_SDK/XbsjEarth-Plugins/plottingSymbol/plottingSymbol.js"),XE.HTML.loadJS("EPSPlanet_SDK/XbsjEarth-Plugins/plottingSymbol2/plottingSymbol2.js"),XE.HTML.loadJS("EPSPlanet_SDK/XbsjEarth-Plugins/customPrimitive/customPrimitive.js"),XE.HTML.loadJS("EPSPlanet_SDK/XbsjEarth-Plugins/customPrimitiveCone/customPrimitiveCone.js"),XE.HTML.loadJS("EPSPlanet_SDK/XbsjEarth-Plugins/customPrimitiveImage/customPrimitiveImage.js")})).then((function(){var e=new XE.Earth(m);s=e,window.earth=e,e.sceneTree.root={children:[]},e.camera.navigator.showCompass=b,e.camera.navigator.compassStyle=j,e.camera.navigator.showDistanceLegend=f,e.camera.navigator.distanceLegendStyle=O;var n=setInterval(Object(h["a"])(regeneratorRuntime.mark((function o(){var a;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,C();case 2:a=o.sent,a&&(clearInterval(n),u.setEarth(e),t.emit("onReady",e));case 4:case"end":return o.stop()}}),o)}))),1e3);window.getEarth=u.getEarth()}))}function C(){return new Promise((function(e,t){XE&&XE.Obj&&XE.Obj.Plots&&XE.Obj.Plots.GeoArc&&XE.Obj.Plots.GeoArrow&&XE.Obj.Plots.GeoBezier2&&XE.Obj.Plots.GeoBezier3&&XE.Obj.Plots.GeoCircle&&XE.Obj.Plots.GeoCurve&&XE.Obj.Plots.GeoCurveArrow&&XE.Obj.Plots.GeoCurveFlag&&XE.Obj.Plots.GeoDoubleArrow&&XE.Obj.Plots.GeoParallelSearch&&XE.Obj.Plots.GeoPin&&XE.Obj.Plots.GeoPolygon&&XE.Obj.Plots.GeoPolyline&&XE.Obj.Plots.GeoPolylineArrow&&XE.Obj.Plots.GeoRectangle&&XE.Obj.Plots.GeoRightAngleFlag&&XE.Obj.Plots.GeoSector&&XE.Obj.Plots.GeoSectorSearch&&XE.Obj.Plots.GeoSimpleArrow&&XE.Obj.Plots.GeoSmoothPolygon&&XE.Obj.Plots.GeoTriFlag&&XE.Obj.Plots.ParticleSystem&&XE.Obj.Plots.ParticleSystemFireWork&&XE.Obj.Plots.ParticleSystemTails?e(!0):e(!1)}))}Object(o["onBeforeMount"])((function(){w()})),Object(o["onMounted"])((function(){})),Object(o["onBeforeUnmount"])((function(){u.destroyEarth(s)}));var V=Object(o["toRefs"])(v);return Object(p["a"])(Object(p["a"])({},V),{},{loaded:C})}});const pe=P()(de,[["render",le]]);var me=pe;me.install=function(e){e.component(me.name,me)};var be=me,fe={class:"baseul"},he=["onClick"],je=["src","alt"];function Oe(e,t,n,a,r,i){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"basemap",style:{position:"absolute",bottom:"240px",right:"40px","background-color":"rgba(0, 0, 255, 0)"},onMouseover:t[0]||(t[0]=function(){return e.overStyle&&e.overStyle.apply(e,arguments)}),onMouseleave:t[1]||(t[1]=function(){return e.leaveStyle&&e.leaveStyle.apply(e,arguments)})},[Object(o["createElementVNode"])("ul",fe,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.basemapList,(function(t,n){return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:n,id:"transition-box",style:Object(o["normalizeStyle"])({transform:e.isHover?"translateX("+-83*n+"px)":e.none,border:e.isHover?"3px solid rgba(35, 145, 242, 1)":"3px solid rgba(44, 47, 56, 0.5)","z-index":t.show?2:1})},[Object(o["createElementVNode"])("div",{class:"img-div",onClick:function(n){return e.selectBasemap(t)}},[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(t.name),1),Object(o["createElementVNode"])("img",{src:t.imgUrl,alt:t.name,class:"image"},null,8,je)],8,he)],4)})),128))])],32)}n("4de4");var ge=n("bc3a"),ve=n.n(ge),we=n("3ef4"),Ce=Object(o["defineComponent"])({name:"EpsplanetBasemap",setup:function(e,t){var n,a=Object(o["reactive"])({isHover:!1,basemapList:[{show:!1,name:"天地图影像",imgUrl:"Epsplanet_Assets/assets/basemap/vector_map.png",xbsjType:"Imagery",xbsjImageryProvider:{XbsjImageryProvider:{url:"http://t6.tianditu.com/DataServer?T=img_w&x={x}&y={y}&l={z}&tk=cf7c0b94d43b4d5e1f27a5712b147c70",srcCoordType:"WGS84",dstCoordType:"WGS84"}}},{show:!0,name:"离线影像",imgUrl:"Epsplanet_Assets/assets/basemap/Image_map.png",xbsjType:"Imagery",xbsjImageryProvider:XE.Obj.Imagery.defaultImageryProviderConfig},{show:!1,name:"高德影像",imgUrl:"Epsplanet_Assets/assets/basemap/Image_map.png",xbsjType:"Imagery",xbsjImageryProvider:{XbsjImageryProvider:{url:"http://webst02.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}",srcCoordType:"GCJ02",dstCoordType:"WGS84"}}}]});Object(o["onBeforeMount"])((function(){})),Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g.instance.getEarth();case 2:return n=e.sent,e.next=5,r();case 5:l();case 6:case"end":return e.stop()}}),e)}))));var r=function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ve.a.get("Epsplanet_Assets/widgets/base/basemap/config.json").then((function(e){a.basemapList=e.data.basemapList})).catch((function(e){we["a"].error("加载配置文件失败")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){a.isHover=!0},c=function(){a.isHover=!1},l=function(){var e,t=a.basemapList.filter((function(e){return 1==(null===e||void 0===e?void 0:e.show)}));if(e=0==t.length?JSON.parse(JSON.stringify(a.basemapList[0])):JSON.parse(JSON.stringify(t[0])),e.xbsjImageryProvider||(e.xbsjImageryProvider=XE.Obj.Imagery.defaultImageryProviderConfig),delete e.show,0==n.sceneTree.root.children.length){var o={czmObject:e},r={czmObject:{xbsjType:"Terrain",xbsjGuid:"d47253ba-f703-4282-92fd-0a5de4ebeb9a",name:"未命名地形",xbsjTerrainProvider:{type:"XbsjCesiumTerrainProvider",XbsjEllipsoidTerrainProvider:{},XbsjCesiumTerrainProvider:{url:"http://www.supermapol.com/realspace/services/3D-stk_terrain/rest/realspace/datas/info/data/path",requestVertexNormals:!0,requestWaterMask:!0},GoogleEarthEnterpriseTerrainProvider:{}}}};n.sceneTree.root.children.push(o,r)}else s(e)},s=function(e){a.basemapList.forEach((function(e){e.show=!1})),e.show=!0,a.isHover=!1;var t=JSON.parse(JSON.stringify(e));t.show&&delete t.show,n.sceneTree.root.children[0].czmObject={},n.sceneTree.root.children[0].czmObject=t};Object(o["onBeforeUnmount"])((function(){}));var u=Object(o["toRefs"])(a);return Object(p["a"])(Object(p["a"])({},u),{},{overStyle:i,leaveStyle:c,selectBasemap:s})}});const Ve=P()(Ce,[["render",Oe]]);var xe=Ve;xe.install=function(e){e.component(xe.name,xe)};var ye=xe,Ee={class:"epsplanet-statusBar"};function Ne(e,t,n,a,r,i){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ee,[Object(o["withDirectives"])(Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.cameraString),513),[[o["vShow"],e.showCamera]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.heightString),513),[[o["vShow"],e.showHeight]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.fpsString),513),[[o["vShow"],e.showFps]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.headingString),513),[[o["vShow"],e.showHeading]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.pitchString),513),[[o["vShow"],e.showPitch]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.rollString),513),[[o["vShow"],e.showRoll]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.velocityString),513),[[o["vShow"],e.showVelocity]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.mouseString),513),[[o["vShow"],e.showMouse]])])}n("b680");var _e=Object(o["defineComponent"])({name:"EpsplanetStatusBar",props:[],setup:function(){var e,t=Object(o["getCurrentInstance"])(),n=t.proxy,a=n,r=Object(o["reactive"])({showLon:!0,showLat:!0,showCamera:!0,showHeight:!0,showFps:!0,showHeading:!0,showPitch:!0,showRoll:!0,showVelocity:!0,showMouse:!0,longitudeString:"",latitudeString:"",heightString:"",headingString:"",pitchString:"",rollString:"",cameraString:"",fpsString:"",baseVelocity:0,velocity:0,velocityRatio:1,lang:{longitude:"经度",latitude:"纬度",height:"高度",fps:"帧率",heading:"偏航角",pitch:"俯仰角",roll:"翻滚角",meter:"米",velocity:"键盘运动速度",createPolylineTip:"左键添加点，右键删除点，shift+右键创建完成",editPolylineTip:"鼠标移动到其中一个点会出现一个操作栏，点击移动按钮，可以移动折线位置；点击增加按钮，可以在该位置增加一个点；点击删除按钮，可以删除该点",createRectangleTip:"点击左键确定矩形中心点，移动鼠标确定矩形方向和对角线长度，再次点击左键创建完成",editRectangleTip:"左键点击其中一个点移动矩形位置",createCircleTip:"点击左键确定圆的圆心，移动鼠标确定圆的半径，再次点击左键创建完成",editCircleTip:"左键点击其中一个点移动圆位置",createDoubleArrowTip:"在四个不同位置点击左键创建双箭头",editDoubleArrowTip:"左键点击其中一个点移动双箭头位置",createFlattenedPolygonTip:"左键添加点，右键删除点，shift+右键停止绘制，上下移动鼠标确定高度，再次点击左键创建完成",editFlattenedPolygonTip:"鼠标移动到其中一个点会出现一个操作栏，点击移动按钮，可以移动折线位置；点击增加按钮，可以在该位置增加一个点；点击删除按钮，可以删除该点",movableObjectTip:"鼠标左键点击坐标轴x,y,z任意一个轴，轴变黄色，可沿着相应位置进行移动，再次点击，轴恢复原色，停止移动，点击右键坐标轴消失",rotatableObjectTip:"鼠标左键点击旋转坐标轴任意一个轴，轴变黄色，可沿着相应位置进行旋转，再次点击，轴恢复原色，停止旋转，点击右键旋转坐标轴消失",positionPickingTip:"点击鼠标左键拾取位置"},mousePos:{lng:0,lat:0,height:0},mouseString:""}),i=[];Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,l();case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){s()}));var c=Object(o["computed"])((function(){return" ".concat(r.lang.velocity,": ").concat(r.velocity.toFixed(1)," km/h (").concat(r.baseVelocity.toFixed(1)," × ").concat(r.velocityRatio.toFixed(1),")")}));function l(){var t=e.czm.scene,n=[0,0,0];e.czm.viewer.canvas.addEventListener("mousemove",(function(t){var o=e.pickPosition({x:t.offsetX,y:t.offsetY},n);o?(r.mousePos.lng=180*o[0]/Math.PI,r.mousePos.lat=180*o[1]/Math.PI,r.mousePos.height=o[2],r.mouseString="鼠标位置:"+r.mousePos.lng.toFixed(6)+"° "+r.mousePos.lat.toFixed(6)+"° "+r.mousePos.height.toFixed(2)+"m"):r.mouseString="暂时无法获取鼠标位置..."}));var o=e.czm.camera,c=Cesium.Math.toDegrees,l=function(){var e=o,t=c(e.positionCartographic.longitude).toFixed(5),n=c(e.positionCartographic.latitude).toFixed(5),a=e.positionCartographic.height.toFixed(2),i=c(e.heading).toFixed(2),l=c(e.pitch).toFixed(2),s=c(e.roll).toFixed(2);r.cameraString="".concat(r.lang.longitude,": ").concat(t,"° ").concat(r.lang.latitude,": ").concat(n,"°"),r.longitudeString="".concat(r.lang.longitude,": ").concat(t,"°"),r.latitudeString="".concat(r.lang.latitude,": ").concat(n,"°"),r.heightString="".concat(r.lang.height,": ").concat(a).concat(r.lang.meter),r.headingString="".concat(r.lang.heading,": ").concat(i,"°"),r.pitchString="".concat(r.lang.pitch,": ").concat(l,"°"),r.rollString="".concat(r.lang.roll,": ").concat(s,"°")};i=[],i.push(o.changed.addEventListener(l)),l(),t.debugShowFramesPerSecond=!0;var s=t._postRender.addEventListener((function(){s(),t._performanceContainer.style.visibility="hidden"}));i.push(t._postRender.addEventListener((function(){t._performanceDisplay?r.fpsString="".concat(r.lang.fps,": ").concat(t._performanceDisplay._fpsText.nodeValue," "):r.fpsString=""}))),i.push(XE.MVVM.track(a,"baseVelocity",e.camera.immersion,"baseVelocity")),i.push(XE.MVVM.track(a,"velocity",e.camera.immersion,"velocity")),i.push(XE.MVVM.bind(a,"velocityRatio",e.camera.immersion,"velocityRatio"))}function s(){i&&(i.forEach((function(e){return e()})),i.length=0)}var u=Object(o["toRefs"])(r);return Object(p["a"])(Object(p["a"])({},u),{},{velocityString:c,init:l,del:s})}});const ke=P()(_e,[["render",Ne]]);var Me=ke;Me.install=function(e){e.component(Me.name,Me)};var Te=Me,Pe=[R,J,I,ie,be,ye,Te],Se={class:"epsplanet-panel-base",style:{width:"296px"}};function ze(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-slider"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-color-picker"),u=Object(o["resolveComponent"])("el-form");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Se,[Object(o["createVNode"])(u,{ref:"form","label-width":"60px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:e.label.width},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.width,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.width=t}),min:1,max:10,step:.1,"show-input":"","show-input-controls":!1},null,8,["modelValue","step"])]})),_:1},8,["label"]),Object(o["createVNode"])(l,{label:e.label.spacing},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.spacing,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.spacing=t}),min:1,max:300,step:1,"show-input":"","show-input-controls":!1},null,8,["modelValue"])]})),_:1},8,["label"]),Object(o["createVNode"])(l,{label:e.label.color},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.uicolor,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.uicolor=t}),"show-alpha":"",onActiveChange:e.changeColor},null,8,["modelValue","onActiveChange"])]})),_:1},8,["label"])]})),_:1},512)])}n("ac1f"),n("1276"),n("a9e3");var Re=Object(o["defineComponent"])({name:"EpsplanetContour",props:[],setup:function(){var e,t=Object(o["getCurrentInstance"])(),n=t.proxy,a=n,r=Object(o["reactive"])({label:{width:"线宽",spacing:"间距",color:"颜色"},width:1,spacing:100,color:[],uicolor:"rgba(249, 42, 0, 1)"}),i=[];function c(){e.terrainEffect.contour.enabled=!0,i.push(XE.MVVM.bind(a,"width",e.terrainEffect.contour,"width"),XE.MVVM.bind(a,"spacing",e.terrainEffect.contour,"spacing"))}function l(t){var n=t.split("(")[1].split(")")[0].split(","),o=[];n.forEach((function(e,t){3==t?o.push(Number(e)):o.push(Number(e)/255)})),e.terrainEffect.contour.color=o}function s(){e.terrainEffect.contour.enabled=!1,i&&(i.forEach((function(e){return e()})),i.length=0)}Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,c();case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){s()}));var u=Object(o["toRefs"])(r);return Object(p["a"])(Object(p["a"])({},u),{},{init:c,changeColor:l,del:s})}});const Be=P()(Re,[["render",ze]]);var Xe=Be;Xe.install=function(e){e.component(Xe.name,Xe)};var Le=Xe,Ue={class:"epsplanet-panel-base potholing",style:{width:"296px"}},Ae={class:"tool-panel-button"},De=Object(o["createTextVNode"])("创建"),Ie=Object(o["createTextVNode"])("编辑"),Ge=Object(o["createTextVNode"])("保存");function He(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-input"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-option"),u=Object(o["resolveComponent"])("el-select"),d=Object(o["resolveComponent"])("el-slider"),p=Object(o["resolveComponent"])("el-switch"),m=Object(o["resolveComponent"])("el-form"),b=Object(o["resolveComponent"])("el-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ue,[Object(o["createVNode"])(m,{ref:"form","label-width":"60px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"名称"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.name=t}),placeholder:"未命名开挖分析",size:"small"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"选择"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{size:"small",modelValue:e.selectTileset,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selectTileset=t}),placeholder:"请选择",onChange:e.changeTileset,onVisibleChange:e.xiala,"value-key":"index","popper-class":"tool-panel-popper"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.tilesetList,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:e.index,label:e.name,value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange","onVisibleChange"])]})),_:1}),Object(o["createVNode"])(l,{label:"深度"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.deep,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.deep=t}),min:-100,max:100,step:1,"show-input":"","show-input-controls":!1},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"显隐"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{modelValue:e.show,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.show=t}),"inactive-color":"#dcdfe6"},null,8,["modelValue"])]})),_:1})]})),_:1},512),Object(o["createElementVNode"])("div",Ae,[Object(o["createVNode"])(b,{onClick:t[4]||(t[4]=function(t){return e.creating=!e.creating})},{default:Object(o["withCtx"])((function(){return[De]})),_:1}),Object(o["createVNode"])(b,{onClick:t[5]||(t[5]=function(t){return e.editing=!e.editing})},{default:Object(o["withCtx"])((function(){return[Ie]})),_:1}),Object(o["createVNode"])(b,{size:"small",onClick:e.save},{default:Object(o["withCtx"])((function(){return[Ge]})),_:1},8,["onClick"])])])}var Fe=Object(o["defineComponent"])({name:"EpsplanetPotholing",props:[],setup:function(){var e,t,n=Object(o["getCurrentInstance"])(),a=n.proxy,r=a,i=Object(o["reactive"])({name:"未命名开挖分析",tilesetList:[{}],selectTileset:void 0,creating:!1,editing:!1,show:!0,theHeight:0,height:100,deep:0,bottomTextureRotationEditing:!1,applyToTerrain:!1,sampledDistance:10,wallImageUrl:"",wallImageHeight:3,imageHeight:3,wallImageWidthScale:1,bottomImageUrl:"",bottomImageHeight:3,bottomImageWidthScale:1,_disposer:[0],isSaved:!1,tips:"shift + 鼠标右键结束绘制"});function c(){var n=new XE.Obj.CutSurface(e);t=n,n.creating=!0,t=n,i._disposer=[],i._disposer.push(XE.MVVM.bind(r,"name",n,"name"),XE.MVVM.bind(r,"creating",n,"creating"),XE.MVVM.bind(r,"editing",n,"editing"),XE.MVVM.bind(r,"show",n,"show"),XE.MVVM.bind(r,"height",n,"height"),XE.MVVM.watch((function(){return n.creating}),(function(){n.creating||(i.theHeight=n.height)})))}function l(){i.tilesetList=[],e.tilesetCollection.forEach((function(e,t){i.tilesetList.push({name:e.name,index:t})}))}function s(n){console.log(t);var o=e.tilesetCollection[n.index];e.tilesetCollection.forEach((function(e){return o.xbsjFlattenGuid=""})),o.xbsjFlattenGuid=t.getDiscardGuid()}function u(){i.isSaved=!0;var n=new XE.SceneTree.Leaf(t);e.sceneTree.root.children.push(n),r.confirmAnalysis(n)}function d(){t&&!i.isSaved&&(t.destroy(),t=void 0),i._disposer&&(i._disposer.forEach((function(e){return e()})),i._disposer.length=0)}Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,c();case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){d()})),Object(o["watch"])((function(){return i.deep}),(function(e){i.height=i.theHeight-e}));var m=Object(o["toRefs"])(i);return Object(p["a"])(Object(p["a"])({},m),{},{init:c,xiala:l,changeTileset:s,save:u,del:d})}});const We=P()(Fe,[["render",He]]);var qe=We;qe.install=function(e){e.component(qe.name,qe)};var Ke=qe,Ye={class:"epsplanet-panel-base",style:{width:"390px"}};function Je(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-option"),l=Object(o["resolveComponent"])("el-select"),s=Object(o["resolveComponent"])("el-form-item"),u=Object(o["resolveComponent"])("el-form"),d=Object(o["resolveComponent"])("el-table-column"),p=Object(o["resolveComponent"])("el-input"),m=Object(o["resolveComponent"])("el-switch"),b=Object(o["resolveComponent"])("Location"),f=Object(o["resolveComponent"])("el-icon"),h=Object(o["resolveComponent"])("Edit"),j=Object(o["resolveComponent"])("plus"),O=Object(o["resolveComponent"])("delete"),g=Object(o["resolveComponent"])("el-table");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ye,[Object(o["createVNode"])(u,{ref:"form","label-width":"60px",style:{"margin-bottom":"4px"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{label:"选择"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{size:"small",modelValue:e.selectTileset,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.selectTileset=t}),placeholder:"请选择",onChange:e.changeTileset,onVisibleChange:e.xiala,"value-key":"index","popper-class":"tool-panel-popper"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.tilesetList,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:e.index,label:e.name,value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange","onVisibleChange"])]})),_:1})]})),_:1},512),Object(o["createVNode"])(g,{data:e.polygonList,border:"",style:{width:"100%"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{type:"index",width:"60",label:"序号"}),Object(o["createVNode"])(d,{prop:"height",label:"高度",width:"120"},{default:Object(o["withCtx"])((function(t){return[Object(o["createVNode"])(p,{modelValue:t.row.height,"onUpdate:modelValue":function(e){return t.row.height=e},placeholder:"请输入内容",type:"number",step:.1,onChange:function(n){return e.changeHeight(t.row)}},null,8,["modelValue","onUpdate:modelValue","step","onChange"])]})),_:1}),Object(o["createVNode"])(d,{prop:"showHelper",label:"显示",width:"70"},{default:Object(o["withCtx"])((function(t){return[Object(o["createVNode"])(m,{modelValue:t.row.showHelper,"onUpdate:modelValue":function(e){return t.row.showHelper=e},"active-color":"#13ce66","inactive-color":"#dcdfe6",onChange:function(n){return e.showHelper(t.row,t.row.showHelper)}},null,8,["modelValue","onUpdate:modelValue","onChange"])]})),_:1}),Object(o["createVNode"])(d,{prop:"province",label:"定位",width:"50"},{default:Object(o["withCtx"])((function(t){return[Object(o["createVNode"])(f,{size:20,color:"#281f1d",onClick:function(n){return e.locate(t.row)}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(b)]})),_:2},1032,["onClick"])]})),_:1}),Object(o["createVNode"])(d,{prop:"province",label:"编辑",width:"50"},{default:Object(o["withCtx"])((function(t){return[Object(o["createVNode"])(f,{size:20,color:"#281f1d",onClick:function(n){return e.edit(t.row)}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(h)]})),_:2},1032,["onClick"])]})),_:1}),Object(o["createVNode"])(d,{align:"left",width:"46"},{header:Object(o["withCtx"])((function(t){return[Object(o["createVNode"])(f,{size:20,color:"#281f1d",onClick:e.add},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(j)]})),_:1},8,["onClick"])]})),default:Object(o["withCtx"])((function(t){return[Object(o["createVNode"])(f,{size:20,color:"#281f1d",onClick:function(n){return e.del(t.$index)}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(O)]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])])}n("a434");var Qe=Object(o["defineComponent"])({name:"EpsplanetFlatten",props:[],setup:function(){var e,t,n=Object(o["getCurrentInstance"])(),a=(n.proxy,Object(o["reactive"])({label:{flattnTileset:"压平瓦片",cutSurface:"挖坑",polygon:"多边形"},tilesetList:[],cutSurface:!1,polygonList:[],_flattenObj:void 0,selectTileset:void 0,tips:"shift + 鼠标右键结束绘制；鼠标右键结束编辑",_disposers:[]}));function r(){var n=new XE.Obj.FlattenedPolygonCollection(e);t=n,console.log(n)}function i(){a.polygonList=[],t.polygons.forEach((function(e,t){a.polygonList.push({id:e.guid,height:Number(e.height).toFixed(2),edit:e.edit,showHelper:e.showHelper,index:t})}))}function c(e){console.log("loca",t.polygons[e.index]),t.polygons[e.index].flyTo()}function l(){t.polygons.push({}),t.polygons[t.polygons.length-1].creating=!0,a._disposers.push(XE.MVVM.watch((function(){return t.polygons[t.polygons.length-1].creating}),(function(){t.polygons[t.polygons.length-1].creating||(console.log(t.polygons[t.polygons.length-1].height),i(),a._disposers.forEach((function(e){return e()})),a._disposers.length=0)}))),console.log(a.polygonList)}function s(e){t.polygons[e.index].editing=!0,a._disposers.push(XE.MVVM.watch((function(){return t.polygons[t.polygons.length-1].editing}),(function(){t.polygons[t.polygons.length-1].editing||(console.log(t.polygons[t.polygons.length-1].height),i(),a._disposers.forEach((function(e){return e()})),a._disposers.length=0)})))}function u(e){t.polygons.splice(e,1),i(),console.log(a.polygonList)}function d(){a.tilesetList=[],e.tilesetCollection.forEach((function(e,t){a.tilesetList.push({name:e.name,index:t})}))}function m(n){var o=e.tilesetCollection[n.index];e.tilesetCollection.forEach((function(e){return o.xbsjFlattenGuid=""})),o.xbsjFlattenGuid=t.xbsjGuid}function b(e,n){t.polygons[e.index].showHelper=n}function f(e){t.polygons[e.index].height=e.height}function j(){t&&(t.polygons.forEach((function(e){return e.destroy()})),t.destroy(),t=void 0,a.polygonList=[]),a._disposers&&(a._disposers.forEach((function(e){return e()})),a._disposers.length=0)}Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,r();case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){j()}));var O=Object(o["toRefs"])(a);return Object(p["a"])(Object(p["a"])({},O),{},{init:r,computePolyList:i,locate:c,add:l,edit:s,showHelper:b,changeHeight:f,destroy:j,xiala:d,changeTileset:m,del:u})}});const Ze=P()(Qe,[["render",Je]]);var $e=Ze;$e.install=function(e){e.component($e.name,$e)};var et=$e,tt={class:"epsplanet-panel-base",style:{width:"356px"}},nt={class:"tool-panel-button"},ot=Object(o["createTextVNode"])("创建"),at=Object(o["createTextVNode"])("开始"),rt=Object(o["createTextVNode"])("清除");function it(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-slider"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-form"),u=Object(o["resolveComponent"])("el-button"),d=Object(o["resolveDirective"])("loading");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",tt,[Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])(s,{ref:"form","label-width":"120px","element-loading-text":"正在提取高程...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"最小高度(米)"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.minHeight,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.minHeight=t}),min:0,max:2*e.minWaterHeight,step:.1,"show-input":"","show-input-controls":!1},null,8,["modelValue","max","step"])]})),_:1}),Object(o["createVNode"])(l,{label:"最大高度(米)"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.maxHeight,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.maxHeight=t}),min:e.minWaterHeight,max:e.maxWaterHeight,step:.1,"show-input":"","show-input-controls":!1},null,8,["modelValue","min","max","step"])]})),_:1}),Object(o["createVNode"])(l,{label:"水淹速度(米/秒)"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.speed,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.speed=t}),min:0,max:100,step:1e-4,"show-input":"","show-input-controls":!1},null,8,["modelValue","step"])]})),_:1}),Object(o["createVNode"])(l,{label:"预计淹没时间"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.needTime),1)]})),_:1})]})),_:1})),[[d,e.loading]]),Object(o["createElementVNode"])("div",nt,[Object(o["createVNode"])(u,{onClick:t[3]||(t[3]=function(t){return e.creating=!0}),size:"small"},{default:Object(o["withCtx"])((function(){return[ot]})),_:1}),Object(o["createVNode"])(u,{onClick:e.start,size:"small"},{default:Object(o["withCtx"])((function(){return[at]})),_:1},8,["onClick"]),Object(o["createVNode"])(u,{onClick:e.clearResult,size:"small"},{default:Object(o["withCtx"])((function(){return[rt]})),_:1},8,["onClick"])])])}function ct(e,t,n){return new Promise((function(n){var o=[];t.forEach((function(e){o.push([turf.radiansToDegrees(e[0]),turf.radiansToDegrees(e[1])])})),o.push([turf.radiansToDegrees(t[0][0]),turf.radiansToDegrees(t[0][1])]);var a=turf.polygon([o]),r=turf.bbox(a);console.log(r);var i=turf.area(a);console.log(i);var c=0;c=i<5e4?5:i/1e4;var l={units:"meters"},s=turf.pointGrid(r,c,l);console.log(s);var u=turf.pointsWithinPolygon(s,a);e.czm.scene.globe.depthTestAgainstTerrain=!0;var d=[];u.features.forEach((function(t){var n=t.geometry.coordinates;d.push(lt(e.czm.scene,n))}));var p=Math.max.apply(Math,d),m=Math.min.apply(Math,d);n([m,p])}))}function lt(e,t){var n=new Cesium.Cartographic.fromDegrees(t[0],t[1]);return e.sampleHeight(n)}var st={getExtremum:ct},ut=Object(o["defineComponent"])({name:"EpsplanetFlood",props:[],setup:function(){var e,t,n=Object(o["getCurrentInstance"])(),a=n.proxy,r=a,i=Object(o["reactive"])({creating:!1,editing:!1,waterPositions:[],minWaterHeight:0,maxWaterHeight:0,maxHeight:0,minHeight:0,speed:.001,_waterEntities:void 0,timer:void 0,entities:[],loading:!1,needTime:"0"}),l=[];function s(){e.czm.viewer.scene.globe.depthTestAgainstTerrain=!0;var n=new XE.Obj.Plots.GeoPolygon(e);t=n,l=[],l.push(XE.MVVM.bind(r,"creating",n,"creating"),XE.MVVM.watch((function(){return n.creating}),Object(h["a"])(regeneratorRuntime.mark((function t(){var o,a,r,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(n.creating),n.creating||!(n.positions.length>2)){t.next=14;break}for(o=[],a=0;a<n.positions.length;a++)r=n.positions[a],o.push.apply(o,Object(c["a"])(r));return t.next=6,st.getExtremum(e,n.positions,5);case 6:l=t.sent,i.waterPositions=o,i.minHeight=Number(l[0].toFixed(3)),i.maxHeight=Number(l[1].toFixed(3)),i.maxWaterHeight=2*i.maxHeight,i.minWaterHeight=i.minHeight,t.next=15;break;case 14:n.show=!0;case 15:case"end":return t.stop()}}),t)}))))),n.creating=!0,console.log(n)}function u(e){for(var t=[],n=2;n<e.length;n+=3){var o=e[n];t.push(o)}var a=Math.min.apply(Math,t);return Number(a.toFixed(3))}function d(t,n,o){var a=i.minHeight,r=e.czm.viewer.entities.add({polygon:{hierarchy:Cesium.Cartesian3.fromRadiansArrayHeights(n),material:new Cesium.Color.fromBytes(64,157,253,150),extrudedHeight:new Cesium.CallbackProperty((function(e,n){return a+=o/40,a>t&&(a=t),a}),!1)}});i._waterEntities=r}function m(){i._waterEntities&&f(),O(),d(i.maxHeight,i.waterPositions,i.speed)}function b(){i._waterEntities&&(e.czm.viewer.entities.remove(i._waterEntities),i._waterEntities=void 0),t&&(t.show=!1,t._polygon.positions=[])}function f(){i._waterEntities&&(e.czm.viewer.entities.remove(i._waterEntities),i._waterEntities=void 0)}function j(){i._waterEntities&&(e.czm.viewer.entities.remove(i._waterEntities),i._waterEntities=void 0),t&&(t.destroy(),t=void 0),l&&(l.forEach((function(e){return e()})),l.length=0)}function O(){var e=(i.maxHeight-i.minHeight)/i.speed;i.needTime=v(e),console.log(i.needTime)}function v(e){var t=parseInt(e),n=(e%1).toFixed(2);console.log(t);var o=0,a=0,r=0;t>60&&(o=parseInt(t/60+""),t=parseInt(t%60+""),o>60&&(a=parseInt(o/60+""),o=parseInt(o%60+""),a>24&&(r=parseInt(a/24+""),a=parseInt(a%24+""))));var i="";return t>0&&(i=parseInt(t)+Number(n)+"秒"),o>0&&(i=parseInt(o+"")+"分"+i),a>0&&(i=parseInt(a+"")+"小时"+i),r>0&&(i=parseInt(r+"")+"天"+i),i}Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,s();case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){j()}));var w=Object(o["toRefs"])(i);return Object(p["a"])(Object(p["a"])({},w),{},{init:s,getLowerHeight:u,drawWater:d,start:m,clearResult:b,clearWater:f,computeTime:O,formatSeconds:v,del:j})}});const dt=P()(ut,[["render",it]]);var pt=dt;pt.install=function(e){e.component(pt.name,pt)};var mt=pt,bt={class:"epsplanet-panel-base",style:{width:"100%"}},ft={class:"myBarChart",ref:"mains"},ht={class:"tool-panel-button"},jt=Object(o["createTextVNode"])("创建"),Ot=Object(o["createTextVNode"])("编辑");function gt(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-input-number"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-form"),u=Object(o["resolveComponent"])("el-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",bt,[Object(o["createVNode"])(s,{ref:"form","label-width":"70px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"采样间距"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.samplinginterval,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.samplinginterval=t}),step:1,max:1e3},null,8,["modelValue"])]})),_:1})]})),_:1},512),Object(o["createElementVNode"])("div",ft,null,512),Object(o["createElementVNode"])("div",ht,[Object(o["createVNode"])(u,{onClick:t[1]||(t[1]=function(t){return e.creating=!0}),size:"small"},{default:Object(o["withCtx"])((function(){return[jt]})),_:1}),Object(o["createVNode"])(u,{onClick:t[2]||(t[2]=function(t){return e.editing=!0}),size:"small"},{default:Object(o["withCtx"])((function(){return[Ot]})),_:1})])])}var vt=50;function wt(e,t,n){n.czm.scene.globe.depthTestAgainstTerrain||(n.czm.scene.globe.depthTestAgainstTerrain=!0);var o=[];o.push({distance:0,longitude:180*e[0][0]/Math.PI,latitude:180*e[0][1]/Math.PI,height:e[0][2]});var a=[],r=0;if(0===t){for(var i=1;i<e.length;i++){var c=e[i-1],l=e[i],s=Cesium.Cartesian3.fromRadians(c[0],c[1],c[2]),u=Cesium.Cartesian3.fromRadians(l[0],l[1],l[2]);r+=Cesium.Cartesian3.distance(s,u)}t=Math.round(r/vt)}if(!t)return null;r=0;for(i=1;i<e.length;i++){c=e[i-1],l=e[i];var d=[(c[0]+l[0])/2,(c[1]+l[1])/2,(c[2]+l[2])/2],p=(s=Cesium.Cartesian3.fromRadians(c[0],c[1],c[2]),u=Cesium.Cartesian3.fromRadians(l[0],l[1],l[2]),Cesium.Cartesian3.distance(s,u)),m=s;if(p>t){var b=p/t,f=(l[0]-c[0])/b,h=(l[1]-c[1])/b,j=0,O=c;while(p>=t){O=[O[0]+f,O[1]+h,0],O[2]=Ct(O,n);var g=Cesium.Cartesian3.fromRadians(O[0],O[1],O[2]);j+=Cesium.Cartesian3.distance(m,g),o.push({distance:Math.round(100*(r+j))/100,longitude:180*O[0]/Math.PI,latitude:180*O[1]/Math.PI,height:O[2]}),p-=t,m=g}p=j}else o.push({distance:Math.round(100*r)/100,longitude:180*l[0]/Math.PI,latitude:180*l[1]/Math.PI,height:l[2]});r+=p,a.push({dis:Math.round(100*p)/100+"米",pos:d})}a.push({dis:"总长："+Math.round(100*r)/100+"米",pos:e[0]});var v={};return v.sample=o,v.label=a,v.interval=t,v}function Ct(e,t){var n=new Cesium.Cartographic(e[0],e[1]);return t.czm.scene.sampleHeight(n)}var Vt=n("313e"),xt=Object(o["defineComponent"])({name:"EpsplanetProfile",props:[],setup:function(e,t){var n,a,r,i,l=Object(o["getCurrentInstance"])(),s=l.proxy,u=s,d=Object(o["reactive"])({creating:!1,editing:!1,_labels:[],samplinginterval:3}),m=[];function b(){n.czm.scene.globe.depthTestAgainstTerrain=!0;var e=new XE.Obj.Plots.GeoPolyline(n);a=e,console.log(e),e.creating=!0,m=[],m.push(XE.MVVM.bind(u,"creating",e,"creating"),XE.MVVM.bind(u,"editing",e,"editing"),XE.MVVM.watch((function(){return e.creating}),(function(){d.creating=e.creating})),XE.MVVM.watch((function(){return e.editing}),(function(){d.editing=e.editing})),XE.MVVM.watch((function(){return{positions:Object(c["a"])(e.positions)}}),(function(){f(e.positions)}))),r=Vt["b"](s.$refs.mains)}function f(e){if(d._labels&&d._labels.forEach((function(e){return e.destroy()})),d._labels=[],e.length>1){var t=d.samplinginterval,o=wt(e,t,n);if(!o)return;i=o;var a=o.label;a.forEach((function(e){var t=j(e);d._labels.push(t)})),O()}}function j(e){var t=new XE.Obj.Plots.GeoPin(n);return t.innerHTML='<div style="cursor:pointer;position: absolute;width:300px;left:6px; line-height:15px;color: white;"><span style="padding:2px;border-radius: 2px;text-stroke:2px #000;font-size: 14px;color:#ffffff;background-color: rgba(50,50,50,0.5)">'+e.dis+"</span></div>",t.position=e.pos,t._pin.show=!1,t}function O(){var e=i.sample,t=[],n=[];e.forEach((function(e){t.push(e.distance),n.push(Number(e.height.toFixed(2)))})),r.setOption({tooltip:{trigger:"axis",position:function(e,t,n,o,a){var r=e[0],i=e[1],c=(a.viewSize[0],a.viewSize[1],a.contentSize[0]),l=a.contentSize[1],s=0,u=0;return s=r<c?5:r-c,u=i<l?5:i-l,[s,u]},formatter:function(t){var n=t[0];return n.data=e[n.dataIndex],"<span>所在位置 "+n.data.longitude.toFixed(6)+"°,"+n.data.latitude.toFixed(6)+"°</span><br/><span>距起点 "+n.name+"米</span><br/>"+n.seriesName+" <span style='color:rgb(255, 70, 131);font-weight:bold;'>"+n.value+"米</span>"}},grid:{left:50,right:25,bottom:60,top:25},xAxis:{type:"category",data:t,axisLabel:{interval:3,rotate:40,textStyle:{color:"rgba(96,98,102,1)"},formatter:"{value} 米"},axisLine:{lineStyle:{type:"solid",color:"rgb(255, 70, 131)",width:"2"},show:!1},axisTick:{show:!1}},yAxis:{type:"value",max:function(e){return e.max},min:function(e){return e.min},axisLabel:{interval:0,rotate:40,textStyle:{color:"rgba(96,98,102,1)"},formatter:"{value} 米"},axisTick:{show:!1},splitLine:{show:!0}},dataZoom:[{type:"inside",start:0,end:100}],series:[{name:"高程值",type:"line",smooth:!0,symbol:"none",sampling:"average",itemStyle:{color:"rgb(255, 70, 131)"},areaStyle:{color:new Vt["a"].LinearGradient(0,0,0,1,[{offset:0,color:"rgb(255, 158, 68)"},{offset:1,color:"rgb(255, 70, 131)"}])},data:n}]})}function v(){a&&(a.destroy(),a=void 0),d._labels&&(d._labels.forEach((function(e){e.destroy()})),d._labels=[]),m&&(m.forEach((function(e){return e()})),m.length=0),r&&(r.dispose(),r=void 0)}Object(o["watch"])((function(){return d.samplinginterval}),(function(){f(a.positions)})),Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g.instance.getEarth();case 2:n=e.sent,b();case 4:case"end":return e.stop()}}),e)})))),Object(o["onBeforeUnmount"])((function(){v()}));var w=Object(o["toRefs"])(d);return Object(p["a"])(Object(p["a"])({},w),{},{init:b,del:v})}});const yt=P()(xt,[["render",gt]]);var Et=yt;Et.install=function(e){e.component(Et.name,Et)};var Nt=Et,_t={class:"epsplanet-panel-base",style:{width:"296px"}},kt={class:"tool-panel-button"},Mt=Object(o["createTextVNode"])("拾取"),Tt=Object(o["createTextVNode"])("平移"),Pt=Object(o["createTextVNode"])("旋转");function St(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-slider"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-form"),u=Object(o["resolveComponent"])("el-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",_t,[Object(o["createVNode"])(s,{ref:"form","label-width":"80px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"水平广角"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.fovH,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.fovH=t}),min:1,max:179,step:1,"show-input":"","show-input-controls":!1},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"垂直广角"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.fovV,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.fovV=t}),min:1,max:179,step:1,"show-input":"","show-input-controls":!1},null,8,["modelValue"])]})),_:1})]})),_:1},512),Object(o["createElementVNode"])("div",kt,[Object(o["createVNode"])(u,{onClick:t[2]||(t[2]=function(t){return e.twoPostionsEditing=!0}),size:"mini"},{default:Object(o["withCtx"])((function(){return[Mt]})),_:1}),Object(o["createVNode"])(u,{onClick:t[3]||(t[3]=function(t){return e.positionEditing=!0}),size:"mini"},{default:Object(o["withCtx"])((function(){return[Tt]})),_:1}),Object(o["createVNode"])(u,{onClick:t[4]||(t[4]=function(t){return e.rotationEditing=!0}),size:"mini"},{default:Object(o["withCtx"])((function(){return[Pt]})),_:1})])])}var zt=Object(o["defineComponent"])({name:"EpsplanetVisual",props:[],setup:function(){var e,t,n=Object(o["getCurrentInstance"])(),a=n.proxy,r=a,i=Object(o["reactive"])({twoPostionsEditing:!1,positionEditing:!1,rotationEditing:!1,fovH:80,fovV:60,_disposer:[]});function c(){e.czm.viewer.scene.globe.depthTestAgainstTerrain=!0;var n=new XE.Obj.Viewshed(e);t=n,console.log(n),i._disposer=[],i._disposer.push(XE.MVVM.bind(r,"twoPostionsEditing",n,"twoPostionsEditing"),XE.MVVM.bind(r,"rotationEditing",n,"rotationEditing"),XE.MVVM.bindDegreeRadian(r,"fovH",n,"fovH"),XE.MVVM.bindDegreeRadian(r,"fovV",n,"fovV"),XE.MVVM.watch((function(){return n.twoPostionsEditing}),(function(){i.twoPostionsEditing=n.twoPostionsEditing,console.log(n)})),XE.MVVM.watch((function(){return n.positionEditing}),(function(){i.positionEditing=n.positionEditing})),XE.MVVM.watch((function(){return n.rotationEditing}),(function(){i.rotationEditing=n.rotationEditing})))}function l(){t&&t.setPositionWithCurrentCamera()}function s(){t&&(t.destroy(),t=void 0),i._disposer&&(i._disposer.forEach((function(e){return e()})),i._disposer.length=0)}Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,c();case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){s()}));var u=Object(o["toRefs"])(i);return Object(p["a"])(Object(p["a"])({},u),{},{init:c,setAsCamera:l,del:s})}});const Rt=P()(zt,[["render",St]]);var Bt=Rt;Bt.install=function(e){e.component(Bt.name,Bt)};var Xt=Bt,Lt={style:{width:"400px",height:"200px"}},Ut=Object(o["createElementVNode"])("span",null,"直线：鼠标左键添加点，右键删除点",-1),At=Object(o["createElementVNode"])("br",null,null,-1),Dt=Object(o["createElementVNode"])("span",null,"圆形：鼠标左键添加圆心，移动并再次点击选择半径",-1),It=Object(o["createTextVNode"])("直线"),Gt=Object(o["createTextVNode"])("圆形"),Ht=Object(o["createTextVNode"])("编辑"),Ft=Object(o["createTextVNode"])("删除全部");function Wt(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-form-item"),l=Object(o["resolveComponent"])("el-radio"),s=Object(o["resolveComponent"])("el-button"),u=Object(o["resolveComponent"])("el-form");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Lt,[Object(o["createVNode"])(u,{"label-width":"20px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,null,{default:Object(o["withCtx"])((function(){return[Ut,At,Dt]})),_:1}),Object(o["createVNode"])(c,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{modelValue:e.drawMode,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.drawMode=t}),label:"line"},{default:Object(o["withCtx"])((function(){return[It]})),_:1},8,["modelValue"]),Object(o["createVNode"])(l,{modelValue:e.drawMode,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.drawMode=t}),label:"circle"},{default:Object(o["withCtx"])((function(){return[Gt]})),_:1},8,["modelValue"])]})),_:1}),Object(o["createVNode"])(c,{class:"tool-panel-button"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{onClick:t[2]||(t[2]=function(t){return e.editing=!e.editing})},{default:Object(o["withCtx"])((function(){return[Ht]})),_:1}),Object(o["createVNode"])(s,{onClick:e.deleteAll},{default:Object(o["withCtx"])((function(){return[Ft]})),_:1},8,["onClick"])]})),_:1})]})),_:1})])}function qt(e,t){for(var n=[],o=0;o<e.length;o++)n.push.apply(n,Object(c["a"])(e[o]));var a=Cesium.Cartesian3.fromRadiansArrayHeights(n),r=new Cesium.Color(t[0],t[1],t[2],t[3]);return new Cesium.Primitive({geometryInstances:new Cesium.GeometryInstance({geometry:new Cesium.PolylineGeometry({positions:a,width:2.5,vertexFormat:Cesium.PolylineMaterialAppearance.VERTEX_FORMAT})}),appearance:new Cesium.PolylineMaterialAppearance({material:new Cesium.Material({fabric:{type:"Color",uniforms:{color:r}}}),renderState:new Cesium.RenderState({polygonOffset:{enabled:!0,factor:-100,units:-100},depthTest:{enabled:!0,func:Cesium.WebGLConstants.LEQUAL}})}),depthFailAppearance:new Cesium.PolylineMaterialAppearance({material:new Cesium.Material({fabric:{type:"PolylineDash",uniforms:{color:r}}})})})}var Kt=Object(o["defineComponent"])({name:"EpsplanetLineOfSight",props:[],setup:function(){var e,t,n=Object(o["getCurrentInstance"])(),a=n.proxy,r=a,i=Object(o["reactive"])({_polylineCzm:void 0,_circleCzm:void 0,_radius:0,_disposer:[0],editing:!1,webMercatorProjection:void 0,drawMode:"line",objectsToExclude:[0],visibleLines:[0]});function c(){if(i._disposer=[],i.objectsToExclude=[],i.visibleLines=[],i.webMercatorProjection=new Cesium.WebMercatorProjection(e.czm.scene.globe.ellipsoid),"line"===i.drawMode){var n=new XE.Obj.Plots.GeoPolyline(e);n.arcType="NONE",n.ground=!1,n.creating=!0,n.color=[1,1,0,.5],i._polylineCzm=n,t=new Cesium.ScreenSpaceEventHandler(e.czm.viewer.canvas);var o=0;t.setInputAction((function(){o++,o>1&&n.positions.length>1&&(n.creating=!1,n.show=!1,f(),s(n.positions[0],n.positions[1]))}),Cesium.ScreenSpaceEventType.LEFT_CLICK),i._disposer.push(XE.MVVM.bind(r,"editing",n,"editing"),XE.MVVM.watch(n,"editing",(function(){!n.editing&&n.positions.length>1?(n.show=!1,f(),s(n.positions[0],n.positions[1])):(i.visibleLines.forEach((function(e){return e.show=!1})),n.show=!0)})))}else if("circle"===i.drawMode){var a=new XE.Obj.Plots.GeoCircle(e);a.ground=!1,a.creating=!0,a.color=[1,1,0,.5],i._circleCzm=a,i._disposer.push(XE.MVVM.bind(r,"editing",a,"editing"),XE.MVVM.watch(a,"creating",(function(){!a.creating&&a.positions.length>1&&(a.show=!1,f(),u(a.positions[0],a.positions[1]))})),XE.MVVM.watch(a,"editing",(function(){!a.editing&&a.positions.length>1?(a.show=!1,f(),u(a.positions[0],a.positions[1])):(i.visibleLines.forEach((function(e){return e.show=!1})),a.show=!0)})))}}function l(t,n,o){var a=[t,n],r=qt(a,o);e.czm.scene.primitives.add(r),i.visibleLines.push(r)}function s(t,n){var o=Cesium.Cartographic.toCartesian(new Cesium.Cartographic(t[0],t[1],t[2])),a=Cesium.Cartographic.toCartesian(new Cesium.Cartographic(n[0],n[1],n[2])),r=Cesium.Cartesian3.normalize(Cesium.Cartesian3.subtract(a,o,new Cesium.Cartesian3),new Cesium.Cartesian3),c=new Cesium.Ray(o,r),s=e.czm.scene.pickFromRay(c,i.objectsToExclude);if(Cesium.defined(s)&&Cesium.defined(s.object)&&Cesium.defined(s.position)){var u=new Cesium.Cartographic.fromCartesian(s.position),d=[u.longitude,u.latitude,u.height];"line"===i.drawMode&&(i._radius=m(t,n)),b(d,t,i._radius)?(l(d,t,[.43,1,.16,1]),l(d,n,[1,0,0,1])):l(t,n,[.43,1,.16,1])}else l(t,n,[.43,1,.16,1])}function u(e,t){var n=d(e);i._radius=m(e,t);for(var o=0;o<360;o+=5){var a=Cesium.Math.toRadians(o),r=new Cesium.Cartesian3(n.x+i._radius*Math.cos(a),n.y+i._radius*Math.sin(a),n.z);r=i.webMercatorProjection.unproject(r);var c=[r.longitude,r.latitude,r.height];s(e,c)}}function d(e){return i.webMercatorProjection.project(new Cesium.Cartographic(e[0],e[1],e[2]))}function m(e,t){var n=d(e),o=d(t),a=Math.sqrt(Math.pow(n.x-o.x,2)+Math.pow(n.y-o.y,2));return a||a+1}function b(e,t,n){return m(e,t)<n}function f(){i.visibleLines.length&&(i.visibleLines.forEach((function(e){return e.destroy()})),i.visibleLines.length=0)}function j(){f(),i._disposer.forEach((function(e){return e()})),i._disposer.length=0,i._polylineCzm&&(i._polylineCzm=i._polylineCzm&&i._polylineCzm.destroy()),i._circleCzm&&(i._circleCzm=i._circleCzm&&i._circleCzm.destroy()),t&&(t=t&&t.destroy())}Object(o["watch"])((function(){return i.drawMode}),(function(){j(),c()})),Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,e.czm.scene.globe.depthTestAgainstTerrain=!0,c();case 5:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){e.czm.scene.globe.depthTestAgainstTerrain=!1,j()}));var O=Object(o["toRefs"])(i);return Object(p["a"])(Object(p["a"])({},O),{},{deleteAll:j})}});const Yt=P()(Kt,[["render",Wt]]);var Jt=Yt;Jt.install=function(e){e.component(Jt.name,Jt)};var Qt=Jt,Zt={class:"epsplanet-panel-base controlHeightAnalysis",style:{width:"296px"}},$t=Object(o["createTextVNode"])("整体控高"),en=Object(o["createTextVNode"])("自定义控高"),tn=Object(o["createTextVNode"])("创建"),nn=Object(o["createTextVNode"])("编辑");function on(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-radio"),l=Object(o["resolveComponent"])("el-radio-group"),s=Object(o["resolveComponent"])("el-form-item"),u=Object(o["resolveComponent"])("el-option"),d=Object(o["resolveComponent"])("el-select"),p=Object(o["resolveComponent"])("el-slider"),m=Object(o["resolveComponent"])("el-button"),b=Object(o["resolveComponent"])("el-form");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Zt,[Object(o["createVNode"])(b,{ref:"form","label-width":"50px","label-position":"left"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{label:"模式"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{onChange:e.selectMode,modelValue:e.radio,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.radio=t})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{label:"all"},{default:Object(o["withCtx"])((function(){return[$t]})),_:1}),Object(o["createVNode"])(c,{label:"custom"},{default:Object(o["withCtx"])((function(){return[en]})),_:1})]})),_:1},8,["onChange","modelValue"])]})),_:1}),Object(o["createVNode"])(s,{label:"模型"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{size:"small",modelValue:e.selectTileset,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selectTileset=t}),placeholder:"请选择模型",onChange:e.changeTileset,onVisibleChange:e.xiala,"value-key":"index"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.tilesetList,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:e.index,label:e.name,value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange","onVisibleChange"])]})),_:1}),Object(o["createVNode"])(s,{label:"高度"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{modelValue:e.LimitedHeight,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.LimitedHeight=t}),min:e.sliderMin,max:e.sliderMax,step:.1,"show-input":"","show-input-controls":!1},null,8,["modelValue","min","max","step"])]})),_:1}),Object(o["createVNode"])(s,{label:"操作"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{onClick:t[3]||(t[3]=function(t){return e.creating=!e.creating}),disabled:e.disabled},{default:Object(o["withCtx"])((function(){return[tn]})),_:1},8,["disabled"]),Object(o["createVNode"])(m,{onClick:t[4]||(t[4]=function(t){return e.editing=!e.editing}),disabled:e.disabled},{default:Object(o["withCtx"])((function(){return[nn]})),_:1},8,["disabled"])]})),_:1})]})),_:1},512)])}var an=Object(o["defineComponent"])({name:"EpsplanetControlHeight",props:[],setup:function(){var e,t,n,a,r,i,c,l=Object(o["getCurrentInstance"])(),s=l.proxy,u=s,d=Object(o["reactive"])({radio:"all",tilesetList:[],selectTileset:void 0,_controlHeightCzmObj:n,_controlHeightRef:void 0,creating:!1,editing:!1,LimitedHeight:0,relativeLimitHeight:0,minHeight:0,maxHeight:0,disposer:[],position:[],secondRef:i,secondName:c,disabled:!0,classificationpolygon:a,sliderMin:0,sliderMax:500,polygonHeight:r,spanTips:t});function m(){b("all")}function b(t){if("all"==t){d.classificationpolygon&&V(),d.disabled=!0,e.sceneTree.root.children.push({ref:"controlheight",czmObject:{name:"控高面",xbsjType:"ClippingPlane",showHelper:!0,rotation:[0,1.57079637,0]}});var n=e.sceneTree.$refs.controlheight;d._controlHeightCzmObj=n.czmObject,d._controlHeightRef=n.ref,d._controlHeightCzmObj.show=!1,d.disposer=[],d.disposer.push(XE.MVVM.bind(u,"position",d._controlHeightCzmObj,"position"))}else d.disabled=!1,d._controlHeightCzmObj&&V(),d.classificationpolygon=new XE.Obj.ClassificationPolygon(e),d.disposer.push(XE.MVVM.bind(u,"creating",d.classificationpolygon,"creating"),XE.MVVM.bind(u,"editing",d.classificationpolygon,"editing"),XE.MVVM.bind(u,"relativeLimitHeight",d.classificationpolygon,"extrudedHeight"),XE.MVVM.watch((function(){d.creating=d.classificationpolygon.creating,d.editing=d.classificationpolygon.editing})))}function f(t){t&&(w(),d.tilesetList=[],e.tilesetCollection.forEach((function(e,t){d.tilesetList.push({name:e.name,index:t})})))}function j(t){var n=e.tilesetCollection[t.index];e.sceneTree.root.children.forEach((function(e){e.czmObject.guid==n.guid&&e.czmObject.flyTo()})),"all"==d.radio&&e.sceneTree.root.children.forEach((function(t){if(t.czmObject.guid==n.guid){d._controlHeightCzmObj.position=JSON.parse(JSON.stringify(t.czmObject.xbsjPosition)),d.position=d._controlHeightCzmObj.position,d.LimitedHeight=Number(d.position[2].toFixed(1)),d.sliderMin=Number(d.LimitedHeight.toFixed(0))-30<0?0:Number(d.LimitedHeight.toFixed(0))-30,d.sliderMax=Number(d.LimitedHeight.toFixed(0))+300,d.secondRef=t.ref+"ReplicationService",d.secondName=t.czmObject.name+"ReplicationService";var o={ref:d.secondRef,czmObject:JSON.parse(JSON.stringify(t.czmObject))};o.czmObject.xbsjStyle=JSON.stringify({color:{conditions:[["true","rgba(255, 0, 0,0.5)"]]}}),o.czmObject.name=d.secondName,o.czmObject.xbsjGuid="",o.czmObject.xbsjClippingPlanes={planes:[d._controlHeightCzmObj.xbsjGuid]},e.sceneTree.root.children.push(o);var a=e.czm.viewer.scene.globe.ellipsoid,r=t.czmObject._tileset.boundingSphere.center,i=a.cartesianToCartographic(r),c=Cesium.Math.toDegrees(i.latitude),l=Cesium.Math.toDegrees(i.longitude),s=turf.point([l,c]),p=t.czmObject._tileset.boundingSphere.radius/1e3,m=turf.destination(s,p,0),b=turf.destination(s,p,90),f=turf.destination(s,p,180),h=turf.destination(s,p,270),j=[];j.push(Cesium.Math.toRadians(h.geometry.coordinates[0]),Cesium.Math.toRadians(m.geometry.coordinates[1]),Cesium.Math.toRadians(b.geometry.coordinates[0]),Cesium.Math.toRadians(m.geometry.coordinates[1]),Cesium.Math.toRadians(b.geometry.coordinates[0]),Cesium.Math.toRadians(f.geometry.coordinates[1]),Cesium.Math.toRadians(h.geometry.coordinates[0]),Cesium.Math.toRadians(f.geometry.coordinates[1])),e.sceneTree.root.children.push({ref:"PolygonHeight",czmObject:{xbsjType:"Polygon",positions:j,height:d.LimitedHeight,color:[1,1,0,.2],outline:{color:[1,0,0,.5]}}}),d.polygonHeight=e.sceneTree.$refs.PolygonHeight;var O=d.polygonHeight.czmObject;d.disposer.push(XE.MVVM.bind(u,"LimitedHeight",O,"height"))}}))}function O(t){for(var n=[],o=0;o<t.length;o+=2)n.push([t[o],t[o+1]]);st.getExtremum(e,n,5).then((function(n){d.minHeight=Number(n[0].toFixed(1)),d.maxHeight=Number(n[1].toFixed(1)),d.relativeLimitHeight=d.minHeight,d.sliderMin=0,d.sliderMax=Number((d.maxHeight-d.minHeight).toFixed(0))+30,d.classificationpolygon.height=d.maxHeight+30,d.classificationpolygon.show=!0,d.classificationpolygon.color=[1,0,0,.5],e.sceneTree.root.children.push({ref:"PolygonHeight",czmObject:{xbsjType:"Polygon",positions:t,color:[1,1,0,.2],outline:{color:[1,0,0,.5]}}}),d.polygonHeight=e.sceneTree.$refs.PolygonHeight;var o=d.polygonHeight.czmObject;d.disposer.push(XE.MVVM.bind(u,"relativeLimitHeight",o,"height"))}))}function v(e){document.addEventListener("mousemove",(function(t){switch(d.spanTips.style.left=t.clientX+8+"px",d.spanTips.style.top=t.clientY+2+"px",e){case 1:d.spanTips.innerHTML="shift + 鼠标右键结束绘制",d.spanTips.style.display="block";break;default:d.spanTips.innerHTML="",d.spanTips.style.display="none";break}}))}function w(){C(),d.selectTileset=void 0,d._controlHeightCzmObj&&e.sceneTree.$refs.controlheight&&(e.sceneTree.$refs.controlheight.czmObject.positions=[]),d.classificationpolygon&&(d.classificationpolygon.show=!1),d.maxHeight=0,d.minHeight=0}function C(){e.sceneTree.root.children.forEach((function(t,n){void 0!=d.secondRef&&t.ref==d.secondRef&&(e.sceneTree.root.children.splice(n,1),d.secondRef=void 0)})),e.sceneTree.root.children.forEach((function(t,n){void 0!=d.polygonHeight&&t.ref==d.polygonHeight.ref&&(e.sceneTree.root.children.splice(n,1),d.polygonHeight=void 0)}))}function V(){d.sliderMin=0,d.sliderMax=500,d.LimitedHeight=0,C(),d._controlHeightCzmObj&&(e.sceneTree.root.children.forEach((function(t,n){void 0!=d._controlHeightRef&&t.ref==d._controlHeightRef&&(e.sceneTree.root.children.splice(n,1),d._controlHeightRef=void 0)})),d._controlHeightCzmObj=void 0),d.classificationpolygon&&d.classificationpolygon.destroy(),d.disposer&&(d.disposer.forEach((function(e){return e()})),d.disposer.length=0)}Object(o["watch"])((function(){return d.LimitedHeight}),(function(e){d.position[2]=e,d.relativeLimitHeight=d.minHeight+e})),Object(o["watch"])((function(){return d.creating}),(function(e){e?(v(1),C()):(v(2),d.classificationpolygon.positions.length>5&&O(d.classificationpolygon.positions))})),Object(o["watch"])((function(){return d.editing}),(function(e){!e&&d.classificationpolygon.positions.length>5&&(d.polygonHeight.czmObject.positions=d.classificationpolygon.positions)})),Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,d._controlHeightCzmObj?e.sceneTree.$refs.controlheight.czmObject.show=!1:(d.spanTips=document.createElement("span"),d.spanTips.style.position="absolute",d.spanTips.style.color="#fff",d.spanTips.style.backgroundColor="#333",document.body.appendChild(d.spanTips),m());case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){document.body.removeChild(d.spanTips),V()}));var x=Object(o["toRefs"])(d);return Object(p["a"])(Object(p["a"])({},x),{},{init:m,selectMode:b,changeTileset:j,xiala:f,del:V})}});const rn=P()(an,[["render",on]]);var cn=rn;cn.install=function(e){e.component(cn.name,cn)};var ln=cn,sn=Object(o["defineComponent"])({name:"EpsplanetUnderground",props:[],setup:function(){var e;Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,e.terrainEffect.subSurfaceEnabled=!0;case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){e.terrainEffect.subSurfaceEnabled=!0}))}});const un=sn;var dn=un;dn.install=function(e){e.component(dn.name,dn)};var pn=dn,mn={class:"tool-panel-base",style:{width:"350px"}};function bn(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-slider"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-form");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",mn,[Object(o["createVNode"])(s,{ref:"form","label-width":"100px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"地表透明度"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.surfaceOpacity,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.surfaceOpacity=t}),min:0,max:1,step:.01,"show-input":"","show-input-controls":!1},null,8,["modelValue","step"])]})),_:1})]})),_:1},512)])}var fn=Object(o["defineComponent"])({name:"EpsplanetSurfaceOpacity",props:[],setup:function(){var e,t=Object(o["getCurrentInstance"])(),n=t.proxy,a=n,r=Object(o["reactive"])({_disposer:[],surfaceOpacity:0});function i(){r._disposer.push(XE.MVVM.bind(a,"surfaceOpacity",e.terrainEffect,"surfaceOpacity"))}function c(){r._disposer.forEach((function(e){return e()})),r._disposer.length=0}return Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,i();case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){c()})),Object(p["a"])(Object(p["a"])({},Object(o["toRefs"])(r)),{},{init:i,del:c})}});const hn=P()(fn,[["render",bn]]);var jn=hn;jn.install=function(e){e.component(jn.name,jn)};var On=jn,gn={class:"epsplanet-panel-base sliced",style:{width:"310px"}},vn=Object(o["createElementVNode"])("span",{class:"demonstration"},"姿态",-1),wn={class:"slider-demo-block"},Cn={class:"slider-demo-block"},Vn={class:"slider-demo-block"},xn={class:"tool-panel-button"},yn=Object(o["createTextVNode"])("平移"),En=Object(o["createTextVNode"])("旋转");function Nn(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-option"),l=Object(o["resolveComponent"])("el-select"),s=Object(o["resolveComponent"])("el-form-item"),u=Object(o["resolveComponent"])("el-switch"),d=Object(o["resolveComponent"])("el-slider"),p=Object(o["resolveComponent"])("el-collapse-item"),m=Object(o["resolveComponent"])("el-collapse"),b=Object(o["resolveComponent"])("el-form"),f=Object(o["resolveComponent"])("el-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",gn,[Object(o["createVNode"])(b,{ref:"form","label-width":"78px",inline:!0},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{label:"图层"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{modelValue:e.selectScene,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.selectScene=t}),placeholder:"请选择场景数据",class:"selectcla",onChange:e.changeTileset,onVisibleChange:e.readScenetree},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.tilesetOptions,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange","onVisibleChange"])]})),_:1}),Object(o["createVNode"])(s,{label:"辅助面"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:e.ifShow,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.ifShow=t}),"active-color":"#13ce66","inactive-color":"#dcdfe6"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(s,{label:"剖切方式"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{class:"switch",modelValue:e.section,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.section=t}),"inline-prompt":"","active-color":"#13ce66","inactive-color":"#dcdfe6","active-text":"纵","inactive-text":"横",onChange:e.SectionMethod},null,8,["modelValue","onChange"])]})),_:1}),Object(o["createVNode"])(s,{label:""},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{title:"高级属性"},{default:Object(o["withCtx"])((function(){return[vn,Object(o["createElementVNode"])("div",wn,[Object(o["createVNode"])(d,{modelValue:e.rotation[0],"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.rotation[0]=t}),min:-180,max:180,step:1,style:{width:"185px"},"show-input":"","show-input-controls":!1},null,8,["modelValue"])]),Object(o["createElementVNode"])("div",Cn,[Object(o["createVNode"])(d,{modelValue:e.rotation[1],"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.rotation[1]=t}),min:-180,max:180,step:1,style:{width:"185px"},"show-input":"","show-input-controls":!1},null,8,["modelValue"])]),Object(o["createElementVNode"])("div",Vn,[Object(o["createVNode"])(d,{modelValue:e.rotation[2],"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.rotation[2]=t}),min:-180,max:180,step:1,style:{width:"185px"},"show-input":"","show-input-controls":!1},null,8,["modelValue"])])]})),_:1})]})),_:1})]})),_:1})]})),_:1},512),Object(o["createElementVNode"])("div",xn,[Object(o["createVNode"])(f,{size:"small",onClick:t[6]||(t[6]=function(t){return e.positionEditing=!e.positionEditing})},{default:Object(o["withCtx"])((function(){return[yn]})),_:1}),Object(o["createVNode"])(f,{size:"small",onClick:t[7]||(t[7]=function(t){return e.rotationEditing=!e.rotationEditing})},{default:Object(o["withCtx"])((function(){return[En]})),_:1})])])}var _n=Object(o["defineComponent"])({name:"EpsplanetSliced",props:[],setup:function(){var e,t,n,a=Object(o["getCurrentInstance"])(),r=a.proxy,i=r,c=Object(o["reactive"])({name:"剖切面对象",section:!0,rotation:[0,0,0],ifShow:!0,linked:!0,positionEditing:!1,rotationEditing:!1,tilesetOptions:[{}],selectScene:void 0}),l=[];Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,g.instance.getEarth();case 2:e=n.sent,t||s.addtestdata();case 4:case"end":return n.stop()}}),n)})))),Object(o["onBeforeUnmount"])((function(){s.del()}));var s={init:function(){t=new XE.Obj.ClippingPlane(e),console.log(t),t.name=i.name,t.position=[1.9016974701882112,.5972325152147303,425.8641913624607],window["clippingPlane"]=t,l=[],l.push(XE.MVVM.bind(i,"positionEditing",t,"positionEditing"),XE.MVVM.bind(i,"rotationEditing",t,"rotationEditing"),XE.MVVM.bind(i,"ifShow",t,"show"),XE.MVVM.bindRotation(i,"rotation",t,"rotation"))},addtestdata:function(){Math.PI,Math.PI},changeTileset:function(n){t||s.init(),e.sceneTree.root.children.forEach((function(e){e.czmObject.xbsjGuid==n&&(e.czmObject.flyTo(),e.czmObject.show=!0,e.czmObject.xbsjClippingPlanes={planes:[t.xbsjGuid]})}))},readScenetree:function(t){t&&(c.tilesetOptions=[],e.sceneTree.root.children.forEach((function(e){if("Tileset"==e.czmObject.xbsjType){var t={value:e.czmObject.xbsjGuid,label:e.czmObject.name};c.tilesetOptions.push(t)}})))},SectionMethod:function(){i.section?i.rotation[1]=0:i.rotation[1]=90},del:function(){t&&(t.destroy(),t=void 0),n&&e.sceneTree.root.children.forEach((function(t){t.czmObject.xbsjGuid==n.xbsjGuid&&e.sceneTree.root.children.remove(t)})),l&&(l.forEach((function(e){return e()})),l.length=0)}},u=Object(o["toRefs"])(c);return Object(p["a"])(Object(p["a"])({},u),s)}});const kn=P()(_n,[["render",Nn]]);var Mn=kn;Mn.install=function(e){e.component(Mn.name,Mn)};var Tn=Mn,Pn={class:"epsplanet-panel-base terrainShading"},Sn={class:"grid-content"},zn={class:"child-tool-item-inner-title"},Rn=Object(o["createElementVNode"])("div",{class:"demonstration"},[Object(o["createElementVNode"])("span",null,"高度范围")],-1),Bn=Object(o["createElementVNode"])("div",{class:"demonstration2"},[Object(o["createElementVNode"])("span",null,"       色带")],-1),Xn=Object(o["createElementVNode"])("div",{class:"demonstration"},[Object(o["createElementVNode"])("span",null,"       线宽")],-1),Ln=Object(o["createElementVNode"])("div",{class:"demonstration"},[Object(o["createElementVNode"])("span",null,"       间距")],-1),Un=Object(o["createElementVNode"])("div",{class:"demonstration"},[Object(o["createElementVNode"])("span",null,"       颜色")],-1);function An(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-button"),l=Object(o["resolveComponent"])("el-col"),s=Object(o["resolveComponent"])("el-row"),u=Object(o["resolveComponent"])("el-slider"),d=Object(o["resolveComponent"])("XbsjRampSelect"),p=Object(o["resolveComponent"])("el-color-picker");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Pn,[Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.terrainData,(function(t,n){return Object(o["openBlock"])(),Object(o["createBlock"])(l,{span:6,key:n},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",Sn,[Object(o["createVNode"])(c,{type:"primary",plain:"",class:"thisbtn",onClick:function(n){return e.terrainChange(t.id)}},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("span",{class:Object(o["normalizeClass"])(["iconfont",t.icon])},null,2)]),Object(o["createElementVNode"])("div",zn,Object(o["toDisplayString"])(t.title),1)]})),_:2},1032,["onClick"])])]})),_:2},1024)})),128))]})),_:1}),"elevation"==e.terrainType?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{span:6},{default:Object(o["withCtx"])((function(){return[Rn]})),_:1}),Object(o["createVNode"])(l,{span:18},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:e.heightRange,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.heightRange=t}),range:"",step:10,min:0,max:1e4,onChange:e.changeHeight},null,8,["modelValue","onChange"])]})),_:1})]})),_:1})):Object(o["createCommentVNode"])("",!0),"slope"==e.terrainType||"elevation"==e.terrainType||"aspect"==e.terrainType?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:1},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{span:6},{default:Object(o["withCtx"])((function(){return[Bn]})),_:1}),Object(o["createVNode"])(l,{span:18},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{class:"ramptwo",ref:"ramp",onSelected:e.selected},null,8,["onSelected"])]})),_:1})]})),_:1})):Object(o["createCommentVNode"])("",!0),"contour"==e.terrainType?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:2},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{span:6},{default:Object(o["withCtx"])((function(){return[Xn]})),_:1}),Object(o["createVNode"])(l,{span:18},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:e.contour.lineWidth,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.contour.lineWidth=t}),min:1,max:10,step:.1,"show-input":"","show-input-controls":!1,onChange:t[2]||(t[2]=function(t){return e.changeContourpar("lineWidth")})},null,8,["modelValue","step"])]})),_:1}),Object(o["createVNode"])(l,{span:6},{default:Object(o["withCtx"])((function(){return[Ln]})),_:1}),Object(o["createVNode"])(l,{span:18},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:e.contour.spacing,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.contour.spacing=t}),min:1,max:300,step:1,"show-input":"","show-input-controls":!1,onChange:t[4]||(t[4]=function(t){return e.changeContourpar("spacing")})},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{span:6},{default:Object(o["withCtx"])((function(){return[Un]})),_:1}),Object(o["createVNode"])(l,{span:18},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{modelValue:e.contour.uicolor,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.contour.uicolor=t}),"show-alpha":"",onActiveChange:e.changeColor},null,8,["modelValue","onActiveChange"])]})),_:1})]})),_:1})):Object(o["createCommentVNode"])("",!0)])}var Dn={class:"container"},In=["src"],Gn=["src"],Hn={class:"list"},Fn=["onClick"],Wn=["src"];function qn(e,t,n,a,r,i){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Dn,[Object(o["createElementVNode"])("img",{src:r.srcimg,ref:"srcimg",class:"srcimg",onLoad:t[0]||(t[0]=function(){return i.updateItems&&i.updateItems.apply(i,arguments)})},null,40,In),Object(o["createElementVNode"])("div",{class:"current",onClick:t[1]||(t[1]=function(e){return r.showlist=!r.showlist})},[r.selected?(Object(o["openBlock"])(),Object(o["createElementBlock"])("img",{key:0,class:"thisimg",src:r.selected.img},null,8,Gn)):Object(o["createCommentVNode"])("",!0)]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",Hn,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(r.items,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"row",onClick:function(t){return i.select(e)},key:t},[Object(o["createElementVNode"])("img",{src:e.img},null,8,Wn)],8,Fn)})),128))],512),[[o["vShow"],r.showlist]])])}var Kn={model:{prop:"image",event:"imageChanged"},props:{image:{type:String,default:function(){return""}}},data:function(){return{selected:null,showlist:!1,items:[],srcimg:n("2eee")}},methods:{updateItems:function(){var e=this.$refs.srcimg,t=0;while(t+10<e.height){var n=document.createElement("canvas");n.width=e.width,n.height=10;var o=n.getContext("2d");o.drawImage(e,0,t,e.width,10,0,0,e.width,10),this.items.push({img:n.toDataURL("image/jpg")}),t+=16}this.selected=this.items[0]},select:function(e){this.selected=e,this.showlist=!1,this.$emit("selected",e),this.$emit("imageChanged",e.image)}}};n("3b50");const Yn=P()(Kn,[["render",qn],["__scopeId","data-v-483e80e9"]]);var Jn=Yn,Qn=Object(o["defineComponent"])({name:"EpsplanetTerrainShading",props:[],components:{XbsjRampSelect:Jn},setup:function(){var e,t,n=Object(o["ref"])(),a=Object(o["getCurrentInstance"])(),r=a.proxy,i=r,c=[],l=Object(o["reactive"])({terrainData:[{title:"按高程",icon:"icon-gaocheng",id:"elevation"},{title:"按坡度",icon:"icon-podu_1",id:"slope"},{title:"按坡向",icon:"icon-poxiang",id:"aspect"},{title:"按等高线",icon:"icon-a-3k-5",id:"contour"}],heightRange:[0,5e3],terrainType:"",contour:{lineWidth:1,spacing:100,uicolor:"rgba(249, 42, 0, 0.8)"},image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARoAAAAKCAYAAABrEpGVAAAAAXNSR0IArs4c6QAAFd5JREFUaEN9msuLdd1W3n9jzrXWvlTVe/u+nHM8ohINdlQwHclfENJJOhEJ3lDE/8OWYgQRbaSTKHgUlbRCSCOEkEaUEAyJGi9pBBHBht/tfWvXvqzbnEOeMVe97yfKKVjsql1rr733mHP+5vM8Y9l//fe/4oUMS8/dDV5cR47zI+Yn1nRl9/YjfD7j9UTpLix2w5eJ/a1wXGB3W3EvzNcTxz5RL1eGucJlIRdjuDzBCtxWGBfm85lC5fDRHoYMu9Iee4e0UvNM7YEOSoLuACkDem4wypDxwbC+gy5h/UrqDHQM4F2l9k7uE/paxh2YQ67QFcgLNS2QC/pJunjeXt/piRqHx+/GuquQEynRrhGPkDowvY4dmJ73+MzeOdZbnKPnPKd4jfUlvlc1WFBJDKfDvLLiLGbcHG4GN3SOUXHOZWY1mIHZYDIYacdS4Sm18i4OF9pxtcQTlUllx3jnzpN1PJE4zzN9gVcd3HdJJeNgxguHFxXua+Xozs5AX2NnKb5K/J6Mo0dF2buGzBiSyt6uc+ewr4VDNfZm8RqzHX2euGdlqIkx9fxh+Qn+7adf4X+nH+RPdt8b9ahR1xXsAsXp5nvy0vHycStvBQrUqn8XqjurOd01U+NJ8GJRYKtGWSteoL/mGEvVaDZn9ZVa2oWSZsf10Ao5QTdV+jnFoSmiqWBrpa4eBTZNmzWTF2sX1HuOel9wnaMBWsFnqAtU/e7ONFeWmpknuL6dyGPhIQ3cdx3fci0MKXFMxr05d9VbDd3JOD0VS5muywzJOLjqbNypxq6BgMHboaV0LIVD8RjTPiVeasrH8tG1NEVVaPBYhXrui222XXFOmJ3AnnCuqhhrfUs2xzTHbcFsxO2G+Q3XLPYZV/HqDUtXzJ7aGHLD64SpQID99//wDZ8XZ5mc4bFwfDpzEGh4wtON/foK5it5OWN2o3IjzSPHa+FOoLmueF1YpguHjgBNP4OfZ8wT09uJrjpcbzDduF1PaD7cfQQ2EIuv32m2a5GC7yDtWwFVk2qGddYWvh6zXlOhz6Sk2S8QqJKCjsdCF2xsSA0E3YppwuscrQY9BkT07WEWJ3J7b/3P9Z7b7/r/LnV4svZeqTSg5PaZdH7pcvzfs+P6n0bz/Xs4Q1BJzy2UzinJWbRIXAsmc/OidRUgCch4g8nsBGAEuOKGhnNOMJoxtqHdQNOxookcQ8vFEmeDc5zTpsupwin1nAWaqY3H6yFznxP31YTKvwWae2qUSqA4pkzCxdr4aoLNgMdr9HUfNMktN2BROWqS65qpgWY3Qu7nWAip9jx2O/6w/hS/9u47+KPhX/FX6eMGDxbcnkjp0hb4fIetdwyX+1Z2PVc8oLLWGotERzd28VzAQJApKRZ+g5Iz1xJw14IPIAUwCppCuubHl12jtEAzV/op0S22gcaYS0dZPa7vARcNuq7V3iddvwSaRZBpO8l70Mwr4+qU0jNPzvg4B2he9nuOKfEwLQGa+5Q5UrjzBpqdvps7X68ZExK7RJ8s4BPLwxO9Ox+5xXTeBeSJaxwx9tsR07TtgbF5aBy1HqJmOKl+GsUy/n7QFH+HPkFspjrPFtz1RTUDK8Yj1Uc0K7XNafxIF9yvcV56Bs1/+dVf9EpPqgN3EzzcJu5mEe0daxrp5kwaR/JyhTSx6oXLxGFcOCzwcCmUMrPMV3apUq9X+sWo55FEz/RO4sGx6wzjldv5bYDm/iMjDzAOzrBPpF2mDIU6OBZ/Wyx6LeSUjdRpphZqtzZF0bdFWPdggoAUkWZ259Thg+Iog8d5AZpnCITaUPGca4BmA4deK2BswNH7HNlvoGmKxlXwXNtrcg546FqCjEsl9amBLq5hqmyAxnuptbYLx3ytUD1x6moMs6AQCsSNydrver6vfSie2DeSMwdotC7aIjqnoSmi6vHamxlPZlzNA0g3r5yqcco9J89c5oneK692HXdmvF4FiMQLEg9VO6oman2vaO63UnVSlwKOSp28wQfjpZgfyqfttvuihdBAJADda35qVWt/LAOfpSP/x36a3zh/J396+FEezwuaEFZWst3ImvDueDmwlgNleU0qWhAic1MuAZv3oGkLXgzRo0Ajskhh6Lw5j/GYVkk/J9+gX5x9yXQlsQuJKdI7afJQM+9BU4z+OsS1V8GjOmtN1GIUwUbDfXkGTQOMazcI0GxwmtZQNGvpWRdjPi30Y+VVt+euM+7HNZTH0XQUjtU5eI0aqt7fXqVBLFSNpaZydAzuJDO+tkqVpADLAQ+1eQwYSWVauAFtCAJ9iP4QNEKMQF2x9TPJtgYaf1Y0l7ZF+YKnp3i9XAsWspHq86a3HeOT0OchQLhgdsG05bmusVBtUzS/++9+xj319Ow5zsaL28J+fMta3jJzZrfsSONMWm9UK0xpZC0T3bywWwWahbpOrOsYE3A9X9hXYz2N7FNPfRzp1gyXGvS/nsbg4P2rl7Eo58MTw77Hh0TpVorsjSAzNIXgh5WUKllWpS+kvGCyJ8+qRHgPtaKVoGpuqmKDivc9JoQL5WFjjKrVouf0I0DJGnV6vgYMdIQaSo7tynvQuK142LAGrhhEBJrt0NbxZUUjZaLPFSAr8ZkFsWKyRQn3vFkfDYnsUIOIHqVwYjGtxmr6uzLpMTVFE8K1FM5ZoKksxRjdAzTXlLhq6CXbbVM0uefRE09SNOa8GXLI65cCjRn3ZB68cF+dnSa6yqkNgRIlHQQTyXOVW6CxBhpN7GfQ7GKRNMjo0OulBI0S0Bzp+ISBP/Cf5Lcu/5A/O/4I18tXwjF1i3g0x2QVzEs5sNRdwFWgic1KVmRTNZpDAlI3pwDAB0WTt3Oaqulcc7NiUgZSG5fKMCeOvov39VTwtYSkTFI1+hxLJi2G18pu7OPaAkts5CWFWmlWDbqzoLhZp0UwS/jkm6IRvAqjQLN2rBOsTyvD7LzOUjTGVxepXuMo9ShVGPX7AJoXIb5T2CZN367WgIxq35msrGSClKa+k2Aj6ytFqW1eY+ahaAZvKnVQPQVyFoqg5fKmAseIu1yLrJMgIU84RVFMUs5mqt/CFzbQaHZqHkjRaLZq1so66VF6esZ9pMiDyjz8j9/5OV9kkEtmd63cXSf28yPwGBmNJGy+LezGJb5kFdGWkX6e2K8a6IVl0YeRX1qYL2eOnllONw7dnvLuk/C16aIQwRgFmuI8vHlJ6jK3w2OAhl2mRo5RQ9HYvqmEdZhCkeROGctKyoWkc55BEzN6m+1hQjeduNkk73cNNGFvZKcSNWxQA43sm4nyoYYMwSRUTWeYOb5bvzloRPm4/ga5sHgb/BLc+ma79JlTLxUkyKUATSVzrh+sk6AgqyPYaOhkma5xXgx7QEbnSO2MMhvVuaSORfarJiapGjMuG2h0DWU/J+U01vFFdZ6mkV6AGbQLwp2lgMK9WSiaoysfqBGbZdM5a7hTKZM7ZQDaObf8RnXNqUTpYhKH4zV2XkLhaKctAaQa2YB74jOMP64/zjeevoX/d/ghPp2/L2xKPzXhkzX9XVawb0oij6Rq5NUU4QVEtMhVm7BOs33JOuXIZ1yec1M+fcksc2hDFM2Ua6Fbu/jOGrp7TVtJzKlqLdEtKQDU3guehtJymhny7GStvTVhyiGVf1wtPpMrt4nwrfsSaAr9mriOK+ucKTPMj9qgnVfsuEuZr9dWt0gPTJaoQWYwj7pma4DYk1s+U3Vug5PqKyvTaZxiHGtTlQKL/h9CX4rHYz/dhyUuZBNipEz0+zkKoSzFeQpIfACNMhmpFomDE54ecX/CBROpHQ+PGwUM+2QjyZQwXoMHAlDJG2j+42/+ay/0mPccJuNhmtkvsk4tDL6UPYdz4cXZeZgSw7zSTyOHm86T7J+Zl1vIL2F8enriaB3j6crDcMf58a9jN0rXGbvdGE9fxAjev+nIvTPuCv3OyPuOVfbi71inPkCTFPx2gkDFcwuAI7/YSX0IGAr9BKMP1kmvWbv6t6yTFrtC5FBBWoh7KZMWGEZGs6kaQU7X7ZVIREbz91untZfikW2SAtsUUlxrU0TesiR99sh1QroqCE54zVxcQ96Uh8ymrM5EaorGXMMei3WSug/QNJv1DJpTShGMylVMYbsSN5OiaXZLSuhM5m3q+LwW3o1j7I4v+6ylx13WopOiabI7MgIaPJ7dpoD0oAC5CEYKehuXBRpLa1wvVE1M8NoewzYaWTtwgoea2S89567n/9Yf5tdOb/ij/b/kL8o/Bi3uLZ/PUjXKVUrG68Bqc8wfNRY+hLCqXbOWaW4WKVSFmK9N89k6Sf14xyyQ6GkP9x57gr7DOjd4NtBEJkqWstEGrkO511AiDEuTDqMTEOdEnmU7FAZvoIkweFM0CoP1uWRrvON6U4aZWEannNb3oDla5rVXuvQcyrdsRkDYbZnYgRJh+wtP3Av03qyuxkzp2Z4l6qy/NU4CSdjW+MpGVvTgGhMBrLCT/XI1cKRIBJgNNKFoBBptdbcIfCPV9g6zM57eUu2ziFTctP0pCKu4ay4vuMJg08xVIa+4AFRnqhJ0zfj/9I1fcE/6mAOHOXF3GxmmR+byOTMX1mHg8OS8eEo8hH+t5HFmP43s1w0u043UFcoyMp6fOKYd4+OFh8MD0+Nb+rVgl1uAZjrJ0zn3b2SFoAyQVZn9Zit6sE17a+GaPNNz2yO6OgprWzics1G14zx3nSKnaYGwZr5g5ElhsBRFszWR9TzbG218ej+BKq5pFBPIPiiSrvvmYfAk0MkKBWhqdJwi1JZdSgr0NFCCWcuW9N3dJMsl/TOnTru+BUgEm+cwWH8LMNfYLRpc5iTAfMhoVi+cTHqhUqpF1BCwUo7jggyMXrikzLvU8UkpnKZF4pGHIdEpq7G8KRsLyKjrMWgX3VisnpMmsLoXL6px1A4s8Ou7KJepSygkgSVCYtduuwlEqbHSdtnXC7xYHhj7O/4g/Qj/5t0rfr//F3wyfDd13TUVIlFYJ7qykJYOW3pGSf3q9EsKAKRFmYzqp2neNlRZJ1/1hDoFWxC8gUfnTQKFNhfV4zqTa2KXO8qkRdqskU1SLR42P60WENG1dsuztZKasU31bBt5qfjcUVedo6ZMwnV8CTTZei5XZZiJcmugUbYpRXOwxEtZn61+O9aWb5k30JgAX9hH1mXcyxrJ2gog1jqhD0XfIUeXL1Sl1GSI6q3LNHTkLWBuSmlF7QO5Dyma0NDKaKRoXPnKl0Gj82TSLlT7gpo+AzWJYitUy6sNQN3C4VA6+p9N0XESgBqQwP7nb/y8F/25dAyjcxxH9stjSKWSb6w+MZyd4zXRlYFVsraMUEb6snI/LkzTLaxNWW4NNN2eyxdPvDy+IH3yKd1q5MuKnRfm04nqlYdXe3KAZiRr5kcoUBs4ZJ3Uqs5a+CWsjQ2G95mi6HxQaztjamF3S9ihFgY3y+O9R1gsU2u+jwVvak2H5SpUhbYKdCULVYd4/baF6zyZ2uguwXInQHyT9nYW0TXHdf5m255Bpva4ujZSRBtoWjQkyGixZP66jyZhg8JmnbQnRKa/7RZ6HG3LaDZrFeBR+7uth1A0z6DRNLhFdwuua+GS4V3e8dm68jiXKN+LobnMr0QklniIvKUFkcpjIvIKATY0ELnHjipZnpRjJYWJxsdlbdYp2txSMRtoYrIrnWldkjfrwMv1NePwmt9PP8YvP77k9/I/59R/jXUdwtY00FSGdaVXE2LOnHYrSaFsqJ4GAC1qV0CpAHjLS57DYBVDY6rWsp47yK6opb9ldbq9QsL3kBLrNPPxdGzBsRTK5GHzbbNesmGRAa3aRFuLW6rH1pbTeFGMoExoU0WzBWhQM0SKpsgG9txuC/NoFHWBTyU+0+u0izD+a8p52p0bm7VpimbITSUe6xoQURwhYEc+86ywk3G3qGuVA1YH2S1lPFtfRKHxAym6jLKzCvkDNFsRa9Um3NxIZDShSpRutxZ2K7R2FCkUKZq3Te34Qm73b1DSu8hwanShFHPIVs3vQdM9g+a//fbPel41iB27W2U3qz39RF8eozVVy310BCgrNs+kZcaWkbSueKkM4xSaNS0LulGgnTNhoXYK6XSjl4S8Lvi7C8ulRju3vzOGuwNpd417KASWuCVFKBd0toXvQw7FUbYgQPfQVMFmUzezFIR2va4FunGdUDMfpL0UR9ibzVq9v8dFMlIb6WaTtPJC2bSwIJRIjm30S2FylwNyz8GyD0rq22aq95SaifwodvxIdLcM6cPjc6NDgLi6YrUGmhbgtkbjc9w2Z3WdWhismwvklrXntK6UDu2DrbWt/eQS5ylyUIfLWKeBS+d8kSuf11G3N8XtQC9z4qE78IZLAEWT+CGAYvHYRKVap7t2P0fkMBZqR/lLp5QpOk1LAEVlV7dDYWZrr7av/anuvaHwrezYX18w2ffzu/kH+KXb1/m9l/+I8/pP44sIDv1c6Yo6P7XZ7aLbAHZhYSKbkUVaChbdJ8l2BcT7gLY6QFoXehS0YvFX46BQV1D60DRp9wVUjzzn1ZLa9aZCunlYo07dJ2VCNbGq8np/hbwKk6VMdE11sbRfTQqjtzU502Cytbc10RXSK2u+LgvjeYbzzGFKfJSOvOx6vjreIr9SvVQ3wf5Ijvprv5KlVRisPEbaQkDqt1u/NMUOz6CK1z8HynG3SIsuW1OUPik30xiudC57qlmlmaPgdiWpQxRBvGaXZuDY/GO5tEfBw65bG1x5TstkdzEbn72nfm/XaHq6XTe21v/867/kuXbRxh4WY1hmhnKlr5e4Kef+nSpXwzerx5fKEuAJ+FTnze0LvK4UgWaaQtXosQpEdSV/cYsbxPpJ1Z5Yb1Pscmk/0O13LK+fYqHGAlVlt5v1YtGqoPft3pYA67N16tvfUjrDXiHLBwXyoYXtsdBvH7VQV+e0bpKgsN17o4FRAqfNdMtZNlC3vEUWYQceMGptdHWsLKXIbTSC6U5+rKkZXUPXjla6frcaNk+KSkG0dym6Vg0Q7YapuXq0+2OztNRuxBMgtpv6pkndgXZPje6tmVILipU96vm/VE228Dj2lM2CRQvd4c/LjqnTdIITC7PXFoKmLizutzIFKFR2qZkIexUgqqOD8VWpvfdSvLVcdUg66z9f967J9M0yKQuIjGab4N91+gcsu8/jJo+nCR67b+d/+T/jtx5/gD95+Cf8//o9weNOrWdlMUuDjVUPINZZXjn6q/FcAKLdG9Cku7qwIokWu2gvwAg8Oi+6bK07FTfT6LnoQGnA9X94/XbfQKegV8cWBj/fZ1POanTImjXLJjWjwQjXUY30+fZZNhWlgYwOWIsw6M5DjO1tcUbN/8sU95k90HNPz5te1qYG7AUbTcdQJFIuBt+ljT06eMJNs0waF0FHG+i36bXx95btbNZKylJthI8j0XlOCzR2uj1X6ZYAoL7RX279Tb1PS/+UtTRQyHL+eWQ5LfRtqV8z78p4mgBp7XKBSAASoNp5ApT7X8Uw/Q2Nq5Il00y5kwAAAABJRU5ErkJggg=="});Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,s.init();case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){s.del()}));var s={init:function(){c.push(XE.MVVM.bind(i,"image",e.terrainEffect.elevation,"image"),XE.MVVM.bind(i,"image",e.terrainEffect.aspect,"image"),XE.MVVM.bind(i,"image",e.terrainEffect.slope,"image"))},selected:function(e){l.image=e.img},terrainChange:function(t){l.terrainType=t,e.terrainEffect.elevation.enabled=!1,e.terrainEffect.contour.enabled=!1,e.terrainEffect.aspect.enabled=!1,e.terrainEffect.slope.enabled=!1,"elevation"==t&&(e.terrainEffect.elevation.enabled=!0,s.changeHeight(),e.terrainEffect.elevation.image=l.image),"aspect"==t&&(e.terrainEffect.aspect.enabled=!0,e.terrainEffect.aspect.image=l.image),"slope"==t&&(e.terrainEffect.slope.enabled=!0,e.terrainEffect.slope.image=l.image),"contour"==t&&(e.terrainEffect.contour.enabled=!0,e.terrainEffect.contour.width=l.contour.lineWidth,e.terrainEffect.contour.spacing=l.contour.spacing,e.terrainEffect.contour.color=s.changeColor(l.contour.uicolor))},changeColor:function(t){var n=t.split("(")[1].split(")")[0].split(","),o=[];n.forEach((function(e,t){3==t?o.push(Number(e)):o.push(Number(e)/255)})),e.terrainEffect.contour.color=o},changeHeight:function(){e.terrainEffect.elevation.minHeight=l.heightRange[0],e.terrainEffect.elevation.maxHeight=l.heightRange[1]},changeContourpar:function(t){"lineWidth"==t&&(e.terrainEffect.contour.width=l.contour.lineWidth),"spacing"==t&&(e.terrainEffect.contour.spacing=l.contour.spacing)},del:function(){e.terrainEffect.elevation.enabled=!1,e.terrainEffect.contour.enabled=!1,e.terrainEffect.aspect.enabled=!1,e.terrainEffect.slope.enabled=!1,c&&(c.forEach((function(e){return e()})),c.length=0),t&&e.sceneTree.root.children.forEach((function(n){n.czmObject.xbsjGuid==t.xbsjGuid&&e.sceneTree.root.children.remove(n)}))}},u=Object(o["toRefs"])(l);return Object(p["a"])(Object(p["a"])(Object(p["a"])({},u),s),{},{ramp:n})}});const Zn=P()(Qn,[["render",An]]);var $n=Zn;$n.install=function(e){e.component($n.name,$n)};var eo=$n,to=[Le,Ke,et,mt,Nt,Xt,Qt,ln,Tn,eo,pn,On],no={class:"epsplanet-panel-base",style:{width:"296px"}},oo={class:"tool-panel-button"},ao=Object(o["createTextVNode"])("创建"),ro=Object(o["createTextVNode"])("变更位置"),io=Object(o["createTextVNode"])("保存");function co(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-input"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-slider"),u=Object(o["resolveComponent"])("el-color-picker"),d=Object(o["resolveComponent"])("el-form"),p=Object(o["resolveComponent"])("el-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",no,[Object(o["createVNode"])(d,{ref:"form","label-width":"70px",inline:!0},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"点标名称"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.name=t}),placeholder:"未命名点标绘",size:"small"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"图标大小"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.size,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.size=t}),min:1,max:100,style:{width:"200px"},"show-input":"","show-input-controls":!1},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"内容"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.text,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.text=t}),placeholder:"请输入内容",size:"small"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"扩展文本"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.extText,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.extText=t}),placeholder:"请输入内容",size:"small"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"背景"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:e.fillColor,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.fillColor=t}),"show-alpha":"",onActiveChange:e.changeFillColor},null,8,["modelValue","onActiveChange"])]})),_:1}),Object(o["createVNode"])(l,{label:"边框"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:e.OutlineColor,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.OutlineColor=t}),"show-alpha":"",onActiveChange:e.changeOutlineColor},null,8,["modelValue","onActiveChange"])]})),_:1})]})),_:1},512),Object(o["createElementVNode"])("div",oo,[Object(o["createVNode"])(p,{size:"small",onClick:t[6]||(t[6]=function(t){return e.creating=!0})},{default:Object(o["withCtx"])((function(){return[ao]})),_:1}),Object(o["createVNode"])(p,{size:"small",onClick:t[7]||(t[7]=function(t){return e.creating=!e.creating})},{default:Object(o["withCtx"])((function(){return[ro]})),_:1}),Object(o["createVNode"])(p,{size:"small",onClick:e.save},{default:Object(o["withCtx"])((function(){return[io]})),_:1},8,["onClick"])])])}var lo=Object(o["defineComponent"])({name:"EpsplanetPoint",props:[],setup:function(){var e,t,n=Object(o["getCurrentInstance"])(),a=n.proxy,r=a,i=Object(o["reactive"])({name:"未命名点标绘",creating:!1,makiIconList:[{}],makiIcon:"",text:"",size:48,fillColor:"rgba(255,255,255,1)",OutlineColor:"rgba(6,131,6,1)",extText:"",extTextPosition:"",extTextTrue:"",extTextFont:"48px 楷体",extTextFontFamily:"",extTextFontSize:"",extTextPixelOffset:[20,40],fontFamily:["楷体","宋体","黑体","微软雅黑"],_disposers:[0],isSaved:!1});function l(){var n=new XE.Obj.Pin(e);console.log(n),n.pinBuilder.extTextPixelOffset=[20,40],t=n,n.creating=!0;var o=XE.Obj.Pin.MakiIcon;for(var a in o)if(Object.hasOwnProperty.call(o,a)){var l=o[a];i.makiIconList.push({label:a,value:l})}i._disposers=[],i._disposers.push(XE.MVVM.bind(r,"creating",n,"creating"),XE.MVVM.bind(r,"name",n,"name"),XE.MVVM.bind(r,"text",n.pinBuilder,"text"),XE.MVVM.bind(r,"size",n.pinBuilder,"size"),XE.MVVM.bind(r,"makiIcon",n.pinBuilder,"makiIcon"),XE.MVVM.bind(r,"extTextTrue",n.pinBuilder,"extText"),XE.MVVM.bind(r,"extTextFont",n.pinBuilder,"extTextFont"),XE.MVVM.bind(r,"extTextPixelOffset",n.pinBuilder,"extTextPixelOffset"),XE.MVVM.watch((function(){return Object(c["a"])(n.position)}),(function(){var e=Object(c["a"])(n.position);i.extTextPosition="\n经度:".concat((e[0]/Math.PI*180).toFixed(6),"°\n纬度:").concat((e[1]/Math.PI*180).toFixed(6),"°")})))}function s(e){var n=e.split("(")[1].split(")")[0].split(","),o=[];n.forEach((function(e,t){3==t?o.push(Number(e)):o.push(Number(e)/255)})),t.pinBuilder.fillColor=o}function u(e){var n=e.split("(")[1].split(")")[0].split(","),o=[];n.forEach((function(e,t){3==t?o.push(Number(e)):o.push(Number(e)/255)})),t.pinBuilder.outlineColor=o}function d(){i._disposers&&(i._disposers.forEach((function(e){return e()})),i._disposers.length=0),t&&!i.isSaved&&(t.destroy(),t=void 0)}function m(){i.isSaved=!0;var n=new XE.SceneTree.Leaf(t);e.sceneTree.root.children.push(n)}Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,l();case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){d()})),Object(o["watch"])((function(){return i.extText}),(function(e){i.extTextTrue=e+i.extTextPosition})),Object(o["watch"])((function(){return i.extTextPosition}),(function(e){i.extTextTrue=e+i.extText}));var b=Object(o["toRefs"])(i);return Object(p["a"])(Object(p["a"])({},b),{},{_pinCzm:t,init:l,changeFillColor:s,changeOutlineColor:u,del:d,save:m})}});const so=P()(lo,[["render",co]]);var uo=so;uo.install=function(e){e.component(uo.name,uo)};var po=uo,mo={class:"epsplanet-panel-base",style:{width:"296px"}},bo={class:"tool-panel-button"},fo=Object(o["createTextVNode"])("创建"),ho=Object(o["createTextVNode"])("编辑"),jo=Object(o["createTextVNode"])("保存");function Oo(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-input"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-slider"),u=Object(o["resolveComponent"])("el-color-picker"),d=Object(o["resolveComponent"])("el-switch"),p=Object(o["resolveComponent"])("el-form"),m=Object(o["resolveComponent"])("el-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",mo,[Object(o["createVNode"])(p,{ref:"form","label-width":"70px",inline:!0},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"折线名称"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.name=t}),placeholder:"未命名折线",size:"small"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"线宽"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.width,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.width=t}),min:1,max:100,step:1,style:{width:"200px"},"show-input":"","show-input-controls":!1},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"颜色"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:e.color,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.color=t}),"show-alpha":"",onActiveChange:e.changeColor},null,8,["modelValue","onActiveChange"])]})),_:1}),Object(o["createVNode"])(l,{label:"贴地"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.ground,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.ground=t}),"active-color":"#13ce66","inactive-color":"#dcdfe6"},null,8,["modelValue"])]})),_:1})]})),_:1},512),Object(o["createElementVNode"])("div",bo,[Object(o["createVNode"])(m,{size:"small",onClick:t[4]||(t[4]=function(t){return e.creating=!0})},{default:Object(o["withCtx"])((function(){return[fo]})),_:1}),Object(o["createVNode"])(m,{size:"small",onClick:t[5]||(t[5]=function(t){return e.editing=!0})},{default:Object(o["withCtx"])((function(){return[ho]})),_:1}),Object(o["createVNode"])(m,{size:"small",onClick:e.save},{default:Object(o["withCtx"])((function(){return[jo]})),_:1},8,["onClick"])])])}var go=Object(o["defineComponent"])({name:"EpsplanetPolyline",props:[],setup:function(){var e,t,n=Object(o["getCurrentInstance"])(),a=n.proxy,r=a,i=Object(o["reactive"])({name:"未命名折线",creating:!1,editing:!1,width:1,color:"rgba(0,255,0,1)",ground:!0,_disposer:[0],isSaved:!1});function c(){var n=new XE.Obj.Plots.GeoPolyline(e);t=n,i._disposer=[],i._disposer.push(XE.MVVM.bind(r,"name",n,"name"),XE.MVVM.bind(r,"creating",n,"creating"),XE.MVVM.bind(r,"editing",n,"editing"),XE.MVVM.bind(r,"width",n,"width"),XE.MVVM.bind(r,"ground",n,"ground"),XE.MVVM.watch((function(){return n.creating}),(function(){i.creating=n.creating})),XE.MVVM.watch((function(){return n.editing}),(function(){i.editing=n.editing})))}function l(e){var n=e.split("(")[1].split(")")[0].split(","),o=[];n.forEach((function(e,t){3==t?o.push(Number(e)):o.push(Number(e)/255)})),t&&(t.color=o)}function s(){i.isSaved=!0;var n=new XE.SceneTree.Leaf(t);e.sceneTree.root.children.push(n)}function u(){t&&!i.isSaved&&(t.destroy(),t=void 0),i._disposer&&(i._disposer.forEach((function(e){return e()})),i._disposer.length=0)}Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,c();case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){u()}));var d=Object(o["toRefs"])(i);return Object(p["a"])(Object(p["a"])({},d),{},{init:c,changeColor:l,save:s,del:u})}});const vo=P()(go,[["render",Oo]]);var wo=vo;wo.install=function(e){e.component(wo.name,wo)};var Co=wo,Vo={class:"epsplanet-panel-base",style:{width:"296px"}},xo={class:"tool-panel-button"},yo=Object(o["createTextVNode"])("创建"),Eo=Object(o["createTextVNode"])("编辑"),No=Object(o["createTextVNode"])("保存");function _o(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-input"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-slider"),u=Object(o["resolveComponent"])("el-color-picker"),d=Object(o["resolveComponent"])("el-switch"),p=Object(o["resolveComponent"])("el-form"),m=Object(o["resolveComponent"])("el-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Vo,[Object(o["createVNode"])(p,{ref:"form","label-width":"70px",inline:!0},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"多边形名称"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.name=t}),placeholder:"未命名多边形",size:"small"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"线宽"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.outlineWidth,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.outlineWidth=t}),min:1,max:100,step:1,style:{width:"200px"},"show-input":"","show-input-controls":!1},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"颜色"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:e.color,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.color=t}),"show-alpha":"",onActiveChange:e.changeColor},null,8,["modelValue","onActiveChange"])]})),_:1}),Object(o["createVNode"])(l,{label:"边框"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:e.outlineColor,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.outlineColor=t}),"show-alpha":"",onActiveChange:e.changeOutlineColor},null,8,["modelValue","onActiveChange"])]})),_:1}),Object(o["createVNode"])(l,{label:"边框"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.outlineShow,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.outlineShow=t}),"inactive-color":"#dcdfe6"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"贴地"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.ground,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.ground=t}),"inactive-color":"#dcdfe6"},null,8,["modelValue"])]})),_:1})]})),_:1},512),Object(o["createElementVNode"])("div",xo,[Object(o["createVNode"])(m,{size:"small",onClick:t[6]||(t[6]=function(t){return e.creating=!0})},{default:Object(o["withCtx"])((function(){return[yo]})),_:1}),Object(o["createVNode"])(m,{size:"small",onClick:t[7]||(t[7]=function(t){return e.editing=!0})},{default:Object(o["withCtx"])((function(){return[Eo]})),_:1}),Object(o["createVNode"])(m,{size:"small",onClick:e.save},{default:Object(o["withCtx"])((function(){return[No]})),_:1},8,["onClick"])])])}var ko=Object(o["defineComponent"])({name:"EpsplanetPolygon",props:[],setup:function(){var e,t,n=Object(o["getCurrentInstance"])(),a=n.proxy,r=a,i=Object(o["reactive"])({name:"未命名多边形",creating:!1,editing:!1,outlineShow:!0,outlineWidth:0,color:"rgba(0,255,0,0.1)",outlineColor:"rgba(0,255,0,1)",ground:!0,_disposer:[0],isSaved:!1});function c(){var n=new XE.Obj.Plots.GeoPolygon(e);t=n,n.creating=!0,console.log(n),i._disposer=[],i._disposer.push(XE.MVVM.bind(r,"name",n,"name"),XE.MVVM.bind(r,"creating",n,"creating"),XE.MVVM.bind(r,"editing",n,"editing"),XE.MVVM.bind(r,"outlineShow",n,"outlineShow"),XE.MVVM.bind(r,"outlineWidth",n,"outlineWidth"),XE.MVVM.bind(r,"ground",n,"ground"),XE.MVVM.watch((function(){return n.creating}),(function(){i.creating=n.creating})),XE.MVVM.watch((function(){return n.editing}),(function(){i.editing=n.editing})))}function l(e){var n=e.split("(")[1].split(")")[0].split(","),o=[];n.forEach((function(e,t){3==t?o.push(Number(e)):o.push(Number(e)/255)})),t.color=o}function s(e){var n=e.split("(")[1].split(")")[0].split(","),o=[];n.forEach((function(e,t){3==t?o.push(Number(e)):o.push(Number(e)/255)})),t.outlineColor=o}function u(){i.isSaved=!0;var n=new XE.SceneTree.Leaf(t);e.sceneTree.root.children.push(n)}function d(){t&&!i.isSaved&&(t.destroy(),t=void 0),i._disposer&&(i._disposer.forEach((function(e){return e()})),i._disposer.length=0)}Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,c();case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){d()}));var m=Object(o["toRefs"])(i);return Object(p["a"])(Object(p["a"])({},m),{},{init:c,changeColor:l,changeOutlineColor:s,save:u,del:d})}});const Mo=P()(ko,[["render",_o]]);var To=Mo;To.install=function(e){e.component(To.name,To)};var Po=To,So={class:"tool-panel-base",style:{width:"296px"}},zo={class:"tool-panel-button"},Ro=Object(o["createTextVNode"])("编辑"),Bo=Object(o["createTextVNode"])("保存");function Xo(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-input"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-slider"),u=Object(o["resolveComponent"])("el-switch"),d=Object(o["resolveComponent"])("el-color-picker"),p=Object(o["resolveComponent"])("el-form"),m=Object(o["resolveComponent"])("el-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",So,[Object(o["createVNode"])(p,{ref:"form","label-width":"70px",inline:!0},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"名称"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.text,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.text=t}),placeholder:"请输入5字符以内",size:"small",maxlength:"5","show-word-limit":""},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"宽度"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.outlineWidth,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.outlineWidth=t}),min:1,max:50,style:{width:"200px"},"show-input":"","show-input-controls":!1},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"边框"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:e.outlineShow,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.outlineShow=t}),"active-color":"#13ce66","inactive-color":"#dcdfe6"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"贴地"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:e.ground,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.ground=t}),"active-color":"#13ce66","inactive-color":"#dcdfe6"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"边框"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.outlineColor,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.outlineColor=t}),"show-alpha":"",onActiveChange:e.changeOutlineColor},null,8,["modelValue","onActiveChange"])]})),_:1}),Object(o["createVNode"])(l,{label:"填充"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.inlineColor,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.inlineColor=t}),"show-alpha":"",onActiveChange:e.changeColor},null,8,["modelValue","onActiveChange"])]})),_:1})]})),_:1},512),Object(o["createElementVNode"])("div",zo,[Object(o["createVNode"])(m,{size:"small",onClick:t[6]||(t[6]=function(t){return e.editing=!e.editing})},{default:Object(o["withCtx"])((function(){return[Ro]})),_:1}),Object(o["createVNode"])(m,{size:"small",onClick:e.save},{default:Object(o["withCtx"])((function(){return[Bo]})),_:1},8,["onClick"])])])}var Lo=Object(o["defineComponent"])({name:"EpsplanetRectangle",props:["open"],setup:function(){var e,t=Object(o["getCurrentInstance"])(),n=t.proxy,a=n,r=Object(o["reactive"])({text:"",outlineWidth:2,outlineShow:!0,ground:!0,outlineColor:"rgba(0,255,0,1)",inlineColor:"rgba(0,255,0,0.1)",editing:!1});function i(){a._polygonCzm=new XE.Obj.Plots.GeoRectangle(e),a.pin=new XE.Obj.Plots.GeoPin(e),a._polygonCzm.creating=!0,a._disposers=[],a._disposers.push(XE.MVVM.bind(a,"name",a._polygonCzm,"name"),XE.MVVM.bind(a,"editing",a._polygonCzm,"editing"),XE.MVVM.bind(a,"outlineShow",a._polygonCzm,"outlineShow"),XE.MVVM.bind(a,"outlineWidth",a._polygonCzm,"outlineWidth"),XE.MVVM.bind(a,"ground",a._polygonCzm,"ground"),XE.MVVM.bind(a,"editing",a._polygonCzm,"editing"),XE.MVVM.watch((function(){return Object(c["a"])(a._polygonCzm.positions)}),(function(){console.log(Object(c["a"])(a._polygonCzm.positions)),a.pin.position=a._polygonCzm.positions[a._polygonCzm.positions.length-1],1==a._polygonCzm.positions.length?a.pin.innerHTML='<div style="cursor:pointer;position:absolute;width:300px;left:6px;line-height:15px;color:white;"><span style="padding:2px;border-radius:2px;text-stroke:2px #000;font-size:14px;color:#ffffff;background-color:rgba(50,50,50,0.5)">点击左键确定矩形中心点</span></div>':2==a._polygonCzm.positions.length?a.pin.innerHTML='<div style="cursor:pointer;position:absolute;width:300px;left:6px;line-height:15px;color:white;"><span style="padding:2px;border-radius:2px;text-stroke:2px #000;font-size:14px;color:#ffffff;background-color:rgba(50,50,50,0.5)">移动鼠标确定方向和对角线长度，再次点击左键创建完成</span></div>':3==a._polygonCzm.positions.length&&(a.pin.enabled=!1)})))}function l(){e.capture(1920,1080).then((function(e){a.image=e;var t=document.createElement("a");t.href=a.image,t.download="截图.png",t.click()})).catch((function(e){console.log(e)}))}function s(e){var t=e.split("(")[1].split(")")[0].split(","),n=[];t.forEach((function(e,t){3==t?n.push(Number(e)):n.push(Number(e)/225)})),a._polygonCzm.color=n}function u(e){var t=e.split("(")[1].split(")")[0].split(","),n=[];t.forEach((function(e,t){3==t?n.push(Number(e)):n.push(Number(e)/225)})),a._polygonCzm.outlineColor=n}function d(){a.pin&&a.pin.destroy(),a._disposers&&(a._disposers.forEach((function(e){return e()})),a._disposers.length=0),a._polygonCzm&&!a.isSaved&&(a._polygonCzm.destroy(),a._polygonCzm=void 0)}function m(){a.isSaved=!0;var t=new XE.SceneTree.Leaf(a._polygonCzm);e.sceneTree.root.children.push(t)}return Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,i();case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){d()})),Object(p["a"])(Object(p["a"])({},Object(o["toRefs"])(r)),{},{changeOutlineColor:u,changeColor:s,save:m,capture:l})}});const Uo=P()(Lo,[["render",Xo]]);var Ao=Uo;Ao.install=function(e){e.component(Ao.name,Ao)};var Do=Ao,Io={class:"epsplanet-panel-base groundroad",style:{width:"296px"}},Go={style:{float:"left",color:"black"}},Ho={class:"tool-panel-button"},Fo=Object(o["createTextVNode"])("创建"),Wo=Object(o["createTextVNode"])("编辑"),qo=Object(o["createTextVNode"])("保存");function Ko(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-input"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-slider"),u=Object(o["resolveComponent"])("el-image"),d=Object(o["resolveComponent"])("el-option"),p=Object(o["resolveComponent"])("el-select"),m=Object(o["resolveComponent"])("el-form"),b=Object(o["resolveComponent"])("el-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Io,[Object(o["createVNode"])(m,{ref:"form","label-width":"70px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"道路名称"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.name=t}),placeholder:"未命名道路",size:"small"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"路宽(米)"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.width,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.width=t}),min:1,max:100,step:1,"show-input":"","show-input-controls":!1},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"路型"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{modelValue:e.pathImg,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.pathImg=t}),placeholder:"请选择"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.imgList,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:e.label,label:e.label,value:e.path},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("span",Go,Object(o["toDisplayString"])(e.label),1),Object(o["createVNode"])(u,{style:{width:"36px",height:"30px",float:"right"},src:e.path,fit:"fill"},null,8,["src"])]})),_:2},1032,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]})),_:1},512),Object(o["createElementVNode"])("div",Ho,[Object(o["createVNode"])(b,{size:"small",onClick:t[3]||(t[3]=function(t){return e.creating=!0})},{default:Object(o["withCtx"])((function(){return[Fo]})),_:1}),Object(o["createVNode"])(b,{size:"small",onClick:t[4]||(t[4]=function(t){return e.editing=!0})},{default:Object(o["withCtx"])((function(){return[Wo]})),_:1}),Object(o["createVNode"])(b,{size:"small",onClick:e.save},{default:Object(o["withCtx"])((function(){return[qo]})),_:1},8,["onClick"])])])}n("ddb0");var Yo=Object(o["defineComponent"])({name:"EpsplanetGroundRoad",props:[],setup:function(){var e,t,a=Object(o["getCurrentInstance"])(),r=a.proxy,i=r,c=Object(o["reactive"])({name:"未命名道路",creating:!1,editing:!1,width:0,color:"",ground:!0,imgList:[{}],pathImg:"Epsplanet_Assets/assets/roadImg/单车道-沥青.jpg",_disposer:[0],isSaved:!1});function l(){s();var n=new XE.Obj.Road(e);console.log(n),t=n,n.creating=!0,console.log(n),c._disposer=[],c._disposer.push(XE.MVVM.bind(i,"name",n,"name"),XE.MVVM.bind(i,"creating",n,"creating"),XE.MVVM.bind(i,"editing",n,"editing"),XE.MVVM.bind(i,"width",n,"width"),XE.MVVM.bind(i,"pathImg",n,"imageUrl"))}function s(){var e="Epsplanet_Assets/assets/roadImg",t=n("ad8f");c.imgList=[];for(var o=0;o<t.keys().length;o++){var a=t.keys()[o],r=e+"/"+a.split("/")[1],i=a.split("/")[1].split(".")[0];c.imgList.push({label:i,path:r})}console.log(c.imgList)}function u(){c.isSaved=!0;var n=new XE.SceneTree.Leaf(t);e.sceneTree.root.children.push(n)}function d(){t&&!c.isSaved&&(t.destroy(),t=void 0),c._disposer&&(c._disposer.forEach((function(e){return e()})),c._disposer.length=0)}Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,l();case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){d()}));var m=Object(o["toRefs"])(c);return Object(p["a"])(Object(p["a"])({},m),{},{init:l,save:u,del:d})}});const Jo=P()(Yo,[["render",Ko]]);var Qo=Jo;Qo.install=function(e){e.component(Qo.name,Qo)};var Zo=Qo,$o={class:"epsplanet-panel-base",style:{width:"296px"}},ea={class:"tool-panel-button"},ta=Object(o["createTextVNode"])("创建"),na=Object(o["createTextVNode"])("变更位置"),oa=Object(o["createTextVNode"])("保存");function aa(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-input"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-slider"),u=Object(o["resolveComponent"])("el-form"),d=Object(o["resolveComponent"])("el-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",$o,[Object(o["createVNode"])(u,{ref:"form","label-width":"70px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"图片名称"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.name=t}),placeholder:"未命名图片",size:"small"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"宽"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.width,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.width=t}),min:1,max:200,step:1,"show-input":"","show-input-controls":!1},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"高"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.height,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.height=t}),min:1,max:200,step:1,"show-input":"","show-input-controls":!1},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"角度"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.rotation,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.rotation=t}),min:1,max:360,step:1,"show-input":"","show-input-controls":!1},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"图片"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.imageUrl,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.imageUrl=t}),placeholder:"请输入图片地址",type:"text",onChange:e.changeImage},null,8,["modelValue","onChange"])]})),_:1})]})),_:1},512),Object(o["createElementVNode"])("div",ea,[Object(o["createVNode"])(d,{size:"small",onClick:t[5]||(t[5]=function(t){return e.creating=!0})},{default:Object(o["withCtx"])((function(){return[ta]})),_:1}),Object(o["createVNode"])(d,{size:"small",onClick:t[6]||(t[6]=function(t){return e.creating=!0})},{default:Object(o["withCtx"])((function(){return[na]})),_:1}),Object(o["createVNode"])(d,{size:"small",onClick:e.save},{default:Object(o["withCtx"])((function(){return[oa]})),_:1},8,["onClick"])])])}var ra=Object(o["defineComponent"])({name:"EpsplanetGroundImage",props:[],setup:function(){var e,t,n=Object(o["getCurrentInstance"])(),a=n.proxy,r=a,i=Object(o["reactive"])({name:"未命名图片",creating:!1,editing:!1,width:20,height:15,rotation:0,imageUrl:"Epsplanet_Assets/assets/sunway.png",ground:!0,_disposer:[0],isSaved:!1});function c(){var n=new XE.Obj.GroundImage(e);t=n,n.autoWidth=!1,n.autoHeight=!1,n.width=20,n.height=15,console.log(n),i._disposer=[],i._disposer.push(XE.MVVM.bind(r,"name",n,"name"),XE.MVVM.bind(r,"creating",n,"creating"),XE.MVVM.bind(r,"editing",n,"editing"),XE.MVVM.bind(r,"width",n,"width"),XE.MVVM.bind(r,"height",n,"height"),XE.MVVM.bindDegreeRadian(r,"rotation",n,"rotation"),XE.MVVM.bind(r,"origin",n,"origin"),XE.MVVM.watch((function(){return i.imageUrl}),(function(){n.imageUrls[0]=i.imageUrl})))}function l(e){t.imageUrls[0]=e}function s(){i.isSaved=!0;var n=new XE.SceneTree.Leaf(t);e.value.sceneTree.root.children.push(n)}function u(){t&&!i.isSaved&&(t.destroy(),t=void 0),i._disposer&&(i._disposer.forEach((function(e){return e()})),i._disposer.length=0)}Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,c();case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){u()}));var d=Object(o["toRefs"])(i);return Object(p["a"])(Object(p["a"])({},d),{},{init:c,changeImage:l,save:s,del:u})}});const ia=P()(ra,[["render",aa]]);var ca=ia;ca.install=function(e){e.component(ca.name,ca)};var la=ca,sa={class:"epsplanet-panel-base haplochromatization",style:{width:"296px"}},ua=Object(o["createTextVNode"])("创建"),da=Object(o["createTextVNode"])("编辑"),pa=Object(o["createElementVNode"])("span",null,"事件",-1),ma=Object(o["createTextVNode"])("取消"),ba=Object(o["createTextVNode"])("保存");function fa(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-input"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-slider"),u=Object(o["resolveComponent"])("el-color-picker"),d=Object(o["resolveComponent"])("el-button"),p=Object(o["resolveComponent"])("el-button-group"),m=Object(o["resolveComponent"])("el-form"),b=Object(o["resolveComponent"])("el-tab-pane"),f=Object(o["resolveComponent"])("el-option"),h=Object(o["resolveComponent"])("el-select"),j=Object(o["resolveComponent"])("el-tabs");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",sa,[Object(o["createVNode"])(j,{modelValue:e.tabCheck,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.tabCheck=t})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(b,{label:"常规",name:"1"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{ref:"form11",model:e.form,"label-width":"80px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"名称"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.form.name,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.form.name=t}),placeholder:""},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"底部高度"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.form.bottomHeight,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.bottomHeight=t}),min:0,max:1e3,"show-input":"","show-input-controls":!1,step:.1},null,8,["modelValue","step"])]})),_:1}),Object(o["createVNode"])(l,{label:"顶部高度"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.form.topHeight,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.topHeight=t}),min:0,max:1e3,"show-input":"","show-input-controls":!1,step:.1},null,8,["modelValue","step"])]})),_:1}),Object(o["createVNode"])(l,{label:"颜色"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:e.selectColor,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.selectColor=t}),"show-alpha":""},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"操作"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{onClick:e.creatNewClass},{default:Object(o["withCtx"])((function(){return[ua]})),_:1},8,["onClick"]),Object(o["createVNode"])(d,{onClick:t[4]||(t[4]=function(t){return e.editing=!e.editing})},{default:Object(o["withCtx"])((function(){return[da]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["model"])]})),_:1}),Object(o["createVNode"])(b,{label:"属性",name:"2"},{default:Object(o["withCtx"])((function(){return[pa,Object(o["createVNode"])(h,{modelValue:e.operationEvent,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.operationEvent=t}),placeholder:"请选择点击事件"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.selectOptions,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(f,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"]),Object(o["createVNode"])(c,{type:"textarea",modelValue:e.form.textarea,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.form.textarea=t}),placeholder:"请输入属性"},null,8,["modelValue"])]})),_:1})]})),_:1},8,["modelValue"]),Object(o["createVNode"])(p,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{onClick:e.clear},{default:Object(o["withCtx"])((function(){return[ma]})),_:1},8,["onClick"]),Object(o["createVNode"])(d,{onClick:e.save},{default:Object(o["withCtx"])((function(){return[ba]})),_:1},8,["onClick"])]})),_:1})])}n("bf19");var ha=Object(o["defineComponent"])({name:"EpsplanetHaplochromatization",props:[],setup:function(){var e,t,n=Object(o["getCurrentInstance"])(),a=n.proxy,r=a,i=Object(o["reactive"])({tabCheck:"1",form:{name:"",topHeight:0,botttomHeight:0,color:[1,1,0,.5],textarea:"//p对象即为当前模型\nalert('名称：'+p.name);"},selectOptions:[{label:"单击",value:"onclick"}],operationEvent:void 0,editing:void 0,_disposers:[],selectColor:"rgba(255, 255, 0, 0.5)",_classificationpolygon:t});function c(){e.interaction.picking.enabled=!0;var t=new XE.Obj.ClassificationPolygon(e);i._classificationpolygon=t,t.creating=!0,i._disposers=[],i._disposers.push(XE.MVVM.bind(r,"editing",t,"editing"),XE.MVVM.bind(r,"form.topHeight",t,"height"),XE.MVVM.bind(r,"form.bottomHeight",t,"extrudedHeight"),XE.MVVM.bind(r,"form.color",t,"color"))}function l(){d(),c()}function s(){if(i._classificationpolygon){i._classificationpolygon.name=i.form.name,i.operationEvent&&"onclick"==i.operationEvent&&(i._classificationpolygon.evalString="\n            p.onclick=()=>{\n              ".concat(i.form.textarea,"\n            }\n            "));var t=i._classificationpolygon.toJSON(),n=new XE.Obj.ClassificationPolygon(e);n.xbsjFromJSON(t);var o=new XE.SceneTree.Leaf(n);e.sceneTree.root.children.push(o),u(o);var a=setTimeout((function(){d(),clearTimeout(a)}),1e3)}}function u(t){e.haplochromatization||(e.haplochromatization=[]),e.haplochromatization.push(t)}function d(){m(),e.interaction.picking.enabled=!0,i.form={name:"",topHeight:0,botttomHeight:0,color:[1,1,0,.5],textarea:"//p对象即为当前模型\nalert('名称：'+p.name);"},i.operationEvent=void 0,i.editing=void 0,i._disposers=[],i.selectColor="rgba(255, 255, 0, 0.5)",i._classificationpolygon=void 0}function m(){e.interaction.picking.enabled=!1,i._disposers&&(i._disposers.forEach((function(e){return e()})),i._disposers.length=0),i._classificationpolygon&&(i._classificationpolygon.destroy(),i._classificationpolygon=void 0)}Object(o["watch"])((function(){return i.selectColor}),(function(e){for(var t=e.substring(5,e.length-1).split(", "),n=0;n<t.length;n++)t[n]=3==n?Number(t[n]):t[n]/255;i.form.color=t})),Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,e.sceneTree.root.children.push({ref:"tileset",czmObject:{xbsjType:"Tileset",xbsjGuid:"b4137394-d346-4434-a01e-5b2d3730ec9f",name:"三维瓦片1x",url:"//lab.earthsdk.com/model/f15b9e90ac2d11e99dbd8fd044883638/tileset.json",lightColor:null,specularEnvironmentMaps:null,xbsjPosition:[1.9016974701882112,.5972325152147303,425.8641913624607],xbsjFlattenGuid:"93916e9b-82dd-4a56-b15e-27303b08e781",xbsjClippingPlanes:{planes:["9ab55d98-32ed-49ad-9004-1940f4903b68"]},skipLevelOfDetail:!1}}),c();case 5:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){m()}));var b=Object(o["toRefs"])(i);return Object(p["a"])(Object(p["a"])({},b),{},{init:c,save:s,clear:d,del:m,creatNewClass:l})}});const ja=P()(ha,[["render",fa]]);var Oa=ja;Oa.install=function(e){e.component(Oa.name,Oa)};var ga=Oa,va={class:"tool-panel-base particle",style:{width:"312px"}},wa=Object(o["createTextVNode"])("彗尾状"),Ca=Object(o["createTextVNode"])("火焰喷射状"),Va=Object(o["createTextVNode"])("烟雾状"),xa=Object(o["createTextVNode"])("喷泉状"),ya={class:"demo-collapse"},Ea={style:{"align-items":"center"}},Na={class:"tool-panel-button"},_a=Object(o["createTextVNode"])("创建"),ka=Object(o["createTextVNode"])("保存");function Ma(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-input"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-radio"),u=Object(o["resolveComponent"])("el-radio-group"),d=Object(o["resolveComponent"])("el-slider"),p=Object(o["resolveComponent"])("el-collapse-item"),m=Object(o["resolveComponent"])("el-option"),b=Object(o["resolveComponent"])("el-select"),f=Object(o["resolveComponent"])("el-input-number"),h=Object(o["resolveComponent"])("el-collapse"),j=Object(o["resolveComponent"])("el-color-picker"),O=Object(o["resolveComponent"])("el-table-column"),g=Object(o["resolveComponent"])("plus"),v=Object(o["resolveComponent"])("el-icon"),w=Object(o["resolveComponent"])("el-button"),C=Object(o["resolveComponent"])("delete"),V=Object(o["resolveComponent"])("el-table"),x=Object(o["resolveComponent"])("el-form"),y=Object(o["resolveComponent"])("el-button-group");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",va,[Object(o["createVNode"])(x,{ref:"form","label-width":"78px",inline:!0},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"名称"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.name=t}),placeholder:"请输入15个以内字符",size:"small",maxlength:"15","show-word-limit":"",type:"text"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"类型"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:e.particleType,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.particleType=t}),onChange:e.particleTypeChange,size:"small"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{label:"toBeCometTail"},{default:Object(o["withCtx"])((function(){return[wa]})),_:1}),Object(o["createVNode"])(s,{label:"toBeRocketThruster"},{default:Object(o["withCtx"])((function(){return[Ca]})),_:1}),Object(o["createVNode"])(s,{label:"toBeSmoke"},{default:Object(o["withCtx"])((function(){return[Va]})),_:1}),Object(o["createVNode"])(s,{label:"toBeFountain"},{default:Object(o["withCtx"])((function(){return[xa]})),_:1})]})),_:1},8,["modelValue","onChange"])]})),_:1}),Object(o["createElementVNode"])("div",ya,[Object(o["createVNode"])(h,null,{default:Object(o["withCtx"])((function(){return["toBeCometTail"==e.particleType||"toBeRocketThruster"==e.particleType?(Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:0,title:"属性设置",style:{"padding-left":"12px"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"发射速率"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.particleEjectionParam.emissionRate,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.particleEjectionParam.emissionRate=t}),min:10,max:200,style:{width:"200px"},"show-input":"","show-input-controls":!1,onChange:t[3]||(t[3]=function(t){return e.changeParam("emissionRate")})},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"尺寸(像素)"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.particleEjectionParam.particleSize,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.particleEjectionParam.particleSize=t}),min:5,max:30,style:{width:"200px"},"show-input":"","show-input-controls":!1,onChange:t[5]||(t[5]=function(t){return e.changeParam("particleSize")})},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"粒子数量"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.particleEjectionParam.particleNumber,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.particleEjectionParam.particleNumber=t}),min:10,max:200,style:{width:"200px"},"show-input":"","show-input-controls":!1,onChange:t[7]||(t[7]=function(t){return e.changeParam("particleNumber")})},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"存在时间"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.particleEjectionParam.particleLife,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.particleEjectionParam.particleLife=t}),step:.1,min:.1,max:20,style:{width:"200px"},"show-input":"","show-input-controls":!1,onChange:t[9]||(t[9]=function(t){return e.changeParam("particleLife")})},null,8,["modelValue","step","min"])]})),_:1}),Object(o["createVNode"])(l,{label:"半径(米)"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.particleEjectionParam.radius,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.particleEjectionParam.radius=t}),min:1,max:200,style:{width:"200px"},"show-input":"","show-input-controls":!1,onChange:t[11]||(t[11]=function(t){return e.changeParam("radius")})},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"高度(米)"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.particleEjectionParam.height,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.particleEjectionParam.height=t}),min:1,max:200,style:{width:"200px"},"show-input":"","show-input-controls":!1,onChange:t[13]||(t[13]=function(t){return e.changeParam("height")})},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"弧度"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.particleEjectionParam.rotate,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.particleEjectionParam.rotate=t}),step:.01,min:.01,max:20,style:{width:"200px"},"show-input":"","show-input-controls":!1,onChange:t[15]||(t[15]=function(t){return e.changeParam("rotate")})},null,8,["modelValue","step","min"])]})),_:1})]})),_:1})):Object(o["createCommentVNode"])("",!0),"toBeSmoke"==e.particleType||"toBeFountain"==e.particleType?(Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:1,title:"属性设置",style:{"padding-left":"12px"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"发射类型"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(b,{modelValue:e.particleParam.emitterType,"onUpdate:modelValue":t[16]||(t[16]=function(t){return e.particleParam.emitterType=t}),class:"myselect",onChange:t[17]||(t[17]=function(t){return e.emitterTypeChange(t)})},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.particleParam.emitterTypeObj,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"发射半径"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{modelValue:e.particleParam.emitterRadius,"onUpdate:modelValue":t[18]||(t[18]=function(t){return e.particleParam.emitterRadius=t}),min:0,disabled:e.particleParam.radiusdisabled,onChange:t[19]||(t[19]=function(t){return e.changeParam("emitterRadius")})},null,8,["modelValue","disabled"])]})),_:1}),Object(o["createVNode"])(l,{label:"发射弧度"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{modelValue:e.particleParam.emitterAngle,"onUpdate:modelValue":t[20]||(t[20]=function(t){return e.particleParam.emitterAngle=t}),min:0,disabled:e.particleParam.angledisabled,onChange:t[21]||(t[21]=function(t){return e.changeParam("emitterAngle")})},null,8,["modelValue","disabled"])]})),_:1}),Object(o["createVNode"])(l,{label:"发射速率"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.particleParam.emissionRate,"onUpdate:modelValue":t[22]||(t[22]=function(t){return e.particleParam.emissionRate=t}),min:1,max:100,style:{width:"200px"},"show-input":"","show-input-controls":!1,onChange:t[23]||(t[23]=function(t){return e.changeParam("emissionRate2")})},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"尺寸(像素)"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.particleParam.particleSize,"onUpdate:modelValue":t[24]||(t[24]=function(t){return e.particleParam.particleSize=t}),min:5,max:30,style:{width:"200px"},"show-input":"","show-input-controls":!1,onChange:t[25]||(t[25]=function(t){return e.changeParam("particleSize2")})},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"最小存在时间"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.particleParam.minimumParticleLife,"onUpdate:modelValue":t[26]||(t[26]=function(t){return e.particleParam.minimumParticleLife=t}),step:.1,min:.1,max:30,style:{width:"200px"},"show-input":"","show-input-controls":!1,onChange:t[27]||(t[27]=function(t){return e.changeParam("minimumParticleLife")})},null,8,["modelValue","step","min"])]})),_:1}),Object(o["createVNode"])(l,{label:"最大存在时间"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.particleParam.maximumParticleLife,"onUpdate:modelValue":t[28]||(t[28]=function(t){return e.particleParam.maximumParticleLife=t}),step:.1,min:.1,max:30,style:{width:"200px"},"show-input":"","show-input-controls":!1,onChange:t[29]||(t[29]=function(t){return e.changeParam("maximumParticleLife")})},null,8,["modelValue","step","min"])]})),_:1}),Object(o["createVNode"])(l,{label:"最小初速度"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.particleParam.minimumSpeed,"onUpdate:modelValue":t[30]||(t[30]=function(t){return e.particleParam.minimumSpeed=t}),step:1,min:0,max:30,style:{width:"200px"},"show-input":"","show-input-controls":!1,onChange:t[31]||(t[31]=function(t){return e.changeParam("minimumSpeed")})},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"最大初速度"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.particleParam.maximumSpeed,"onUpdate:modelValue":t[32]||(t[32]=function(t){return e.particleParam.maximumSpeed=t}),step:1,min:0,max:30,style:{width:"200px"},"show-input":"","show-input-controls":!1,onChange:t[33]||(t[33]=function(t){return e.changeParam("maximumSpeed")})},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"初始比例"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.particleParam.startScale,"onUpdate:modelValue":t[34]||(t[34]=function(t){return e.particleParam.startScale=t}),step:1,min:0,max:10,style:{width:"200px"},"show-input":"","show-input-controls":!1,onChange:t[35]||(t[35]=function(t){return e.changeParam("startScale")})},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"结束比例"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.particleParam.endScale,"onUpdate:modelValue":t[36]||(t[36]=function(t){return e.particleParam.endScale=t}),step:1,min:0,max:10,style:{width:"200px"},"show-input":"","show-input-controls":!1,onChange:t[37]||(t[37]=function(t){return e.changeParam("endScale")})},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"重力加速度"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.particleParam.gravity,"onUpdate:modelValue":t[38]||(t[38]=function(t){return e.particleParam.gravity=t}),step:1,min:-20,max:20,style:{width:"200px"},"show-input":"","show-input-controls":!1,onChange:t[39]||(t[39]=function(t){return e.changeParam("gravity")})},null,8,["modelValue"])]})),_:1})]})),_:1})):Object(o["createCommentVNode"])("",!0)]})),_:1})]),"toBeSmoke"==e.particleType||"toBeFountain"==e.particleType?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,label:"起始颜色",style:{"margin-top":"8px"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(j,{modelValue:e.particleParam.startColor,"onUpdate:modelValue":t[40]||(t[40]=function(t){return e.particleParam.startColor=t}),"show-alpha":"",onChange:e.changeColor2},null,8,["modelValue","onChange"])]})),_:1})):Object(o["createCommentVNode"])("",!0),"toBeSmoke"==e.particleType||"toBeFountain"==e.particleType?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:1,label:"结束颜色",style:{"margin-top":"8px"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(j,{modelValue:e.particleParam.endColor,"onUpdate:modelValue":t[41]||(t[41]=function(t){return e.particleParam.endColor=t}),"show-alpha":"",onChange:e.changeColor2},null,8,["modelValue","onChange"])]})),_:1})):Object(o["createCommentVNode"])("",!0),"toBeCometTail"==e.particleType||"toBeRocketThruster"==e.particleType?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:2},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(V,{data:e.particleEjectionParam.colorData,border:"",style:{width:"100%"},size:"'small'"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(O,{type:"index",label:"序号",width:"100",align:"center","header-align":"center"}),Object(o["createVNode"])(O,{prop:"color",label:"颜色",width:"100",align:"center","header-align":"center"},{default:Object(o["withCtx"])((function(t){var n=t.row;return[Object(o["createVNode"])(j,{modelValue:n.color,"onUpdate:modelValue":function(e){return n.color=e},"show-alpha":"",onChange:e.changeColor},null,8,["modelValue","onUpdate:modelValue","onChange"])]})),_:1}),Object(o["createVNode"])(O,{width:"100",align:"center","header-align":"center"},{header:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",Ea,[Object(o["createVNode"])(w,{type:"text",onClick:e.addColor},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(v,{size:20,color:"#281f1d"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(g)]})),_:1})]})),_:1},8,["onClick"])])]})),default:Object(o["withCtx"])((function(t){return[Object(o["createVNode"])(w,{size:"small",type:"text",onClick:function(n){return e.deleteColor(t.$index)}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(v,{size:20,color:"#281f1d"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(C)]})),_:1})]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])]})),_:1})):Object(o["createCommentVNode"])("",!0)]})),_:1},512),Object(o["createElementVNode"])("div",Na,[Object(o["createVNode"])(y,{size:"small"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(w,{size:"small",onClick:e.createPin},{default:Object(o["withCtx"])((function(){return[_a]})),_:1},8,["onClick"]),Object(o["createVNode"])(b,{modelValue:e.value,"onUpdate:modelValue":t[42]||(t[42]=function(t){return e.value=t}),placeholder:"编辑",size:"small",style:{width:"70px",margin:"0px"},onVisibleChange:t[43]||(t[43]=function(t){return e.edit(t)})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{label:"平移",value:"positionEditing"}),Object(o["createVNode"])(m,{label:"旋转",value:"rotationEditing"})]})),_:1},8,["modelValue"])]})),_:1}),Object(o["createVNode"])(w,{size:"small",onClick:e.save},{default:Object(o["withCtx"])((function(){return[ka]})),_:1},8,["onClick"])])])}var Ta=Object(o["defineComponent"])({name:"EpsplanetParticle",props:[],setup:function(){var e,t,n,a,r,i=Object(o["getCurrentInstance"])(),c=i.proxy,l=c,s=!1,u=[],d=Object(o["reactive"])({name:"粒子喷射对象",particleType:"toBeCometTail",positionEditing:!1,rotationEditing:!1,value:"",particleEjectionParam:{emissionRate:30,particleSize:15,particleNumber:100,particleLife:3.5,radius:30,height:50,rotate:.01,colors:[],colorData:[{color:"rgba(153, 153, 153, 1)"},{color:"rgba(153, 153, 229, 0.9)"},{color:"rgba(127, 127, 178, 0.5)"}]},particleParam:{emissionRate:5,particleSize:25,startColor:"rgba(40, 178, 170, 1)",endColor:"rgba(255, 255, 255, 1)",emitterType:"CircleEmitter",emitterTypeObj:[{key:"BoxEmitter",value:"BoxEmitter"},{key:"CircleEmitter",value:"CircleEmitter"},{key:"ConeEmitter",value:"ConeEmitter"},{key:"SphereEmitter",value:"SphereEmitter"}],emitterRadius:2,radiusdisabled:!1,emitterAngle:1,angledisabled:!0,gravity:0,minimumParticleLife:12,maximumParticleLife:12,minimumSpeed:1,maximumSpeed:4,startScale:1,endScale:5,image:"EPSPlanet_SDK/XbsjEarth-Plugins/plottingSymbol2/assets/SampleData/smoke.png"}});Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent;case 3:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){m.del()}));var m={createPin:function(){n?(n.creating=!0,n.enabled=!0,a&&(a.show=!1),r&&(r.show=!1)):(n=new XE.Obj.Plots.GeoPin(e),n.innerHTML='<div style="cursor:pointer;position:absolute;width:300px;left:6px;line-height:15px;color:white;"><span style="padding:2px;border-radius:2px;text-stroke:2px #000;font-size:14px;color:#ffffff;background-color:rgba(50,50,50,0.5)">点击鼠标左键开始绘制!</span></div>',n.creating=!0,t=new Cesium.ScreenSpaceEventHandler(e.czm.viewer.scene.canvas),t.setInputAction((function(e){var t=n.position;n.enabled=!1,"toBeCometTail"==d.particleType||"toBeRocketThruster"==d.particleType?m.createParticleSystemTails(t):m.createParticleSystem(t)}),Cesium.ScreenSpaceEventType.LEFT_CLICK)),window["pin"]=n},createParticleSystemTails:function(t){a?(a.position=t,a.show=!0):(a=new XE.Obj.Plots.ParticleSystemTails(e),a.position=t,a.name=d.name,a.emissionRate=d.particleEjectionParam.emissionRate,a.particleSize=d.particleEjectionParam.particleSize,a.particleNumber=d.particleEjectionParam.particleNumber,a.particleLife=d.particleEjectionParam.particleLife,a.radius=d.particleEjectionParam.radius,a.rotate=d.particleEjectionParam.rotate,a.height=d.particleEjectionParam.height,m.changeType(d.particleType),0==d.particleEjectionParam.colorData.length?m.displayColor(a.colors):m.changeColor(),u=[],u.push(XE.MVVM.bind(l,"name",a,"name"),XE.MVVM.bind(l,"positionEditing",a,"positionEditing"),XE.MVVM.bind(l,"rotationEditing",a,"rotationEditing"),XE.MVVM.bind(l,"particleEjectionParam.colors",a,"colors"))),a.flyTo(),window["particleSystemTails"]=a},createParticleSystem:function(t){r?(r.position=t,r.show=!0):(r=new XE.Obj.Plots.ParticleSystem(e),r.position=t,r.name=d.name,r.emitterType=d.particleParam.emitterType,r.emitterRadius=d.particleParam.emitterRadius,r.emitterAngle=d.particleParam.emitterAngle,r.emissionRate=d.particleParam.emissionRate,r.particleSize=d.particleParam.particleSize,r.minimumParticleLife=d.particleParam.minimumParticleLife,r.maximumParticleLife=d.particleParam.maximumParticleLife,r.minimumSpeed=d.particleParam.minimumSpeed,r.maximumSpeed=d.particleParam.maximumSpeed,r.startScale=d.particleParam.startScale,r.endScale=d.particleParam.endScale,r.gravity=d.particleParam.gravity,r.image=d.particleParam.image,m.changeType(d.particleType),m.changeColor2(),u=[],u.push(XE.MVVM.bind(l,"name",r,"name"),XE.MVVM.bind(l,"positionEditing",r,"positionEditing"),XE.MVVM.bind(l,"rotationEditing",r,"rotationEditing"),XE.MVVM.bind(l,"particleParam.emitterType",r,"emitterType"))),r.flyTo(),window["particleSystem"]=r},emitterTypeChange:function(e){"ConeEmitter"===e?(d.particleParam.radiusdisabled=!0,d.particleParam.angledisabled=!1):(d.particleParam.radiusdisabled=!1,d.particleParam.angledisabled=!0)},changeParam:function(e){if(a)switch(e){case"emissionRate":a.emissionRate=d.particleEjectionParam.emissionRate;break;case"particleSize":a.particleSize=d.particleEjectionParam.particleSize;break;case"particleNumber":a.particleNumber=d.particleEjectionParam.particleNumber;break;case"particleLife":a.particleLife=d.particleEjectionParam.particleLife;break;case"radius":a.radius=d.particleEjectionParam.radius;break;case"height":a.height=d.particleEjectionParam.height;break;case"rotate":a.rotate=d.particleEjectionParam.rotate;break}if(r){switch(e){case"emitterRadius":r.emitterRadius=d.particleParam.emitterRadius;break;case"emitterAngle":r.emitterAngle=d.particleParam.emitterAngle;break;case"emissionRate2":r.emissionRate=d.particleParam.emissionRate;break;case"particleSize2":r.particleSize=d.particleParam.particleSize;break;case"minimumParticleLife":r.minimumParticleLife=d.particleParam.minimumParticleLife;break;case"maximumParticleLife":r.maximumParticleLife=d.particleParam.maximumParticleLife;break;case"minimumSpeed":r.minimumSpeed=d.particleParam.minimumSpeed;break;case"maximumSpeed":r.maximumSpeed=d.particleParam.maximumSpeed;break;case"startScale":r.startScale=d.particleParam.startScale;break;case"endScale":r.endScale=d.particleParam.endScale;break;case"gravity":r.gravity=d.particleParam.gravity;break;case"startScale":r.startScale=d.particleParam.startScale;break}m.changeColor2()}},addColor:function(){d.particleEjectionParam.colorData.push({color:"rgba(19, 206, 102, 0.8)"}),m.changeColor()},deleteColor:function(e){d.particleEjectionParam.colorData.length>1&&(d.particleEjectionParam.colorData.splice(e,1),m.changeColor())},changeColor2:function(){r.startColor=m.transColorToCesium(d.particleParam.startColor),r.endColor=m.transColorToCesium(d.particleParam.endColor)},changeColor:function(){var e=[];d.particleEjectionParam.colorData.forEach((function(t){e=e.concat(m.transColorToCesium(t.color))})),d.particleEjectionParam.colors=e},transColorToCesium:function(e){var t=e.split("(")[1].split(")")[0].split(","),n=[];return t.forEach((function(e,t){3==t?n.push(Number(e)):n.push(Number(e)/255)})),n},displayColor:function(e){d.particleEjectionParam.colorData=[];var t={color:""};e.forEach((function(e,n){(n+1)%4==0?(t.color="rgba("+t.color+String(e)+")",d.particleEjectionParam.colorData.push(t),t={color:""}):t.color+=String(Number(255*e))+","}))},del:function(){u&&a&&(u.forEach((function(e){e()})),u.length=0),s||(r&&(r.destroy(),r=void 0),a&&(a.destroy(),a=void 0)),n&&(n.destroy(),n=void 0)},changeType:function(e){"toBeCometTail"==e&&(a.toBeCometTail(),a.rotation=[0,0,0],a.height=50,d.particleEjectionParam.colorData=[{color:"rgba(153, 153, 153, 1)"},{color:"rgba(153, 153, 229, 0.9)"},{color:"rgba(127, 127, 178, 0.5)"}],d.particleEjectionParam.height=50),"toBeRocketThruster"==e&&(a.toBeRocketThruster(),a.rotation=[0,0,3.14],a.height=25,d.particleEjectionParam.height=25,d.particleEjectionParam.colorData=[{color:"rgba(255, 127, 12, 1)"},{color:"rgba(229, 153, 2, 1)"},{color:"rgba(204, 12, 22, 1)"},{color:"rgba(255, 12, 22, 1)"}]),"toBeSmoke"==e&&(r.toBeSmoke(),d.particleParam.startColor="rgba(248, 228, 6, 1)",d.particleParam.endColor="rgba(245, 45, 45, 1)"),"toBeFountain"==e&&(r.toBeFountain(),d.particleParam.startColor="rgba(255, 255, 255, 1)",d.particleParam.endColor="rgba(255, 255, 255, 1)",r.rotation=[0,0,0])},particleTypeChange:function(){var e=["toBeCometTail","toBeRocketThruster"],t=["toBeSmoke","toBeFountain"];a&&e.indexOf(d.particleType)>-1?(a.show=!0,r&&(r.show=!1),m.changeType(d.particleType),m.changeColor()):n&&0==n.enabled&&e.indexOf(d.particleType)>-1&&(m.createParticleSystemTails(n.position),a.show=!0,r.show=!1),r&&t.indexOf(d.particleType)>-1?(a&&(a.show=!1),r.show=!0,m.changeType(d.particleType),m.changeColor2()):n&&0==n.enabled&&t.indexOf(d.particleType)>-1&&(m.createParticleSystem(n.position),a.show=!1,r.show=!0),"toBeCometTail"==d.particleType&&(d.particleEjectionParam.colorData=[{color:"rgba(153, 153, 153, 1)"},{color:"rgba(153, 153, 229, 0.9)"},{color:"rgba(127, 127, 178, 0.5)"}]),"toBeRocketThruster"==d.particleType&&(d.particleEjectionParam.colorData=[{color:"rgba(255, 127, 12, 1)"},{color:"rgba(229, 153, 2, 1)"},{color:"rgba(204, 12, 22, 1)"},{color:"rgba(255, 12, 22, 1)"}]),"toBeSmoke"==d.particleType&&(d.particleParam.startColor="rgba(248, 228, 6, 1)",d.particleParam.endColor="rgba(245, 45, 45, 1)"),"toBeFountain"==d.particleType&&(d.particleParam.startColor="rgba(255, 255, 255, 1)",d.particleParam.endColor="rgba(255, 255, 255, 1)")},save:function(){if(s=!0,"toBeCometTail"==d.particleType||"toBeRocketThruster"==d.particleType){var t=new XE.SceneTree.Leaf(a);e.sceneTree.root.children.push(t)}if("toBeSmoke"==d.particleType||"toBeFountain"==d.particleType){var n=new XE.SceneTree.Leaf(r);e.sceneTree.root.children.push(n)}},edit:function(e){e||("positionEditing"==d.value&&(d.positionEditing=!d.positionEditing),"rotationEditing"==d.value&&(d.rotationEditing=!d.rotationEditing))}},b=Object(o["toRefs"])(d);return Object(p["a"])(Object(p["a"])({},b),m)}});const Pa=P()(Ta,[["render",Ma]]);var Sa=Pa;Sa.install=function(e){e.component(Sa.name,Sa)};var za=Sa,Ra={class:"epsplanet-panel-base",style:{width:"296px"}},Ba={class:"tool-panel-button"},Xa=Object(o["createTextVNode"])("编辑"),La=Object(o["createTextVNode"])("保存");function Ua(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-input"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-slider"),u=Object(o["resolveComponent"])("el-switch"),d=Object(o["resolveComponent"])("el-color-picker"),p=Object(o["resolveComponent"])("el-form"),m=Object(o["resolveComponent"])("el-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ra,[Object(o["createVNode"])(p,{ref:"form","label-width":"70px",inline:!0},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"名称"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.name=t}),placeholder:"请输入15个以内字符",size:"small",maxlength:"15","show-word-limit":""},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"宽度"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.outlineWidth,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.outlineWidth=t}),min:1,max:50,style:{width:"200px"},"show-input":"","show-input-controls":!1},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"边框"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:e.outlineShow,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.outlineShow=t}),"active-color":"#13ce66","inactive-color":"#dcdfe6"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"贴地"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:e.ground,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.ground=t}),"active-color":"#13ce66","inactive-color":"#dcdfe6"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"边框"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.wireFrameColor,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.wireFrameColor=t}),onChange:t[5]||(t[5]=function(t){return e.changeColor("box")}),"show-alpha":""},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"填充"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.fillColor,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.fillColor=t}),onChange:t[7]||(t[7]=function(t){return e.changeColor("fill")}),"show-alpha":""},null,8,["modelValue"])]})),_:1})]})),_:1},512),Object(o["createElementVNode"])("div",Ba,[Object(o["createVNode"])(m,{size:"small",onClick:t[8]||(t[8]=function(t){return e.editing=!e.editing})},{default:Object(o["withCtx"])((function(){return[Xa]})),_:1}),Object(o["createVNode"])(m,{size:"small",onClick:e.save},{default:Object(o["withCtx"])((function(){return[La]})),_:1},8,["onClick"])])])}var Aa=Object(o["defineComponent"])({name:"EpsplanetSmoothPolygon",props:[],setup:function(){var e,t,n,a,r,i,l=Object(o["getCurrentInstance"])(),s=l.proxy,u=s,d=Object(o["reactive"])({name:"平滑多边形对象",outlineWidth:2,outlineShow:!0,wireFrameColor:"rgba(0,255,0,1)",fillColor:"rgba(0,255,0,1)",editing:!1,ground:!0}),m=!1;Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,g.instance.getEarth();case 2:e=n.sent,t||b();case 4:case"end":return n.stop()}}),n)})))),Object(o["onBeforeUnmount"])((function(){O()}));var b=function(){a=new XE.Obj.Plots.GeoPin(e),a.innerHTML='<div style="cursor:pointer;position:absolute;width:300px;left:6px;line-height:15px;color:white;"><span style="padding:2px;border-radius:2px;text-stroke:2px #000;font-size:14px;color:#ffffff;background-color:rgba(50,50,50,0.5)">点击左键开始绘制!</span></div>',t=new XE.Obj.Plots.GeoSmoothPolygon(e),window["SmoothPolygon"]=t,window["pin"]=a,t.name=d.name,t.ground=d.ground,t.outlineWidth=d.outlineWidth,t.outlineShow=d.outlineShow,t.creating=!0,r=new Cesium.ScreenSpaceEventHandler(e.czm.viewer.scene.canvas),r.setInputAction((function(e){t.positions.length>=3&&(a.innerHTML='<div style="cursor:pointer;position:absolute;width:300px;left:6px;line-height:15px;color:white;"><span style="padding:2px;border-radius:2px;text-stroke:2px #000;font-size:14px;color:#ffffff;background-color:rgba(50,50,50,0.5)">按"SHITF + 右键"结束绘制!</span></div>')}),Cesium.ScreenSpaceEventType.LEFT_CLICK),i=new Cesium.ScreenSpaceEventHandler(e.czm.viewer.scene.canvas),i.setInputAction((function(e){a.enabled=!1}),Cesium.ScreenSpaceEventType.RIGHT_CLICK,Cesium.KeyboardEventModifier.SHIFT),n=[{name:"name"},{name:"creating"},{name:"editing"},{name:"ground"},{name:"outlineWidth"},{name:"outlineShow"}],n.forEach((function(e){e.unbind=XE.MVVM.bind(u,e.name,t,e.name)}));var o={name:"position"};o.unbind=XE.MVVM.watch((function(){return Object(c["a"])(t.positions)}),(function(){a.position=t.positions[t.positions.length-1]})),n.push(o)},f=function(e){var n=[];"box"==e&&(n=n.concat(j(d.wireFrameColor)),t.outlineColor=n),"fill"==e&&(n=n.concat(j(d.fillColor)),t.color=n)},j=function(e){var t=e.split("(")[1].split(")")[0].split(","),n=[];return t.forEach((function(e,t){3==t?n.push(Number(e)):n.push(Number(e)/255)})),n},O=function(){n&&(n.forEach((function(e){e.unbind()})),n.length=0),t&&!m&&(t.destroy(),t=void 0),a&&(a.destroy(),a=void 0),(r||i)&&(r=r&&r.destroy(),i=i&&i.destroy())},v=function(){t.editing=!1,m=!0;var n=new XE.SceneTree.Leaf(t);e.sceneTree.root.children.push(n)},w=Object(o["toRefs"])(d);return Object(p["a"])(Object(p["a"])({},w),{},{init:b,changeColor:f,transColorToCesium:j,save:v,del:O})}});const Da=P()(Aa,[["render",Ua]]);var Ia=Da;Ia.install=function(e){e.component(Ia.name,Ia)};var Ga=Ia,Ha={class:"tool-panel-base",style:{width:"296px"}},Fa={class:"tool-panel-button"},Wa=Object(o["createTextVNode"])("编辑"),qa=Object(o["createTextVNode"])("保存");function Ka(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-input"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-slider"),u=Object(o["resolveComponent"])("el-switch"),d=Object(o["resolveComponent"])("el-col"),p=Object(o["resolveComponent"])("el-row"),m=Object(o["resolveComponent"])("el-color-picker"),b=Object(o["resolveComponent"])("el-form"),f=Object(o["resolveComponent"])("el-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ha,[Object(o["createVNode"])(b,{ref:"formRef",model:e.form,"label-width":"50px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"名称"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.form.name,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.form.name=t}),size:"small",placeholder:"请输入图层名称"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"宽度"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.form.width,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.width=t}),min:1,max:50,step:1,"show-input":"","show-input-controls":!1},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(p,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{span:12},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"边框"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:e.form.outlineshow,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.outlineshow=t}),size:"small"},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(o["createVNode"])(d,{span:12},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"贴地"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:e.form.ground,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.ground=t}),size:"small"},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(p,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{span:12},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"填充"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{modelValue:e.color,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.color=t}),"show-alpha":"",onActiveChange:e.changeColor},null,8,["modelValue","onActiveChange"])]})),_:1})]})),_:1}),Object(o["createVNode"])(d,{span:12},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"边框"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{modelValue:e.outlineColor,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.outlineColor=t}),"show-alpha":"",onActiveChange:e.changeOutlineColor},null,8,["modelValue","onActiveChange"])]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["model"]),Object(o["createElementVNode"])("div",Fa,[Object(o["createVNode"])(f,{size:"small",onClick:t[6]||(t[6]=function(t){return e.editing=!e.editing})},{default:Object(o["withCtx"])((function(){return[Wa]})),_:1}),Object(o["createVNode"])(f,{size:"small",onClick:e.save},{default:Object(o["withCtx"])((function(){return[qa]})),_:1},8,["onClick"])])])}var Ya=Object(o["defineComponent"])({name:"EpsplanetCircle",setup:function(){var e,t=Object(o["getCurrentInstance"])(),n=t.proxy,a=n,r=Object(o["reactive"])({destroyArray:[""],color:"rgba(0,255,0,0.1)",outlineColor:"rgba(0,255,0,1)",creating:!1,editing:!1,isSaved:!1,formRef:"",form:{name:"",show:!0,outlineshow:!0,ground:!0,width:2}}),i={init:function(){a._circleDraw=new XE.Obj.Plots.GeoCircle(e),a._circleDraw.creating=!0,a.pin=new XE.Obj.Plots.GeoPin(e),r.destroyArray=[],r.destroyArray.push(XE.MVVM.bind(a,"form.name",a._circleDraw,"name"),XE.MVVM.bind(a,"editing",a._circleDraw,"editing"),XE.MVVM.bind(a,"form.outlineshow",a._circleDraw,"outlineShow"),XE.MVVM.bind(a,"form.ground",a._circleDraw,"ground"),XE.MVVM.bind(a,"form.width",a._circleDraw,"outlineWidth"),XE.MVVM.watch((function(){return Object(c["a"])(a._circleDraw.positions)}),(function(){a.pin.position=a._circleDraw.positions[a._circleDraw.positions.length-1],1==a._circleDraw.positions.length?a.pin.innerHTML='<div style="cursor:pointer;position:absolute;width:300px;left:6px;line-height:15px;color:white;"><span style="padding:2px;border-radius:2px;text-stroke:2px #000;font-size:14px;color:#ffffff;background-color:rgba(50,50,50,0.5)">点击左键确定圆心位置</span></div>':2==a._circleDraw.positions.length?a.pin.innerHTML='<div style="cursor:pointer;position:absolute;width:300px;left:6px;line-height:15px;color:white;"><span style="padding:2px;border-radius:2px;text-stroke:2px #000;font-size:14px;color:#ffffff;background-color:rgba(50,50,50,0.5)">点击左键确定圆半径</span></div>':3==a._circleDraw.positions.length&&(a.pin.enabled=!1)})))},del:function(){r.destroyArray&&(r.destroyArray.forEach((function(e){return e()})),r.destroyArray.length=0),a._circleDraw&&!r.isSaved&&(a._circleDraw.destroy(),a._circleDraw=void 0),a.pin.enabled=!1},changeColor:function(e){var t=e.split("(")[1].split(")")[0].split(","),n=[];t.forEach((function(e,t){3==t?n.push(Number(e)):n.push(Number(e)/255)})),a._circleDraw.color=n},changeOutlineColor:function(e){var t=e.split("(")[1].split(")")[0].split(","),n=[];t.forEach((function(e,t){3==t?n.push(Number(e)):n.push(Number(e)/255)})),a._circleDraw.outlineColor=n},save:function(){r.isSaved=!0;var t=new XE.SceneTree.Leaf(a._circleDraw);e.sceneTree.root.children.push(t)}};return Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,i.init();case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){i.del()})),Object(p["a"])(Object(p["a"])({},Object(o["toRefs"])(r)),i)}});const Ja=P()(Ya,[["render",Ka]]);var Qa=Ja;Qa.install=function(e){e.component(Qa.name,Qa)};var Za=Qa,$a={class:"tool-panel-base",style:{width:"296px","max-height":"270px","overflow-y":"auto"}},er={class:"tool-panel-button"},tr=Object(o["createTextVNode"])("编辑"),nr=Object(o["createTextVNode"])("高级设置"),or=Object(o["createTextVNode"])("保存");function ar(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-input"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-slider"),u=Object(o["resolveComponent"])("el-switch"),d=Object(o["resolveComponent"])("el-col"),p=Object(o["resolveComponent"])("el-color-picker"),m=Object(o["resolveComponent"])("el-row"),b=Object(o["resolveComponent"])("el-form"),f=Object(o["resolveComponent"])("el-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",$a,[Object(o["createVNode"])(b,{ref:"formRef",model:e.form,"label-width":"75px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"名称",class:"label"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.form.name,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.form.name=t}),size:"small",placeholder:"请输入图层名称"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"宽度",class:"label"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.form.width,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.width=t}),min:1,max:50,step:1,"show-input":"","show-input-controls":!1},null,8,["modelValue"])]})),_:1}),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(l,{label:"宽度比例"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.form.widthProportion,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.widthProportion=t}),min:.04,max:.1,step:.01,"show-input":"","show-input-controls":!1},null,8,["modelValue","min","max","step"])]})),_:1}),Object(o["createVNode"])(l,{label:"宽幅比例"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.form.wProportion,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.wProportion=t}),min:0,max:.2,step:.01,"show-input":"","show-input-controls":!1},null,8,["modelValue","max","step"])]})),_:1}),Object(o["createVNode"])(l,{label:"箭头高度"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.form.arrowH,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.arrowH=t}),min:.05,max:.2,step:.01,"show-input":"","show-input-controls":!1},null,8,["modelValue","min","max","step"])]})),_:1}),Object(o["createVNode"])(l,{label:"箭头宽度"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.form.arrowW,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.form.arrowW=t}),min:1.8,max:5,step:.1,"show-input":"","show-input-controls":!1},null,8,["modelValue","min","step"])]})),_:1})],512),[[o["vShow"],e.seniorItem]]),Object(o["createVNode"])(m,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{span:12},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"边框"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:e.form.outlineshow,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.form.outlineshow=t}),size:"small"},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(o["createVNode"])(d,{span:12},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"填充"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{modelValue:e.color,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.color=t}),"show-alpha":"",onActiveChange:e.changeColor},null,8,["modelValue","onActiveChange"])]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["model"]),Object(o["createElementVNode"])("div",er,[Object(o["createVNode"])(f,{size:"small",onClick:t[8]||(t[8]=function(t){return e.editing=!e.editing})},{default:Object(o["withCtx"])((function(){return[tr]})),_:1}),Object(o["createVNode"])(f,{size:"small",onClick:t[9]||(t[9]=function(t){return e.seniorItem=!e.seniorItem})},{default:Object(o["withCtx"])((function(){return[nr]})),_:1}),Object(o["createVNode"])(f,{size:"small",onClick:e.save},{default:Object(o["withCtx"])((function(){return[or]})),_:1},8,["onClick"])])])}var rr=Object(o["defineComponent"])({name:"EpsplanetArrow",setup:function(){var e,t,n,a=Object(o["getCurrentInstance"])(),r=a.proxy,i=r,l=Object(o["reactive"])({test:!0,color:"rgba(0,255,0,0.1)",creating:!1,editing:!1,isSaved:!1,formRef:"",destroyArray:[""],seniorItem:!1,form:{name:"",outlineshow:!0,ground:!0,width:2,widthProportion:.06,wProportion:.1,arrowH:.15,arrowW:2}}),s={init:function(){t=new XE.Obj.Plots.GeoArrow(e),t.creating=!0,l.destroyArray=[],n=new XE.Obj.Plots.GeoPin(e),l.destroyArray.push(XE.MVVM.bind(i,"form.name",t,"name"),XE.MVVM.bind(i,"editing",t,"editing"),XE.MVVM.bind(i,"form.outlineshow",t,"outlineShow"),XE.MVVM.bind(i,"form.ground",t,"ground"),XE.MVVM.bind(i,"form.width",t,"outlineWidth"),XE.MVVM.bind(i,"form.arrowH",t,"arrowMaxHeightScale"),XE.MVVM.bind(i,"form.arrowW",t,"arrowWingWidthScale"),XE.MVVM.bind(i,"form.widthProportion",t,"minWidthScale"),XE.MVVM.bind(i,"form.wProportion",t,"dynamicWidthScale"),XE.MVVM.watch((function(){return Object(c["a"])(t.positions)}),(function(){n["position"]=t.positions[t.positions.length-1],1==t.positions.length?n["innerHTML"]='<div style="cursor:pointer;position:absolute;width:300px;left:6px;line-height:15px;color:white;"><span style="padding:2px;border-radius:2px;text-stroke:2px #000;font-size:14px;color:#ffffff;background-color:rgba(50,50,50,0.5)">绘制完毕后点击右键+shift结束绘制</span></div>':t.creating||(n["enabled"]=!1)})))},del:function(){n["enabled"]=!1,l.destroyArray&&(l.destroyArray.forEach((function(e){return e()})),l.destroyArray.length=0),t&&!l.isSaved&&(t.destroy(),t=void 0)},changeColor:function(e){var n=e.split("(")[1].split(")")[0].split(","),o=[];n.forEach((function(e,t){3==t?o.push(Number(e)):o.push(Number(e)/255)})),t.color=o},changeOutlineColor:function(e){var n=e.split("(")[1].split(")")[0].split(","),o=[];n.forEach((function(e,t){3==t?o.push(Number(e)):o.push(Number(e)/255)})),t.outlineColor=o},save:function(){l.isSaved=!0;var n=new XE.SceneTree.Leaf(t);e.sceneTree.root.children.push(n)}};return Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,s.init();case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){s.del()})),Object(p["a"])(Object(p["a"])({},Object(o["toRefs"])(l)),s)}});n("b6c3");const ir=P()(rr,[["render",ar],["__scopeId","data-v-498f1540"]]);var cr=ir;cr.install=function(e){e.component(cr.name,cr)};var lr=cr,sr={class:"tool-panel-base",style:{width:"296px"}},ur={class:"tool-panel-button"},dr=Object(o["createTextVNode"])("编辑"),pr=Object(o["createTextVNode"])("保存");function mr(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-input"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-slider"),u=Object(o["resolveComponent"])("el-switch"),d=Object(o["resolveComponent"])("el-col"),p=Object(o["resolveComponent"])("el-row"),m=Object(o["resolveComponent"])("el-color-picker"),b=Object(o["resolveComponent"])("el-form"),f=Object(o["resolveComponent"])("el-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",sr,[Object(o["createVNode"])(b,{ref:"formRef",model:e.form,"label-width":"50px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"名称"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.form.name,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.form.name=t}),size:"small",placeholder:"请输入图层名称"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"宽度"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.form.width,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.width=t}),min:1,max:50,step:1,"show-input":"","show-input-controls":!1},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(p,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{span:12},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"边框"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:e.form.outlineshow,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.outlineshow=t}),size:"small"},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(o["createVNode"])(d,{span:12},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"贴地"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:e.form.ground,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.ground=t}),size:"small"},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(p,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{span:12},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"填充"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{modelValue:e.color,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.color=t}),"show-alpha":"",onActiveChange:e.changeColor},null,8,["modelValue","onActiveChange"])]})),_:1})]})),_:1}),Object(o["createVNode"])(d,{span:12},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"边框"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{modelValue:e.outlineColor,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.outlineColor=t}),"show-alpha":"",onActiveChange:e.changeOutlineColor},null,8,["modelValue","onActiveChange"])]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["model"]),Object(o["createElementVNode"])("div",ur,[Object(o["createVNode"])(f,{size:"small",onClick:t[6]||(t[6]=function(t){return e.editing1()})},{default:Object(o["withCtx"])((function(){return[dr]})),_:1}),Object(o["createVNode"])(f,{size:"small",onClick:e.save},{default:Object(o["withCtx"])((function(){return[pr]})),_:1},8,["onClick"])])])}var br=Object(o["defineComponent"])({name:"EpsplanetDoubleArrow",setup:function(){var e,t,n,a=Object(o["getCurrentInstance"])(),r=a.proxy,i=r,l=Object(o["reactive"])({color:"rgba(0,255,0,0.1)",outlineColor:"rgba(0,255,0,1)",creating:!1,editing:!1,isSaved:!1,formRef:"",destroyArray:[""],form:{name:"",show:!0,outlineshow:!0,ground:!0,width:2}}),s={editing1:function(){l.editing?l.editing=!1:l.editing=!0},init:function(){t=new XE.Obj.Plots.GeoDoubleArrow(e),t.creating=!0,l.destroyArray=[],n=new XE.Obj.Plots.GeoPin(e),l.destroyArray.push(XE.MVVM.bind(i,"form.name",t,"name"),XE.MVVM.bind(i,"editing",t,"editing"),XE.MVVM.bind(i,"form.outlineshow",t,"outlineShow"),XE.MVVM.bind(i,"form.ground",t,"ground"),XE.MVVM.bind(i,"form.width",t,"outlineWidth"),XE.MVVM.watch((function(){return Object(c["a"])(t.positions)}),(function(){n.position=t.positions[t.positions.length-1],1==t.positions.length?n.innerHTML='<div style="cursor:pointer;position:absolute;width:300px;left:6px;line-height:15px;color:white;"><span style="padding:2px;border-radius:2px;text-stroke:2px #000;font-size:14px;color:#ffffff;background-color:rgba(50,50,50,0.5)">点击左键确定双箭头左底点</span></div>':2==t.positions.length?n.innerHTML='<div style="cursor:pointer;position:absolute;width:300px;left:6px;line-height:15px;color:white;"><span style="padding:2px;border-radius:2px;text-stroke:2px #000;font-size:14px;color:#ffffff;background-color:rgba(50,50,50,0.5)">点击左键确定双箭头右底点</span></div>':3==t.positions.length&&(n.enabled=!1)})))},del:function(){n["enabled"]=!1,l.destroyArray&&(l.destroyArray.forEach((function(e){return e()})),l.destroyArray.length=0),t&&!l.isSaved&&(t.destroy(),t=void 0)},changeColor:function(e){var n=e.split("(")[1].split(")")[0].split(","),o=[];n.forEach((function(e,t){3==t?o.push(Number(e)):o.push(Number(e)/255)})),t.color=o},changeOutlineColor:function(e){var n=e.split("(")[1].split(")")[0].split(","),o=[];n.forEach((function(e,t){3==t?o.push(Number(e)):o.push(Number(e)/255)})),t.outlineColor=o},save:function(){l.isSaved=!0;var n=new XE.SceneTree.Leaf(t);e.sceneTree.root.children.push(n)}};return Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,s.init();case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){s.del()})),Object(p["a"])(Object(p["a"])({},Object(o["toRefs"])(l)),s)}});const fr=P()(br,[["render",mr]]);var hr=fr;hr.install=function(e){e.component(hr.name,hr)};var jr=hr,Or={class:"tool-panel-base",style:{width:"296px"}},gr={class:"tool-panel-button"},vr=Object(o["createTextVNode"])("编辑"),wr=Object(o["createTextVNode"])("保存");function Cr(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-input"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-slider"),u=Object(o["resolveComponent"])("el-switch"),d=Object(o["resolveComponent"])("el-col"),p=Object(o["resolveComponent"])("el-row"),m=Object(o["resolveComponent"])("el-form"),b=Object(o["resolveComponent"])("el-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createElementVNode"])("div",Or,[Object(o["createVNode"])(m,{ref:"formRef",model:e.form,"label-width":"50px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"名称"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.form.name,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.form.name=t}),size:"small",placeholder:"请输入图层名称"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"速度"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.form.animationSpeed,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.animationSpeed=t}),min:1,max:100,step:1,"show-input":"","show-input-controls":!1},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"强度"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.form.specularIntensity,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.specularIntensity=t}),min:.1,max:500,step:1,"show-input":"","show-input-controls":!1},null,8,["modelValue","min"])]})),_:1}),Object(o["createVNode"])(l,{label:"振幅"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.form.amplitude,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.amplitude=t}),min:1,max:100,step:1,"show-input":"","show-input-controls":!1},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(p,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{span:8},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"水面"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:e.form.show,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.show=t}),size:"small"},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(o["createVNode"])(d,{span:8},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"边框"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:e.form.outlineshow,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.form.outlineshow=t}),size:"small"},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(o["createVNode"])(d,{span:8},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"贴地"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:e.form.ground,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.form.ground=t}),size:"small"},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["model"])]),Object(o["createElementVNode"])("div",gr,[Object(o["createVNode"])(b,{size:"small",onClick:t[7]||(t[7]=function(t){return e.editing=!e.editing})},{default:Object(o["withCtx"])((function(){return[vr]})),_:1}),Object(o["createVNode"])(b,{size:"small",onClick:t[8]||(t[8]=function(t){return e.save()})},{default:Object(o["withCtx"])((function(){return[wr]})),_:1})])],64)}var Vr=Object(o["defineComponent"])({name:"EpsplanetWater",setup:function(){var e,t,n,a=Object(o["getCurrentInstance"])(),r=a.proxy,i=r,l=Object(o["reactive"])({creating:!1,editing:!1,isSaved:!1,formRef:"",destroyArray:[""],form:{name:"",animationSpeed:10,specularIntensity:.5,sliderValue3:2,show:!0,outlineshow:!0,ground:!0,amplitude:2}}),s={init:function(){n=new XE.Obj.Plots.GeoPin(e);var o=new XE.Obj.Water(e);console.log(o),t=o,o.creating=!0,l.destroyArray=[];var a=[0,0,0];l.destroyArray.push(XE.MVVM.bind(i,"form.name",o,"name"),XE.MVVM.bind(i,"editing",o,"editing"),XE.MVVM.bind(i,"form.show",o,"show"),XE.MVVM.bind(i,"form.outlineshow",o.outline,"show"),XE.MVVM.bind(i,"form.animationSpeed",o,"animationSpeed"),XE.MVVM.bind(i,"form.amplitude",o,"amplitude"),XE.MVVM.bind(i,"form.specularIntensity",o,"specularIntensity"),XE.MVVM.bind(i,"form.ground",o,"ground"),XE.MVVM.watch((function(){return Object(c["a"])(o.positions)}),(function(){o.positions.forEach((function(e,t){a[t]=e})),2==o.positions.length?(n.position=a,n.innerHTML='<div style="cursor:pointer;position:absolute;width:300px;left:6px;line-height:15px;color:white;"><span style="padding:2px;border-radius:2px;text-stroke:2px #000;font-size:14px;color:#ffffff;background-color:rgba(50,50,50,0.5)">点击左键绘制水面,按住shift+右键完成绘制</span></div>'):n.enabled=!1}))),console.log(l.destroyArray)},del:function(){n.enabled=!1,l.destroyArray&&(l.destroyArray.forEach((function(e){return e()})),l.destroyArray.length=0),t&&!l.isSaved&&t.destroy(),t=void 0},save:function(){l.isSaved=!0;var n=new XE.SceneTree.Leaf(t);console.log(t),e.sceneTree.root.children.push(n)}};return Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,s.init();case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){s.del()})),Object(p["a"])(Object(p["a"])({},s),Object(o["toRefs"])(l))}});const xr=P()(Vr,[["render",Cr]]);var yr=xr;yr.install=function(e){e.component(yr.name,yr)};var Er=yr,Nr={class:"epsplanet-panel-base modelbase",style:{width:"296px"}},_r={class:"ImgDivFather"},kr=["onClick"],Mr=["src","alt","title"],Tr={style:{"margin-bottom":"10px",position:"relative"}},Pr=Object(o["createElementVNode"])("span",{class:"spanSlider"},"名称:",-1),Sr=Object(o["createElementVNode"])("br",null,null,-1),zr=Object(o["createElementVNode"])("span",{class:"spanSlider"},"缩放:",-1),Rr=Object(o["createElementVNode"])("span",{class:"spanSlider"},"旋转:",-1),Br=Object(o["createElementVNode"])("span",{class:"spanSwitch"},"动画:",-1),Xr=Object(o["createElementVNode"])("span",{class:"spanSwitch"},"贴地:",-1),Lr={class:"tool-panel-button"},Ur=Object(o["createTextVNode"])("变更位置"),Ar=Object(o["createTextVNode"])("平移"),Dr=Object(o["createTextVNode"])("取消"),Ir=Object(o["createTextVNode"])("保存");function Gr(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-option"),l=Object(o["resolveComponent"])("el-select"),s=Object(o["resolveComponent"])("el-scrollbar"),u=Object(o["resolveComponent"])("el-input"),d=Object(o["resolveComponent"])("el-slider"),p=Object(o["resolveComponent"])("el-switch"),m=Object(o["resolveComponent"])("el-button");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{height:"550px"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",Nr,[Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(l,{modelValue:e.selectVal,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.selectVal=t}),placeholder:"请选择","popper-class":"tool-panel-popper"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.classificationName,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:e,label:e,value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]),Object(o["createElementVNode"])("div",_r,[Object(o["createVNode"])(s,{height:"312px"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.datas[e.selectVal],(function(t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"imgDiv",key:t,onClick:function(n){return e.getModel(t)}},[Object(o["createElementVNode"])("img",{src:t.image,alt:t.name,title:t.name},null,8,Mr),Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(t.name),1)],8,kr)})),128))]})),_:1})]),Object(o["createElementVNode"])("div",Tr,[Pr,Object(o["createVNode"])(u,{modelValue:e.modelName,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.modelName=t}),placeholder:"请输入名称"},null,8,["modelValue"]),Sr,zr,Object(o["createVNode"])(d,{modelValue:e.scale,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.scale=t}),min:.1,max:50,step:.1,"show-input":"","show-input-controls":!1},null,8,["modelValue","min","step"]),Rr,Object(o["createVNode"])(d,{modelValue:e.rotation,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.rotation=t}),min:-3.14,max:3.14,step:.01,"show-input":"","show-input-controls":!1},null,8,["modelValue","min","max","step"]),Br,Object(o["createVNode"])(p,{onChange:t[4]||(t[4]=function(t){return e.changeAnimation(t)}),modelValue:e.isAnimation,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.isAnimation=t}),"active-color":"#13ce66","inactive-color":"#ff4949",disabled:!e.modelAnimation},null,8,["modelValue","disabled"]),Xr,Object(o["createVNode"])(p,{onChange:t[6]||(t[6]=function(t){return e.changeHeightReference(t)}),modelValue:e.isGround,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.isGround=t}),"active-color":"#13ce66","inactive-color":"#ff4949"},null,8,["modelValue"])]),Object(o["createElementVNode"])("div",Lr,[Object(o["createVNode"])(m,{size:"small",onClick:t[8]||(t[8]=function(t){return e.creating=!0})},{default:Object(o["withCtx"])((function(){return[Ur]})),_:1}),Object(o["createVNode"])(m,{size:"small",onClick:t[9]||(t[9]=function(t){return e.positionEditing=!0})},{default:Object(o["withCtx"])((function(){return[Ar]})),_:1}),Object(o["createVNode"])(m,{size:"small",onClick:e.del},{default:Object(o["withCtx"])((function(){return[Dr]})),_:1},8,["onClick"]),Object(o["createVNode"])(m,{size:"small",onClick:e.save},{default:Object(o["withCtx"])((function(){return[Ir]})),_:1},8,["onClick"])])])]})),_:1})}n("b64b");var Hr=Object(o["defineComponent"])({name:"EpsplanetModelBase",props:[],setup:function(e){var t,n,a,r,i=Object(o["getCurrentInstance"])(),c=i.proxy,l=c,s=Object(o["reactive"])({datas:{},dataUrl:"http://jojo1986.cn:2020/data/models/modellist.json",classificationName:[],selectVal:"",creating:!1,positionEditing:!1,rotation:0,rotations:[0,0,0],scale:1,_disposers:[],isAnimation:!0,modelAnimation:!1,isGround:!1,heightReference:"HeightReference.RELATIVE_TO_GROUND",modelName:void 0,_modelCzm:n,saveAnimationCzm:r});function u(){t.interaction.picking.enabled=!0,ve.a.get(s.dataUrl).then((function(e){200==e.status&&"OK"==e.statusText&&(s.datas=e.data,s.classificationName=Object.keys(e.data),s.selectVal=s.classificationName[0])})).catch((function(e){console.log(e)})),t.modelCollection&&t.modelCollection.forEach((function(e){e.czmObject.onclick=function(){f(),j(e.czmObject)}}))}function d(e){if(f(),a=!1,s._modelCzm=new XE.Obj.Model(t),console.log(s._modelCzm),s._modelCzm.distanceDisplayCondition=[0,7050454],s._modelCzm.heightReference=s.isGround?"HeightReference.CLAMP_TO_GROUND":"HeightReference.RELATIVE_TO_GROUND",s._modelCzm.url=e.style.url,e.hasOwnProperty("animation"))if(s.modelAnimation=!0,s._modelCzm.animation={play:!1},s._modelCzm&&e.animation.play){s._modelCzm.animation.play=!0,s.isAnimation=!0;var n=setTimeout((function(){s._modelCzm.playAnimation(),clearTimeout(n)}),100)}else s.isAnimation=!1;else s.modelAnimation=!1,s.isAnimation=!1;s._disposers.push(XE.MVVM.bind(l,"creating",s._modelCzm,"creating"),XE.MVVM.bind(l,"positionEditing",s._modelCzm,"positionEditing"),XE.MVVM.bind(l,"rotations",s._modelCzm,"xbsjRotation"),XE.MVVM.bind(l,"heightReference",s._modelCzm,"heightReference"),XE.MVVM.bind(l,"scale",s._modelCzm,"scale"),XE.MVVM.watch((function(){s.creating=s._modelCzm.creating,s.positionEditing=s._modelCzm.positionEditing,s.scale=s._modelCzm.scale}))),s._modelCzm.creating=!0}function m(e){s.heightReference=e?"HeightReference.CLAMP_TO_GROUND":"HeightReference.RELATIVE_TO_GROUND"}function b(e){e?(s._modelCzm&&(s._modelCzm.playAnimation(),s._modelCzm.animation.play=!0),s.saveAnimationCzm&&a&&(s.saveAnimationCzm.playAnimation(),s.saveAnimationCzm.animation.play=!0)):(s._modelCzm&&(s._modelCzm.stopAnimation(),s._modelCzm.animation.play=!1),s.saveAnimationCzm&&a&&(s.saveAnimationCzm.stopAnimation(),s.saveAnimationCzm.animation.play=!1))}function f(){s._disposers&&(s._disposers.forEach((function(e){return e()})),s._disposers.length=0),s._modelCzm&&(s._modelCzm.destroy(),s._modelCzm=void 0)}function j(e){if(a=!0,s.saveAnimationCzm=e,s.saveAnimationCzm.hasOwnProperty("animation"))if(s.modelAnimation=!0,s.saveAnimationCzm&&s.saveAnimationCzm.animation.play){var t=setTimeout((function(){s.saveAnimationCzm.playAnimation(),clearTimeout(t)}),10);s.isAnimation=!0}else s.isAnimation=!1;else s.modelAnimation=!1,s.isAnimation=!1;s.scale=s.saveAnimationCzm.scale,s.rotation=s.saveAnimationCzm.xbsjRotation[0],s._disposers.push(XE.MVVM.bind(l,"creating",s.saveAnimationCzm,"creating"),XE.MVVM.bind(l,"positionEditing",s.saveAnimationCzm,"positionEditing"),XE.MVVM.bind(l,"rotations",s.saveAnimationCzm,"xbsjRotation"),XE.MVVM.bind(l,"heightReference",s.saveAnimationCzm,"heightReference"),XE.MVVM.bind(l,"scale",s.saveAnimationCzm,"scale"),XE.MVVM.watch((function(){s.creating=s.saveAnimationCzm.creating,s.positionEditing=s.saveAnimationCzm.positionEditing,s.scale=s.saveAnimationCzm.scale})))}function O(){s._modelCzm.name=s.modelName,s.modelName=void 0;var e=s._modelCzm.toAllJSON(),n=new XE.Obj.Model(t);n.xbsjFromJSON(e),s.saveAnimationCzm=n,n.onclick=function(){f(),j(n)};var o=new XE.SceneTree.Leaf(s.saveAnimationCzm);t.sceneTree.root.children.push(o),v(o);var a=setTimeout((function(){f(),s.isAnimation&&s.saveAnimationCzm.hasOwnProperty("animation")&&s.saveAnimationCzm.animation.play&&s.saveAnimationCzm.playAnimation(),clearTimeout(a)}),10)}function v(e){t.modelCollection||(t.modelCollection=[]),t.modelCollection.push(e)}Object(o["watch"])((function(){return s.rotation}),(function(e,t){s.rotations[0]=e})),Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g.instance.getEarth();case 2:t=e.sent,u();case 4:case"end":return e.stop()}}),e)})))),Object(o["onBeforeUnmount"])((function(){t.interaction.picking.enabled=!1,f()}));var w=Object(o["toRefs"])(s);return Object(p["a"])(Object(p["a"])({},w),{},{init:u,getModel:d,changeHeightReference:m,changeAnimation:b,save:O,del:f})}});const Fr=P()(Hr,[["render",Gr]]);var Wr=Fr;Wr.install=function(e){e.component(Wr.name,Wr)};var qr=Wr,Kr={class:"epsplanet-panel-base",style:{width:"310px"}},Yr={style:{float:"right"}},Jr=Object(o["createElementVNode"])("span",{style:{"padding-left":"10px",float:"left","margin-right":"10px",color:"#606266"}},"颜色",-1),Qr={class:"tool-panel-button"},Zr=Object(o["createTextVNode"])("创建"),$r=Object(o["createTextVNode"])("保存");function ei(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-input"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-slider"),u=Object(o["resolveComponent"])("el-option"),d=Object(o["resolveComponent"])("el-select"),p=Object(o["resolveComponent"])("el-color-picker"),m=Object(o["resolveComponent"])("el-form"),b=Object(o["resolveComponent"])("el-button"),f=Object(o["resolveComponent"])("el-scrollbar");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Kr,[Object(o["createVNode"])(f,{height:"202px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{ref:"form","label-width":"78px",inline:!0},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"名称"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{style:{width:"199px"},modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.name=t}),placeholder:"请输入15个以内字符",size:"small",maxlength:"15","show-word-limit":""},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"拉伸"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.stretchRadius,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.stretchRadius=t}),min:.1,max:130,style:{width:"200px"},"show-input":"","show-input-controls":!1,onChange:t[2]||(t[2]=function(t){return e.changeSize(t)})},null,8,["modelValue","min"])]})),_:1}),Object(o["createVNode"])(l,{label:"类型"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{style:{width:"120px","margin-left":"0px"},modelValue:e.type,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.type=t}),placeholder:"请选择类型",size:"small",onChange:t[4]||(t[4]=function(t){return e.changeType(t)})},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.typeOptions,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"]),Object(o["createElementVNode"])("div",Yr,[Jr,Object(o["createVNode"])(p,{modelValue:e.color,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.color=t}),onChange:e.changeColor,"show-alpha":""},null,8,["modelValue","onChange"])])]})),_:1})]})),_:1},512),Object(o["createElementVNode"])("div",Qr,[Object(o["createVNode"])(b,{size:"small",onClick:e.create},{default:Object(o["withCtx"])((function(){return[Zr]})),_:1},8,["onClick"]),Object(o["createVNode"])(b,{size:"small",onClick:e.save},{default:Object(o["withCtx"])((function(){return[$r]})),_:1},8,["onClick"])])]})),_:1})])}var ti=Object(o["defineComponent"])({name:"EpsplanetThreeDimensional",props:[],setup:function(){var e,t,n,a,r=Object(o["getCurrentInstance"])(),i=r.proxy,c=i,l=!1,s={},u="",d={},m="",b={},f=Object(o["reactive"])({name:"立体形对象",stretchRadius:120,color:"rgba(0,255,0,1)",type:"动态圆",typeOptions:[{value:"动态圆",label:"动态圆"},{value:"动态辐射圈",label:"动态辐射圈"},{value:"光柱",label:"光柱"}],bindList:[{name:"name"}]});Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent;case 3:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){V()}));var j=function(){n=new XE.Obj.Plots.GeoPin(e),n.innerHTML='<div style="cursor:pointer;position:absolute;width:300px;left:6px;line-height:15px;color:white;"><span style="padding:2px;border-radius:2px;text-stroke:2px #000;font-size:14px;color:#ffffff;background-color:rgba(50,50,50,0.5)">点击左键确定中心点</span></div>',n.creating=!0,t=new XE.Obj.CustomPrimitive(e),t.name=f.name,window["threeDimensional"]=t,window["pin"]=n,a=new Cesium.ScreenSpaceEventHandler(e.czm.viewer.scene.canvas),a.setInputAction((function(e){var o=n.position[0]/Math.PI*180,a=n.position[1]/Math.PI*180,r=n.position[2];u="\n                p._angle += 1;\n                if (p._angle > 360.0) {\n                    p._angle = 0.0;\n                }\n                const angle = p._angle;\n\n                p.drawCanvas(ctx => {\n                    ctx.clearRect(0, 0, 256, 256);\n\n                    ctx.save();\n\n                    ctx.translate(128, 128);\n                    ctx.rotate(-angle * Math.PI / 180.0);\n\n                    // 状态设置\n                    ctx.strokeStyle = '"+f.color+"'; \n                    ctx.setLineDash([8, 8]);\n                    ctx.lineWidth = 3;\n                    \n                    // 大圆\n                    ctx.beginPath();\n                    ctx.arc(0, 0, "+f.stretchRadius+", 0, Math.PI*2, true);\n                    ctx.stroke();\n\n                    // 小圆\n                    // ctx.beginPath();\n                    // ctx.arc(0, 0, 64, 0, Math.PI*2, true);\n                    // ctx.stroke();\n\n                    p._drawArrow(ctx, 0, 0, "+f.stretchRadius+", 0, 30, 10, 3, '"+f.color+"');\n\n                    ctx.font = '12px Microsoft YaHei';\n                    ctx.fillStyle = '"+f.color+"';\n                    ctx.fillText('5公里', 40, -5);\n\n                    ctx.restore();\n                });\n            ",m="\n                    p.canvasWidth = 512;\n                    p.canvasHeight = 512;\n                    p.drawCanvas(ctx => {\n                        ctx.clearRect(0, 0, 512, 512);\n\n                        ctx.strokeStyle = 'rgb(255, 255, 255)';\n                        ctx.setLineDash([30, 30]);\n                        ctx.lineWidth = 5;\n                        ctx.arc(256, 256, "+f.stretchRadius+", 0, Math.PI * 2, true);\n                        ctx.stroke();\n                    });\n                ",s={name:f.name,position:[o,a,r]["xeptr"],positions:XE.Obj.CustomPrimitive.Geometry.unitSquare.positions,sts:XE.Obj.CustomPrimitive.Geometry.unitSquare.sts,indices:XE.Obj.CustomPrimitive.Geometry.unitSquare.indices,scale:[100,100,1],renderState:XE.Obj.CustomPrimitive.getRenderState(!0,!0),canvasWidth:256,canvasHeight:256,autoRegisterEditing:!0,evalString:"\n                if (p._drawArrow) {\n                    return;\n                }\n\n                // ctx：Canvas绘图环境\n                // fromX, fromY：起点坐标（也可以换成p1，只不过它是一个数组）\n                // toX, toY：终点坐标 (也可以换成p2，只不过它是一个数组)\n                // theta：三角斜边一直线夹角\n                // headlen：三角斜边长度\n                // width：箭头线宽度\n                // color：箭头颜色\n                function drawArrow(ctx, fromX, fromY, toX, toY, theta, headlen, width, color) {\n\n                    theta = typeof (theta) != 'undefined' ? theta : 30;\n                    headlen = typeof (theta) != 'undefined' ? headlen : 10;\n                    width = typeof (width) != 'undefined' ? width : 1;\n                    color = typeof (color) != 'color' ? color : '#000';\n\n                    // 计算各角度和对应的P2,P3坐标\n                    var angle = Math.atan2(fromY - toY, fromX - toX) * 180 / Math.PI,\n                        angle1 = (angle + theta) * Math.PI / 180,\n                        angle2 = (angle - theta) * Math.PI / 180,\n                        topX = headlen * Math.cos(angle1),\n                        topY = headlen * Math.sin(angle1),\n                        botX = headlen * Math.cos(angle2),\n                        botY = headlen * Math.sin(angle2);\n\n                    ctx.save();\n                    ctx.beginPath();\n\n                    var arrowX = fromX - topX,\n                        arrowY = fromY - topY;\n\n                    ctx.moveTo(arrowX, arrowY);\n                    ctx.moveTo(fromX, fromY);\n                    ctx.lineTo(toX, toY);\n                    arrowX = toX + topX;\n                    arrowY = toY + topY;\n                    ctx.moveTo(arrowX, arrowY);\n                    ctx.lineTo(toX, toY);\n                    arrowX = toX + botX;\n                    arrowY = toY + botY;\n                    ctx.lineTo(arrowX, arrowY);\n                    ctx.strokeStyle = color;\n                    ctx.lineWidth = width;\n                    ctx.stroke();\n                    ctx.restore();\n                }\n\n                p._drawArrow = drawArrow;\n                p._angle = 0;\n            ",preUpdateEvalString:u},d={name:f.name,position:[o,a,r]["xeptr"],positions:XE.Obj.CustomPrimitive.Geometry.unitSquare.positions,sts:XE.Obj.CustomPrimitive.Geometry.unitSquare.sts,indices:XE.Obj.CustomPrimitive.Geometry.unitSquare.indices,scale:[100,100,1],renderState:XE.Obj.CustomPrimitive.getRenderState(!0,!0),canvasWidth:512,canvasHeight:512,autoRegisterEditing:!0,evalString:m,preUpdateEvalString:"\n                    if (typeof p.dAngle === 'undefined') p.dAngle = 0.0;\n                    if (typeof p.dt === 'undefined') p.dt = 0.01;\n\n                    p.dAngle += 10.0;\n                    if (p.dAngle > 360.0) {\n                        p.dAngle = 0.0;\n                    }\n                    p.rotation[0] = p.dAngle / 180.0 * Math.PI;\n\n                    p.dt += 0.02;\n                    if (p.dt > 1.0) p.dt = 0.01;\n\n                    p.scale[0] = 50 * p.dt;\n                    p.scale[1] = 50 * p.dt;\n                "},b={name:f.name,position:[o,a,r]["xeptr"],positions:[2,0,0,1.0000000000000002,1.7320508075688772,0,-.9999999999999996,1.7320508075688774,0,-2,24492935982947064e-32,0,-1.0000000000000009,-1.732050807568877,0,.9999999999999987,-1.732050807568878,0,2,-4898587196589413e-31,0,.3,0,1,.15000000000000002,.25980762113533157,1,-.14999999999999994,.2598076211353316,1,-.3,36739403974420595e-33,1,-.15000000000000013,-.2598076211353315,1,.1499999999999998,-.2598076211353317,1,.3,-7347880794884119e-32,1],sts:[0,0,.16666666666666666,0,.3333333333333333,0,.5,0,.6666666666666666,0,.8333333333333334,0,1,0,0,1,.16666666666666666,1,.3333333333333333,1,.5,1,.6666666666666666,1,.8333333333333334,1,1,1],indices:[0,1,7,1,8,7,1,2,8,2,9,8,2,3,9,3,10,9,3,4,10,4,11,10,4,5,11,5,12,11,5,6,12,6,13,12],scale:[f.stretchRadius/50,f.stretchRadius/50,2*f.stretchRadius],renderState:XE.Obj.CustomPrimitive.getRenderState(!0,!0),canvasWidth:1,canvasHeight:0,autoRegisterEditing:!0,fragmentShaderSource:"\n                varying vec3 v_positionEC;\n                varying vec3 v_normalEC;\n                varying vec2 v_st;\n                varying vec4 v_color;\n                uniform sampler2D u_image;\n                uniform vec4 u_color;\n                void main()\n                {\n                    float powerRatio = fract(czm_frameNumber / 30.0) + 1.0;\n                    float alpha = pow(1.0 - v_st.t, powerRatio);\n                    gl_FragColor = vec4(u_color.rgb, alpha*u_color.a);\n                }\n                ",evalString:"",preUpdateEvalString:""};var i="动态圆"==f.type?s:"动态辐射圈"==f.type?d:b;t.xbsjFromJSON(i),w(),n.enabled=!1}),Cesium.ScreenSpaceEventType.LEFT_CLICK),f.bindList.forEach((function(e){e.unbind=XE.MVVM.bind(c,e.name,t,e.name)})),window["threeDimensional"]=t},O=function(e){t.xbsjFromJSON("动态圆"==e?s:"动态辐射圈"==e?d:b),w(),v(f.stretchRadius)},v=function(e){u="\n                p._angle += 1;\n                if (p._angle > 360.0) {\n                    p._angle = 0.0;\n                }\n                const angle = p._angle;\n\n                p.drawCanvas(ctx => {\n                    ctx.clearRect(0, 0, 256, 256);\n\n                    ctx.save();\n\n                    ctx.translate(128, 128);\n                    ctx.rotate(-angle * Math.PI / 180.0);\n\n                    // 状态设置\n                    ctx.strokeStyle = '"+f.color+"'; \n                    ctx.setLineDash([8, 8]);\n                    ctx.lineWidth = 3;\n                    \n                    // 大圆\n                    ctx.beginPath();\n                    ctx.arc(0, 0, "+f.stretchRadius+", 0, Math.PI*2, true);\n                    ctx.stroke();\n\n                    // 小圆\n                    // ctx.beginPath();\n                    // ctx.arc(0, 0, 64, 0, Math.PI*2, true);\n                    // ctx.stroke();\n\n                    p._drawArrow(ctx, 0, 0, "+f.stretchRadius+", 0, 30, 10, 3, '"+f.color+"');\n\n                    ctx.font = '12px Microsoft YaHei';\n                    ctx.fillStyle = '"+f.color+"';\n                    ctx.fillText('5公里', 40, -5);\n\n                    ctx.restore();\n                });\n            ",m="\n                    p.canvasWidth = 512;\n                    p.canvasHeight = 512;\n                    p.drawCanvas(ctx => {\n                        ctx.clearRect(0, 0, 512, 512);\n\n                        ctx.strokeStyle = 'rgb(255, 255, 255)';\n                        ctx.setLineDash([30, 30]);\n                        ctx.lineWidth = 5;\n                        ctx.arc(256, 256, "+f.stretchRadius+", 0, Math.PI * 2, true);\n                        ctx.stroke();\n                    });\n                ","光柱"==f.type&&(t.scale=[e/50,e/50,2*e]),"动态圆"==f.type&&(t.preUpdateEvalString=u),"动态辐射圈"==f.type&&(t.evalString=m)},w=function(){u="\n                p._angle += 1;\n                if (p._angle > 360.0) {\n                    p._angle = 0.0;\n                }\n                const angle = p._angle;\n\n                p.drawCanvas(ctx => {\n                    ctx.clearRect(0, 0, 256, 256);\n\n                    ctx.save();\n\n                    ctx.translate(128, 128);\n                    ctx.rotate(-angle * Math.PI / 180.0);\n\n                    // 状态设置\n                    ctx.strokeStyle = '"+f.color+"'; \n                    ctx.setLineDash([8, 8]);\n                    ctx.lineWidth = 3;\n                    \n                    // 大圆\n                    ctx.beginPath();\n                    ctx.arc(0, 0, "+f.stretchRadius+", 0, Math.PI*2, true);\n                    ctx.stroke();\n\n                    // 小圆\n                    // ctx.beginPath();\n                    // ctx.arc(0, 0, 64, 0, Math.PI*2, true);\n                    // ctx.stroke();\n\n                    p._drawArrow(ctx, 0, 0, "+f.stretchRadius+", 0, 30, 10, 3, '"+f.color+"');\n\n                    ctx.font = '12px Microsoft YaHei';\n                    ctx.fillStyle = '"+f.color+"';\n                    ctx.fillText('5公里', 40, -5);\n\n                    ctx.restore();\n                });\n            ";var e=[];e=e.concat(C(f.color)),t.color=e,"动态圆"==f.type&&
//!!!!!!!这里有个bug,changColor函数比监听函数先执行，导致这里的Circle_preUpdateEvalString来不及更新，
setTimeout((function(){t.preUpdateEvalString=u}),100)},C=function(e){var t=e.split("(")[1].split(")")[0].split(","),n=[];return t.forEach((function(e,t){3==t?n.push(Number(e)):n.push(Number(e)/255)})),n},V=function(){a&&(a=a&&a.destroy()),f.bindList&&(f.bindList.forEach((function(e){e.unbind()})),f.bindList.length=0),t&&!l&&(t.destroy(),t=void 0),n&&(n.destroy(),n=void 0)},x=function(){l=!0;var n=new XE.SceneTree.Leaf(t);e.sceneTree.root.children.push(n)},y=Object(o["toRefs"])(f);return Object(p["a"])(Object(p["a"])({},y),{},{create:j,changeType:O,changeSize:v,changeColor:w,transColorToCesium:C,save:x,del:V})}});const ni=P()(ti,[["render",ei]]);var oi=ni;oi.install=function(e){e.component(oi.name,oi)};var ai=oi,ri=[po,Co,Po,Do,Zo,la,ga,za,Ga,Za,lr,jr,Er,qr,ai],ii={class:"epsplanet-panel-base",style:{width:"296px"}};function ci(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-slider"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-form");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ii,[Object(o["createVNode"])(s,{ref:"form","label-width":"70px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:e.title},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.aroundTime,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.aroundTime=t}),min:e.min,max:e.max,"show-input":"","show-input-controls":!1},null,8,["modelValue","min","max"])]})),_:1},8,["label"])]})),_:1},512)])}var li=Object(o["defineComponent"])({name:"EpsplanetCloud",props:[],setup:function(){var e,t=Object(o["reactive"])({title:"环绕周期",aroundTime:120,min:1,max:200});Object(o["watch"])((function(){return t.aroundTime}),(function(t,n){e.weather.cloud.aroundTime=t})),Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,e.weather.cloud.enabled=!0;case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){e.weather.cloud.enabled=!1}));var n=Object(o["toRefs"])(t);return Object(p["a"])({},n)}});const si=P()(li,[["render",ci]]);var ui=si;ui.install=function(e){e.component(ui.name,ui)};var di=ui,pi={class:"epsplanet-panel-base",style:{width:"296px"}};function mi(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-slider"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-form");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",pi,[Object(o["createVNode"])(s,{ref:"form","label-width":"70px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:e.title},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.alpha,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.alpha=t}),min:e.min,max:e.max,step:e.step,"show-input":"","show-input-controls":!1},null,8,["modelValue","min","max","step"])]})),_:1},8,["label"])]})),_:1},512)])}var bi=Object(o["defineComponent"])({name:"EpsplanetSnow",setup:function(){var e,t=Object(o["reactive"])({title:"积雪程度",alpha:.6,min:0,max:1,step:.1,emissionRate:.5});return Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,e.weather.snowPostProcess.enabled=!0;case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){e.weather.snowPostProcess.enabled=!1})),Object(o["watch"])((function(){return t.alpha}),(function(t,n){e.weather.snowPostProcess.alpha=t})),Object(p["a"])({},Object(o["toRefs"])(t))}});const fi=P()(bi,[["render",mi]]);var hi=fi;hi.install=function(e){e.component(hi.name,hi)};var ji=hi,Oi=Object(o["defineComponent"])({name:"EpsplanetRain",props:[],setup:function(){var e;Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,e.weather.rainPostProcess.enabled=!0;case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){e.weather.rainPostProcess.enabled=!1}))}});const gi=Oi;var vi=gi;vi.install=function(e){e.component(vi.name,vi)};var wi=vi,Ci={class:"epsplanet-panel-base",style:{width:"296px"}};function Vi(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-slider"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-form");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ci,[Object(o["createVNode"])(s,{ref:"form","label-width":"70px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:e.title},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.gradations,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.gradations=t}),min:e.min,max:e.max,step:e.step,"show-input":"","show-input-controls":!1},null,8,["modelValue","min","max","step"])]})),_:1},8,["label"])]})),_:1},512)])}var xi={name:"EpsplanetBlackwhite",props:[],setup:function(){Object(o["getCurrentInstance"])();var e,t=Object(o["reactive"])({title:"黑白程度",gradations:5,min:1,max:20,step:.1});Object(o["watch"])((function(){return t.gradations}),(function(t,n){e.postProcess.blackAndWhite.gradations=t})),Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,e.postProcess.blackAndWhite.enabled=!0;case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){e.postProcess.blackAndWhite.enabled=!1}));var n=Object(o["toRefs"])(t);return Object(p["a"])({},n)}};const yi=P()(xi,[["render",Vi]]);var Ei=yi;Ei.install=function(e){e.component(Ei.name,Ei)};var Ni=Ei,_i={class:"epsplanet-panel-base",style:{width:"296px"}};function ki(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-slider"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-form");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",_i,[Object(o["createVNode"])(s,{ref:"form","label-width":"70px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:e.label.contrast},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.contrast,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.contrast=t}),min:0,max:255,step:1,"show-input":"","show-input-controls":!1},null,8,["modelValue"])]})),_:1},8,["label"]),Object(o["createVNode"])(l,{label:e.label.brightness},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.brightness,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.brightness=t}),min:-1,max:1,step:.1,"show-input":"","show-input-controls":!1},null,8,["modelValue","step"])]})),_:1},8,["label"])]})),_:1},512)])}var Mi={name:"EpsplanetBloom",props:[],setup:function(){Object(o["getCurrentInstance"])();var e,t=Object(o["reactive"])({label:{glowOnly:"仅发光图",contrast:"对比度",brightness:"亮度",delta:"光程差",sigma:"sigma",stepSize:"stepSize"},glowOnly:!1,contrast:128,brightness:-.3,delta:1,sigma:3.78,stepSize:5});Object(o["watch"])((function(){return t.contrast}),(function(t){e.postProcess.bloom.contrast=t})),Object(o["watch"])((function(){return t.brightness}),(function(t){e.postProcess.bloom.brightness=t})),Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,e.postProcess.bloom.enabled=!0;case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){e.postProcess.bloom.enabled=!1}));var n=Object(o["toRefs"])(t);return Object(p["a"])({},n)}};const Ti=P()(Mi,[["render",ki]]);var Pi=Ti;Pi.install=function(e){e.component(Pi.name,Pi)};var Si=Pi,zi={class:"epsplanet-panel-base",style:{width:"296px"}};function Ri(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-slider"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-form");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",zi,[Object(o["createVNode"])(s,{ref:"form","label-width":"70px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:e.title},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.brightness,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.brightness=t}),min:e.min,max:e.max,"show-input":"","show-input-controls":!1,step:e.step},null,8,["modelValue","min","max","step"])]})),_:1},8,["label"])]})),_:1},512)])}var Bi=Object(o["defineComponent"])({name:"EpsplanetBrightness",props:[],setup:function(){var e,t=Object(o["reactive"])({title:"亮度",brightness:.6,min:0,max:4,step:.1});Object(o["watch"])((function(){return t.brightness}),(function(t){e.postProcess.brightness.brightness=t})),Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,e.postProcess.brightness.enabled=!0;case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){e.postProcess.brightness.enabled=!1}));var n=Object(o["toRefs"])(t);return Object(p["a"])({},n)}});const Xi=P()(Bi,[["render",Ri]]);var Li=Xi;Li.install=function(e){e.component(Li.name,Li)};var Ui=Li,Ai=Object(o["defineComponent"])({name:"EpsplanetMosaic",props:[],setup:function(){var e;Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,e.postProcess.mosaic.enabled=!0;case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){e.postProcess.mosaic.enabled=!1}))}});const Di=Ai;var Ii=Di;Ii.install=function(e){e.component(Ii.name,Ii)};var Gi=Ii,Hi=Object(o["defineComponent"])({name:"EpsplanetNightvision",props:[],setup:function(){var e;Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,e.postProcess.nightVision.enabled=!0;case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){e.postProcess.nightVision.enabled=!1}))}});const Fi=Hi;var Wi=Fi;Wi.install=function(e){e.component(Wi.name,Wi)};var qi=Wi,Ki={class:"epsplanet-panel-base",style:{width:"296px"}};function Yi(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-slider"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-switch"),u=Object(o["resolveComponent"])("el-form");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ki,[Object(o["createVNode"])(u,{ref:"form","label-width":"70px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:e.label.darkness},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.darkness,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.darkness=t}),min:0,max:1,step:.01,"show-input":"","show-input-controls":!1},null,8,["modelValue","step"])]})),_:1},8,["label"]),Object(o["createVNode"])(l,{label:e.label.maximumDistance},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.maximumDistance,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.maximumDistance=t}),min:1,max:1e3,step:1,"show-input":"","show-input-controls":!1},null,8,["modelValue"])]})),_:1},8,["label"]),Object(o["createVNode"])(l,{label:e.label.terrainShadow},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.terrainShadow,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.terrainShadow=t}),"inactive-color":"#dcdfe6"},null,8,["modelValue"])]})),_:1},8,["label"])]})),_:1},512)])}var Ji=Object(o["defineComponent"])({name:"EpsplanetShadow",props:[],setup:function(){var e,t=Object(o["reactive"])({label:{darkness:"暗度",maximumDistance:"最大距离",normalOffset:"法向量偏移",terrainShadow:"地形阴影",softShadows:"软阴影"},terrainShadow:!0,softShadows:!1,size:2048,darkness:.3,maximumDistance:5e3,normalOffset:!0});Object(o["watch"])((function(){return t.terrainShadow}),(function(t){e&&(e.effect.shadow.terrainShadow=t)})),Object(o["watch"])((function(){return t.softShadows}),(function(t){e&&(e.effect.shadow.softShadows=t)})),Object(o["watch"])((function(){return t.normalOffset}),(function(t){e&&(e.effect.shadow.normalOffset=t)})),Object(o["watch"])((function(){return t.darkness}),(function(t){e&&(e.effect.shadow.darkness=t)})),Object(o["watch"])((function(){return t.maximumDistance}),(function(t){e&&(e.effect.shadow.maximumDistance=t)})),Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,e.effect.shadow.enabled=!0;case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){e.effect.shadow.enabled=!1}));var n=Object(o["toRefs"])(t);return Object(p["a"])({},n)}});const Qi=P()(Ji,[["render",Yi]]);var Zi=Qi;Zi.install=function(e){e.component(Zi.name,Zi)};var $i=Zi,ec={class:"epsplanet-panel-base",style:{width:"296px"}};function tc(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-color-picker"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-form");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ec,[Object(o["createVNode"])(s,{ref:"form","label-width":"70px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:e.title},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{modelValue:e.uicolor,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.uicolor=t}),"show-alpha":"",onActiveChange:e.changeColor},null,8,["modelValue","onActiveChange"])]})),_:1},8,["label"])]})),_:1},512)])}var nc=Object(o["defineComponent"])({name:"EpsplanetSilhouette",props:[],setup:function(){var e,t=Object(o["reactive"])({title:"轮廓颜色",length:.5,uicolor:"rgba(11, 211, 34, 0.8)"});function n(t){var n=t.split("(")[1].split(")")[0].split(","),o=[];n.forEach((function(e,t){3==t?o.push(Number(e)):o.push(Number(e)/255)})),e.postProcess.silhouette.color=o}Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,e.postProcess.silhouette.enabled=!0;case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){e.postProcess.silhouette.enabled=!1}));var a=Object(o["toRefs"])(t);return Object(p["a"])(Object(p["a"])({},a),{},{changeColor:n})}});const oc=P()(nc,[["render",tc]]);var ac=oc;ac.install=function(e){e.component(ac.name,ac)};var rc=ac,ic=[ji,wi,Ni,Si,Ui,Gi,qi,$i,rc,di],cc={btnClass:{type:String,require:!1,default:""}},lc=Object(o["defineComponent"])({name:"EpsplanetMeasurePoint",props:cc,setup:function(e){var t,n=[];Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,g.instance.getEarth();case 2:t=o.sent,t.analyzation.measurement.type="POINT",n.push(XE.MVVM.watch((function(){return t.analyzation.measurement.type}),(function(t){"NONE"==t&&v(e.btnClass,!1)})));case 5:case"end":return o.stop()}}),o)})))),Object(o["onBeforeUnmount"])((function(){n.forEach((function(e){return e()}))}))}});const sc=lc;var uc=sc;uc.install=function(e){e.component(uc.name,uc)};var dc=uc,pc=Object(o["defineComponent"])({name:"EpsplanetMeasureDistance",props:["btnClass"],setup:function(e){var t,n=[];Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,g.instance.getEarth();case 2:t=o.sent,t.analyzation.measurement.type="SPACE_DISTANCE",n.push(XE.MVVM.watch((function(){return t.analyzation.measurement.type}),(function(t){"NONE"==t&&v(e.btnClass,!1)})));case 5:case"end":return o.stop()}}),o)})))),Object(o["onBeforeUnmount"])((function(){n.forEach((function(e){return e()}))}))}});const mc=pc;var bc=mc;bc.install=function(e){e.component(bc.name,bc)};var fc=bc,hc=Object(o["defineComponent"])({name:"EpsplanetMeasureHeight",props:["btnClass"],setup:function(e){var t,n=[];Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,g.instance.getEarth();case 2:t=o.sent,t.analyzation.measurement.type="TRIANGLE_DISTANCE",n.push(XE.MVVM.watch((function(){return t.analyzation.measurement.type}),(function(t){"NONE"==t&&v(e.btnClass,!1)})));case 5:case"end":return o.stop()}}),o)})))),Object(o["onBeforeUnmount"])((function(){n.forEach((function(e){return e()}))}))}});const jc=hc;var Oc=jc;Oc.install=function(e){e.component(Oc.name,Oc)};var gc=Oc,vc=Object(o["defineComponent"])({name:"EpsplanetMeasureArea",props:["btnClass"],setup:function(e){var t,n=[];Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,g.instance.getEarth();case 2:t=o.sent,t.analyzation.measurement.type="SPACE_AREA",n.push(XE.MVVM.watch((function(){return t.analyzation.measurement.type}),(function(t){"NONE"==t&&v(e.btnClass,!1)})));case 5:case"end":return o.stop()}}),o)})))),Object(o["onBeforeUnmount"])((function(){n.forEach((function(e){return e()}))}))}});const wc=vc;var Cc=wc;Cc.install=function(e){e.component(Cc.name,Cc)};var Vc=Cc,xc=Object(o["defineComponent"])({name:"EpsplanetMeasureClear",props:["btnClass"],setup:function(e){var t;Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,g.instance.getEarth();case 2:t=n.sent,t.analyzation.measurement.clearResults(),t.analyzation.measurement.clearThreeDArea&&t.analyzation.measurement.clearThreeDArea(),t.analyzation.measurement.clearGroundDistance&&t.analyzation.measurement.clearGroundDistance(),t.analyzation.measurement.clearAzimuth&&t.analyzation.measurement.clearAzimuth(),t.terrainEffect.depthTest=!1,v(e.btnClass,!1);case 9:case"end":return n.stop()}}),n)}))))}});const yc=xc;var Ec=yc;Ec.install=function(e){e.component(Ec.name,Ec)};var Nc=Ec,_c=50;function kc(e,t,n){n.czm.scene.globe.depthTestAgainstTerrain||(n.czm.scene.globe.depthTestAgainstTerrain=!0);var o=[];o.push({distance:0,longitude:180*e[0][0]/Math.PI,latitude:180*e[0][1]/Math.PI,height:e[0][2]});for(var a=[],r=0,i=1;i<e.length;i++){var c=e[i-1],l=e[i],s=Cesium.Cartesian3.fromRadians(c[0],c[1],c[2]),u=Cesium.Cartesian3.fromRadians(l[0],l[1],l[2]);r+=Cesium.Cartesian3.distance(s,u)}if(r<.5)return null;if(0===t)t=Math.round(r/_c),0===t&&(t=.1);else{var d=Math.round(r/t);d>_c&&(t=Math.round(r/_c))}if(!t)return null;r=0;for(i=1;i<e.length;i++){c=e[i-1],l=e[i];var p=[(c[0]+l[0])/2,(c[1]+l[1])/2,(c[2]+l[2])/2],m=(s=Cesium.Cartesian3.fromRadians(c[0],c[1],c[2]),u=Cesium.Cartesian3.fromRadians(l[0],l[1],l[2]),Cesium.Cartesian3.distance(s,u)),b=s;if(m>t){var f=m/t,h=(l[0]-c[0])/f,j=(l[1]-c[1])/f,O=0,g=c;while(m>=t){g=[g[0]+h,g[1]+j,0],g[2]=Mc(g,n);var v=Cesium.Cartesian3.fromRadians(g[0],g[1],g[2]);O+=Cesium.Cartesian3.distance(b,v),o.push({distance:Math.round(100*(r+O))/100,longitude:180*g[0]/Math.PI,latitude:180*g[1]/Math.PI,height:g[2]}),m-=t,b=v}m=O}else o.push({distance:Math.round(100*r)/100,longitude:180*l[0]/Math.PI,latitude:180*l[1]/Math.PI,height:l[2]});r+=m,a.push({dis:Math.round(100*m)/100+"米",pos:p})}a.push({dis:"总长："+Math.round(100*r)/100+"米",pos:e[0]});var w={};return w.sample=o,w.label=a,w.interval=t,w}function Mc(e,t){var n=new Cesium.Cartographic(e[0],e[1]);return t.czm.scene.sampleHeight(n)}var Tc=Object(o["defineComponent"])({name:"EpsplanetGroundDistance",props:["btnClass"],setup:function(e){var t,n=Object(o["getCurrentInstance"])(),a=n.proxy,r=a,i=Object(o["reactive"])({_polylineCzm:void 0,editing:!1,width:5,color:"rgba(0,255,0,1)",ground:!0,_disposer:[],isSaved:!1,_disGroundLabels:[],disGroundinterval:10});function l(){r._disGroundLabels=[],r._polylineCzm=new XE.Obj.Plots.GeoPolyline(t),r._polylineCzm.creating=!0,r.pin=new XE.Obj.Plots.GeoPin(t),r.pins=[],r._disposers=[],r._disposers.push(XE.MVVM.bind(r,"editing",r._polylineCzm,"editing"),XE.MVVM.bind(r,"width",r._polylineCzm,"width"),XE.MVVM.bind(r,"ground",r._polylineCzm,"ground"),XE.MVVM.watch((function(){return Object(c["a"])(r._polylineCzm.positions)}),(function(){u(r._polylineCzm.positions)})),XE.MVVM.watch((function(){return r._polylineCzm.creating}),(function(){return v(e.btnClass,!1)})))}function s(e){var t=e.split("(")[1].split(")")[0].split(","),n=[];t.forEach((function(e,t){3==t?n.push(Number(e)):n.push(Number(e)/225)})),r._polylineCzm.color=n}function u(e){if(r._disGroundLabels&&(r._disGroundLabels.forEach((function(e){return e.destroy()})),r._disGroundLabels=[]),1===e.length){var n={dis:"左键添加点, 右键删除点, shift+右键完成",pos:e[0]},o=d(n);r._disGroundLabels.push(o)}else if(e.length>1){var a=r.disGroundinterval,i=kc(e,a,t);if(!i)return;r._result=i;var c=i.label;c.forEach((function(e){var t=d(e);r._disGroundLabels.push(t)}))}}function d(e){var n=new XE.Obj.Plots.GeoPin(t);return n.innerHTML='<div style="cursor:pointer;position: absolute;width:300px;left:6px; line-height:15px;color: white;"><span style="padding:2px;border-radius: 2px;text-stroke:2px #000;font-size: 14px;color:#ffffff;background-color: rgba(50,50,50,0.5)">'+e.dis+"</span></div>",n.position=e.pos,n._pin.show=!1,n}function m(){r._disposers&&(r._disposers.forEach((function(e){return e()})),r._disposers.length=0),r._polylineCzm&&!r.isSaved&&(r._polylineCzm.destroy(),r._polylineCzm=void 0),r._disGroundLabels&&r._disGroundLabels.forEach((function(e){return e.destroy()})),r._disGroundLabels=[]}function b(){r.isSaved=!0;var e=new XE.SceneTree.Leaf(r._polylineCzm);t.sceneTree.root.children.push(e),r.confirm(e)}return Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g.instance.getEarth();case 2:t=e.sent,t.analyzation.measurement.clearGroundDistance=function(){return m()},l();case 5:case"end":return e.stop()}}),e)})))),Object(o["onBeforeUnmount"])((function(){m()})),Object(p["a"])(Object(p["a"])({},Object(o["toRefs"])(i)),{},{changeColor:s,save:b})}});n("c488");const Pc=P()(Tc,[["__scopeId","data-v-783b2831"]]);var Sc=Pc;Sc.install=function(e){e.component(Sc.name,Sc)};var zc=Sc,Rc=Object(o["defineComponent"])({name:"EpsplanetThreeDArea",props:["btnClass"],setup:function(e){var t,n=Object(o["getCurrentInstance"])(),a=n.proxy,r=a,i=Object(o["reactive"])({measurementType:"NONE",_areaGround:void 0,areaGround:0,areaGroundInterval:0,creating:!1,editing:!1,width:0,color:"rgba(0,255,0,1)",ground:!0,_disposer:[],isSaved:!1,_creating:[],_temGeometry:[],_labels:[]});function c(){i._creating=[],i._temGeometry=[],i._labels=[],s()}function l(e){var t=e.split("(")[1].split(")")[0].split(","),n=[];t.forEach((function(e,t){3==t?n.push(Number(e)):n.push(Number(e)/225)})),i._areaGround.color=n}function s(){t.analyzation.measurement.type="SPACE_AREA_GROUD",t.terrainEffect.depthTest||(t.terrainEffect.depthTest=!0),i._areaGround=new XE.Obj.CustomPrimitiveExt.Image(t),i._areaGround.isCreating=!0,i._areaGround.creating=!0,i._areaGround.imageUrl=null,i._areaGround._customPrimitive.pass=8,i._areaGround._customPrimitive.color=[0,1,0,.5],m(),i._creating.push(XE.MVVM.watch((function(){return i._areaGround.creating}),(function(){u(),v(e.btnClass,!1)}))),i._temGeometry.push(i._areaGround)}function u(){if(i._areaGround.positions.length>2){i.areaGround=Number(i._areaGround.totalArea),isNaN(i.areaGround)&&(i.areaGround=0),0===i.areaGroundInterval&&i.areaGround>1&&(i._areaGround.interpolationDistance=Math.sqrt(i.areaGround)/10,i._areaGround.offsetHeight=.5,i._areaGround.interpolation=!0);var e=new XE.Obj.CustomPrimitive(t);setTimeout((function(){e.position=i._areaGround._customPrimitive.position,e.positions=i._areaGround._customPrimitive.positions,e.primitiveType=1;for(var t=[],n=0;n<i._areaGround._customPrimitive.indices.length-2;n+=3){var o=i._areaGround._customPrimitive.indices[n],a=i._areaGround._customPrimitive.indices[n+1],r=i._areaGround._customPrimitive.indices[n+2];t.push(o),t.push(a),t.push(a),t.push(r),t.push(r),t.push(o)}12===t.length&&alert("当前包围面积过大，仅显示平面面积。若要计算立面面积，请绘制较小的包围面。"),e.indices=t,i._temGeometry.push(e),i._labels.forEach((function(e){return e.destroy()})),i._labels=[];var c=d({pos:i._areaGround._customPrimitive.position,dis:Math.round(100*i._areaGround.totalArea)/100+"平方米"});i._labels.push(c)}),1e3)}m()}function d(e){var n=new XE.Obj.Plots.GeoPin(t);return n.innerHTML='<div style="cursor:pointer;position: absolute;width:300px;left:6px; line-height:15px;color: white;"><span style="padding:2px;border-radius: 2px;text-stroke:2px #000;font-size: 14px;color:#ffffff;background-color: rgba(50,50,50,0.5)">'+e.dis+"</span></div>",n.position=e.pos,n}function m(){i._creating.forEach((function(e){return e()})),i._creating=[],i._labels.length>0&&(i._labels.forEach((function(e){i._temGeometry.push(e)})),i._labels=[],i.measurementType="NONE")}function b(){r._disposers&&(r._disposers.forEach((function(e){return e()})),r._disposers.length=0),i._areaGround&&!r.isSaved&&(i._areaGround.destroy(),i._areaGround=void 0),r.pins&&r.pins.forEach((function(e){e.destroy()})),i._temGeometry&&(i._temGeometry.forEach((function(e){return e.destroy()})),i._temGeometry=[]),i._labels.forEach((function(e){return e.destroy()})),i._labels=[],t.analyzation.measurement.type="NONE",t.terrainEffect.depthTest=!1}function f(){r.isSaved=!0;var e=new XE.SceneTree.Leaf(i._areaGround);t.sceneTree.root.children.push(e),confirm(e)}return Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g.instance.getEarth();case 2:t=e.sent,t.analyzation.measurement.clearThreeDArea=function(){return b()},c();case 5:case"end":return e.stop()}}),e)})))),Object(o["onBeforeUnmount"])((function(){b()})),Object(p["a"])(Object(p["a"])({},Object(o["toRefs"])(i)),{},{changeColor:l,save:f})}});const Bc=Rc;var Xc=Bc;Xc.install=function(e){e.component(Xc.name,Xc)};var Lc=Xc,Uc=Object(o["defineComponent"])({name:"EpsplanetMeasureAzimuth",props:["btnClass"],setup:function(e){var t,n=Object(o["getCurrentInstance"])(),a=n.proxy,r=a,i=Object(o["reactive"])({_polylineCzm:void 0,creating:!1,editing:!1,width:0,color:"rgba(0,255,0,1)",color1:"rgba(255,255,0,1)",ground:!1,_disposer:[0],isSaved:!1,_creating:[0],measuring:!1,_labels:[0],_temGeometry:[0]});function l(){s(),r._angle2=new XE.Obj.Plots.GeoPolylineArrow(t),r._angle2.color=[255,255,0,1],r._angle=new XE.Obj.Plots.GeoPolylineArrow(t),r._angle.creating=!0,r._creating.push(XE.MVVM.bind(r,"width",r._angle,"width"),XE.MVVM.bind(r,"ground",r._angle,"ground"),XE.MVVM.bind(r,"editing",r._angle,"editing"),XE.MVVM.watch((function(){return{positions:Object(c["a"])(r._angle.positions)}}),(function(){if(r._labels.forEach((function(e){return e.destroy()})),r._labels=[],r._angle.positions.length>=2){r._angle2.positions[0]=r._angle.positions[0],r._angle2.positions[1]=Object(c["a"])(r._angle2.positions[0]),r._angle2.positions[1][1]=r._angle2.positions[1][1]+1e-8*t._camera.position[2];var e=u({pos:r._angle2.positions[1],dis:"N"});r._labels.push(e)}if(1==r._angle.positions.length){var n={dis:"左键添加点，右键删除点，shift+右键完成",pos:r._angle.positions[0]},o=u(n);r._labels.push(o)}else if(2==r._angle.positions.length){var a=XE.Tool.Math.hpr(r._angle.positions[0],r._angle.positions[1]);if(a){var i=u({pos:r._angle.positions[1],dis:Math.round((180*a[0]/Math.PI+90)%360*100)/100+"度"});r._labels.push(i)}}else r._angle.positions.length>2?r._angle.editing=!0:0==r._angle.positions.length&&r._angle2.destroy()})),XE.MVVM.watch((function(){return r._angle.creating}),(function(){v(e.btnClass,!1)}))),r._temGeometry.push(r._angle),r.measurementType="SPACE_ANGLE"}function s(){r._creating&&(r._creating.forEach((function(e){return e()})),r._creating=[]),r._labels.length>0&&(r._labels.forEach((function(e){r._temGeometry.push(e)})),r._labels=[],r.measurementType="NONE")}function u(e){var n=new XE.Obj.Plots.GeoPin(t);return n.innerHTML='<div style="cursor:pointer;position: absolute;width:300px;left:6px; line-height:15px;color: white;"><span style="padding:2px;border-radius: 2px;text-stroke:2px #000;font-size: 14px;color:#ffffff;background-color: rgba(50,50,50,0.5)">'+e.dis+"</span></div>",n.position=e.pos,n}function d(e){var t=e.split("(")[1].split(")")[0].split(","),n=[];t.forEach((function(e,t){3==t?n.push(Number(e)):n.push(Number(e)/225)})),r._angle.color=n}function m(){r._disposers&&(r._disposers.forEach((function(e){return e()})),r._disposers.length=0),r._angle&&!r.isSaved&&(r._angle.destroy(),r._angle=void 0),r._angle2&&!r.isSaved&&(r._angle2.destroy(),r._angle2=void 0),r._labels&&r._labels.length&&r._labels.forEach((function(e){return e.destroy()}))}function b(){r.isSaved=!0;var e=new XE.SceneTree.Leaf(r._angle);t.sceneTree.root.children.push(e),confirm(e)}return Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g.instance.getEarth();case 2:t=e.sent,t.analyzation.measurement.clearAzimuth=function(){return m()},r._creating=[],r._disposer=[],r._labels=[],r._temGeometry=[],l();case 9:case"end":return e.stop()}}),e)})))),Object(o["onBeforeUnmount"])((function(){m()})),Object(p["a"])(Object(p["a"])({},Object(o["toRefs"])(i)),{},{changeColor:d,save:b})}});const Ac=Uc;var Dc=Ac;Dc.install=function(e){e.component(Dc.name,Dc)};var Ic=Dc,Gc=[dc,fc,gc,Vc,zc,Lc,Ic,Nc],Hc={class:"epsplanet-panel-base vectorPicker",style:{width:"300px"}},Fc=Object(o["createElementVNode"])("span",null,"点击左键选取，关闭面板退出",-1);function Wc(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-table-column"),l=Object(o["resolveComponent"])("el-table"),s=Object(o["resolveComponent"])("el-scrollbar");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Hc,[Fc,Object(o["createVNode"])(s,{"max-height":"200px"},{default:Object(o["withCtx"])((function(){return[e._tabledata.length>1?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,data:e._tabledata,border:"",style:{width:"100%","background-color":"rgb(66, 66, 65)"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{prop:"name",label:"属性",width:"98"}),Object(o["createVNode"])(c,{prop:"value",label:"值",width:"200"})]})),_:1},8,["data"])):Object(o["createCommentVNode"])("",!0)]})),_:1})])}var qc={params:{type:Object,require:!1,default:null},serverWfs:{type:Array,require:!0,default:["http://39.152.31.83:11208/geoserver/WGS84/wfs?service=wfs&request=GetFeature&version=1.1.0&outputFormat=application/json&TYPENAME=WGS84:FW84&CQL_FILTER="]}},Kc=Object(o["defineComponent"])({name:"EpsplanetVectorPicker",props:qc,setup:function(e){var t,n,a,r,i,c,l=Object(o["getCurrentInstance"])(),s=(l.proxy,Object(o["reactive"])({_disposers:[0],_tabledata:[]}));Object(o["reactive"])(e.params);s._disposers=[],s._tabledata=[],Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g.instance.getEarth();case 2:return t=e.sent,e.next=5,u();case 5:n?w():d();case 6:case"end":return e.stop()}}),e)})))),Object(o["onBeforeUnmount"])((function(){w()}));var u=function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ve.a.get("Epsplanet_Assets/widgets/pick/vectorPicker/config.json").then((function(e){i=e.data.serverWfs})).catch((function(e){we["a"].error("加载配置文件失败"),w()}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function d(){t.interaction.picking.enabled=!0,t.czm.viewer.scene.globe.depthTestAgainstTerrain=!0,n=new Cesium.ScreenSpaceEventHandler(t.czm.viewer.scene.canvas),n.setInputAction((function(e){v();var t=m(e.position);b(t,i)}),Cesium.ScreenSpaceEventType.LEFT_CLICK),n.setInputAction((function(e){w()}),Cesium.ScreenSpaceEventType.RIGHT_CLICK)}var m=function(e){var n=t.czm.viewer.scene.pickPosition(e),o=Cesium.Cartographic.fromCartesian(n),a=Cesium.Math.toDegrees(o.longitude),i=Cesium.Math.toDegrees(o.latitude);r=o.height;var c=turf.point([a,i]),l=turf.buffer(c,5,{units:"meters"}),s="";return l.geometry.coordinates[0].map((function(e){s+="".concat(e[0]," ").concat(e[1],",")})),s},b=function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,n){var o,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=t.substring(0,t.length-1),o=!0,a=0;case 3:if(!(a<n.length)){e.next=12;break}if(!o){e.next=9;break}return r="".concat(n[a],"INTERSECTS(the_geom,SRID=4326;POLYGON((").concat(t,")))"),console.log("cql:",r),e.next=9,ve.a.get(r).then((function(e){if(200==e.status&&"OK"==e.statusText&&0!=e.data.features.length){var t=e.data.features[0].geometry,n=e.data.features[0].properties;f(t,n),o=!1}})).catch((function(e){console.log(e)}));case 9:a++,e.next=3;break;case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(e,t){var n=[];switch(e.type){case"MultiPolygon":e.coordinates[0].forEach((function(e){e.forEach((function(e){n.push(Cesium.Math.toRadians(e[0]),Cesium.Math.toRadians(e[1]))}))})),j(n,"MultiPolygon",t);break;case"Polygon":e.coordinates.forEach((function(e){e.forEach((function(e){n.push(Cesium.Math.toRadians(e[0]),Cesium.Math.toRadians(e[1]))}))})),j(n,"Polygon",t);break;case"LineString":e.coordinates.forEach((function(e){n.push([Cesium.Math.toRadians(e[0]),Cesium.Math.toRadians(e[1])])})),j(n,"LineString",t);break;case"MultiLineString":e.coordinates[0].forEach((function(e){n.push([Cesium.Math.toRadians(e[0]),Cesium.Math.toRadians(e[1])])})),j(n,"MultiLineString",t);break;default:alert("未识别到信息");break}},j=function(e,n,o){var i;if("MultiPolygon"==n||"Polygon"==n){var c={ref:"graphicsPickUp",czmObject:{name:"graphicsPickUp",xbsjType:"ClassificationPolygon",positions:e,height:r+50,ground:!1}};i=new XE.Obj.ClassificationPolygon(t),i.xbsjFromJSON(c)}else{var l={ref:"graphicsPickUp",czmObject:{name:"graphicsPickUp",xbsjType:"Polyline",positions:e,ground:!0,depthTest:!0,width:20,material:{XbsjColorMaterial:{color:[.9058823529411765,.792156862745098,.03137254901960784,.8]}},evalString:"\n              setInterval(()=>{\n                p.material.XbsjColorMaterial.color[3] = p.material.XbsjColorMaterial.color[3] == 1 ? 0.8 :1\n              },500)\n            "}};i=new XE.Obj.Polyline(t),i.xbsjFromJSON(l)}var s=new XE.SceneTree.Leaf(i);t.sceneTree.root.children.push(s),a=s,O(o)},O=function(e){Object.keys(e).forEach((function(t){var n={name:t,value:e[t]};s._tabledata.push(n)})),console.log("data._tabledata:",s._tabledata)},v=function(){a&&(t.sceneTree.root.children.remove(a),a=void 0),s._tabledata=[]},w=function(){n&&(n=n&&n.destroy()),v(),c&&(t.sceneTree.root.children.remove(c),c=void 0),t.interaction.picking.enabled=!1,t.czm.scene.globe.depthTestAgainstTerrain=!1},C=Object(o["toRefs"])(s);return Object(p["a"])(Object(p["a"])({},C),{},{initPick:d,del:w})}});const Yc=P()(Kc,[["render",Wc]]);var Jc=Yc;Jc.install=function(e){e.component(Jc.name,Jc)};var Qc=Jc,Zc={class:"tool-panel-base modelPicker",style:{width:"300px"}},$c=Object(o["createElementVNode"])("span",null,"点击左键开始选取",-1);function el(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-table-column"),l=Object(o["resolveComponent"])("el-table"),s=Object(o["resolveComponent"])("el-scrollbar");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Zc,[$c,Object(o["createVNode"])(s,{"max-height":"200px"},{default:Object(o["withCtx"])((function(){return[e.tableData.length>1?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,data:e.tableData,border:"",style:{width:"100%","background-color":"rgb(66, 66, 65)"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{prop:"property",label:"属性",width:"98"}),Object(o["createVNode"])(c,{prop:"value",label:"值",width:"200"})]})),_:1},8,["data"])):Object(o["createCommentVNode"])("",!0)]})),_:1})])}var tl=Object(o["defineComponent"])({name:"EpsplanetModelPicker",setup:function(){var e,t,n,a=Object(o["getCurrentInstance"])(),r=(a.proxy,Object(o["reactive"])({tableData:[{property:"",value:""}]}));function i(){e.interaction.picking.enabled=!0,e.czm.viewer.scene.globe.depthTestAgainstTerrain=!0}function c(){e.tilesetCollection.forEach((function(e){e.onclick=function(e){if(r.tableData=[],Cesium.defined(e)){if(!e.getPropertyNames)return;var t=e.getPropertyNames();t.forEach((function(t){var n={property:t,value:e.getProperty(t)};r.tableData.push(n)}))}}}))}function l(){var t=Cesium.PostProcessStageLibrary.createEdgeDetectionStage();t.uniforms.color=Cesium.Color.BLUE,t.uniforms.length=.01,t.selected=[];var n=Cesium.PostProcessStageLibrary.createEdgeDetectionStage();n.uniforms.color=Cesium.Color.LIME,n.uniforms.length=.01,n.selected=[],e.czm.scene.postProcessStages.add(Cesium.PostProcessStageLibrary.createSilhouetteStage([t,n])),e.sceneTree.root.children.forEach((function(e){e&&"Tileset"==e.czmObject.xbsjType&&(console.log("name:",e.czmObject.name),e.czmObject.onclick=function(e){if(t.selected&&t.selected[0]===e||(t.selected=[e]),r.tableData=[],Cesium.defined(e)){var n=e.getPropertyNames();n.forEach((function(t){var n={property:t,value:e.getProperty(t)};r.tableData.push(n)}))}},e.czmObject.onclickout=function(){t.selected&&t.selected.length>0&&(t.selected=[])},e.czmObject.onmouseover=function(e){n.selected&&n.selected[0]===e||(n.selected=[e])},e.czmObject.onmouseout=function(){n.selected&&n.selected.length>0&&(n.selected=[])})}))}function s(){t&&(t=t&&t.destroy()),n&&(e.sceneTree.root.children.remove(n),n=void 0),e.interaction.picking.enabled=!1,e.czm.viewer.scene.globe.depthTestAgainstTerrain=!1}Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,g.instance.getEarth();case 2:e=n.sent,t?s():(i(),c());case 4:case"end":return n.stop()}}),n)})))),Object(o["onBeforeUnmount"])((function(){s()}));var u=Object(o["toRefs"])(r);return Object(p["a"])(Object(p["a"])({},u),{},{init:i,initPick:c,initPick2:l,del:s})}});const nl=P()(tl,[["render",el]]);var ol=nl;ol.install=function(e){e.component(ol.name,ol)};var al=ol,rl=[Qc,al],il={class:"tool-panel-base",style:{width:"500px"}},cl=Object(o["createTextVNode"])("创建"),ll=Object(o["createTextVNode"])("编辑"),sl=Object(o["createTextVNode"])("删除"),ul=Object(o["createTextVNode"])("播放"),dl=Object(o["createTextVNode"])("停止");function pl(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-option"),l=Object(o["resolveComponent"])("el-select"),s=Object(o["resolveComponent"])("el-form-item"),u=Object(o["resolveComponent"])("el-button"),d=Object(o["resolveComponent"])("el-switch"),p=Object(o["resolveComponent"])("el-slider"),m=Object(o["resolveComponent"])("el-collapse-item"),b=Object(o["resolveComponent"])("el-collapse"),f=Object(o["resolveComponent"])("el-form");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",il,[Object(o["createVNode"])(f,{ref:"form","label-width":"80px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{label:"模型"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{placeholder:"选择需要绑定的模型",modelValue:e.modelUrl,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.modelUrl=t}),onChange:t[1]||(t[1]=function(t){return e.bindModel(e.modelUrl)}),style:{width:"80%"}},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.modelList,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:e.czmObject.url,label:e.czmObject.name,value:e.czmObject.url},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(o["createVNode"])(s,{label:"路径操作"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{onClick:t[2]||(t[2]=function(t){return e.creating=!0})},{default:Object(o["withCtx"])((function(){return[cl]})),_:1}),Object(o["createVNode"])(u,{onClick:t[3]||(t[3]=function(t){return e.editing=!e.editing})},{default:Object(o["withCtx"])((function(){return[ll]})),_:1}),Object(o["createVNode"])(u,{onClick:e.clearPath},{default:Object(o["withCtx"])((function(){return[sl]})),_:1},8,["onClick"]),Object(o["createVNode"])(u,{onClick:t[4]||(t[4]=function(t){return e.playing=!0})},{default:Object(o["withCtx"])((function(){return[ul]})),_:1}),Object(o["createVNode"])(u,{onClick:t[5]||(t[5]=function(t){return e.playing=!1})},{default:Object(o["withCtx"])((function(){return[dl]})),_:1})]})),_:1}),Object(o["createVNode"])(s,{label:"路径显隐"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.showPath,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.showPath=t})},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(s,{label:"运动速度"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{modelValue:e.currentSpeed,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.currentSpeed=t}),"show-input":"","show-input-controls":!1,min:0,max:100,step:1},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(s,{label:"漫游视角"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{modelValue:e.currentView,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.currentView=t}),onChange:e.viewTypeChange,style:{width:"50%"},placeholder:"请选择视角"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.viewOptions,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"])]})),_:1}),Object(o["createVNode"])(s,{label:"视角距离"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{modelValue:e.viewD,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.viewD=t}),onChange:t[10]||(t[10]=function(t){return e.viewDChange(e.currentPosition,e.cameraPosition,e.viewD)}),disabled:e.isSliderDisabled,"show-input":"","show-input-controls":!1,min:0,max:1e3,step:1},null,8,["modelValue","disabled"])]})),_:1}),Object(o["createVNode"])(s,{label:"视角高度"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{modelValue:e.viewHeight,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.viewHeight=t}),onChange:e.viewHeightChange,disabled:e.isSliderDisabled,"show-input":"","show-input-controls":!1,min:0,max:1e3,step:1},null,8,["modelValue","onChange","disabled"])]})),_:1}),Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(b,{style:{width:"100%"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{title:"高级"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{label:"高度偏移"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{modelValue:e.zOffset,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.zOffset=t}),onChange:t[13]||(t[13]=function(t){return e.calculateOffset(e.xOffset,e.yOffset,e.zOffset)}),"show-input":"","show-input-controls":!1,min:0,max:1e3,step:1},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(s,{label:"横向偏移"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{modelValue:e.xOffset,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.xOffset=t}),onChange:t[15]||(t[15]=function(t){return e.calculateOffset(e.xOffset,e.yOffset,e.zOffset)}),"show-input":"","show-input-controls":!1,min:0,max:1e3,step:1},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(s,{label:"前后偏移"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{modelValue:e.yOffset,"onUpdate:modelValue":t[16]||(t[16]=function(t){return e.yOffset=t}),onChange:t[17]||(t[17]=function(t){return e.calculateOffset(e.xOffset,e.yOffset,e.zOffset)}),"show-input":"","show-input-controls":!1,min:0,max:1e3,step:1},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1},512)])}var ml=Object(o["defineComponent"])({name:"EpsplanetAviation",props:[],setup:function(){var e,t,n,a=Object(o["getCurrentInstance"])(),r=a.proxy,i=r,l=Object(o["reactive"])({_disposer:[0],modelDisposer:[0],ellipsoid:void 0,creating:!1,editing:!1,currentSpeed:50,showPath:!0,playing:!1,modelUrl:"",modelList:[],currentView:"",viewOptions:[{label:"第一视角",value:"firstPersonView"},{label:"跟随视角",value:"attachedView"}],showOffset:!0,isSliderDisabled:!1,viewD:200,viewHeight:50,xOffset:0,yOffset:0,zOffset:0,currentPosition:[],offsetPosition:[],cameraPosition:[]});function s(){l._disposer=[],l.modelDisposer=[],i.ellipsoid=e.czm.scene.globe.ellipsoid;var n=new XE.Obj.Path(e);n.alwaysAlongThePath=!0,t=n,l._disposer.push(XE.MVVM.bind(i,"showPath",n,"show"),XE.MVVM.bind(i,"currentSpeed",n,"currentSpeed"),XE.MVVM.bind(i,"currentPosition",n,"currentPosition"),XE.MVVM.bind(i,"playing",n,"playing"),XE.MVVM.bind(i,"creating",n,"creating"),XE.MVVM.bind(i,"editing",n,"editing"),XE.MVVM.bind(i,"cameraPosition",e.camera,"position"))}function u(){i.cameraPosition[2]=i.currentPosition[2]+i.viewHeight}function d(t,n,o){var a=Cesium.Cartesian3.fromRadians(t[0],t[1],t[2],i.ellipsoid),r=Cesium.Cartesian3.fromRadians(n[0],n[1],n[2],i.ellipsoid),c=Cesium.Cartesian3.normalize(Cesium.Cartesian3.subtract(r,a,new Cesium.Cartesian3),new Cesium.Cartesian3),l=Cesium.Cartesian3.multiplyByScalar(c,o,new Cesium.Cartesian3),s=Cesium.Cartographic.fromCartesian(Cesium.Cartesian3.add(a,l,new Cesium.Cartesian3));e.camera.position=[s.longitude,s.latitude,s.height]}function m(){n.cameraAttached=!0,i.viewD=50,i.viewHeight=200,i.xOffset=0,i.yOffset=0,i.zOffset=0,"firstPersonView"===i.currentView?(i.showOffset=!0,i.isSliderDisabled=!0,i.cameraPosition=[n.xbsjPosition[0],n.xbsjPosition[1],n.xbsjPosition[2]+30],n.cameraAttached=!0,n.cameraAttachedOffsetPosition=[0,0,30]):"attachedView"===i.currentView&&(i.showOffset=!1,i.isSliderDisabled=!1)}function b(e,t,o){n.cameraAttachedOffsetPosition=[e/6371004,t/6371004,o]}function f(o){O(),n=new XE.Obj.Model(e),n.url=o,n.xbsjPosition=t.currentPosition,l.modelDisposer.push(XE.MVVM.watch(t,"currentPosition",(function(e){var t=Object(c["a"])(e);n.xbsjPosition=[t[0],t[1],t[2]+.1]})),XE.MVVM.watch(t,"currentRotation",(function(e){var t=Object(c["a"])(e);n.xbsjRotation=[t[0]-.5*Math.PI,t[1],t[2]]})))}function j(){t&&(t=t&&t.destroy())}function O(){l.modelDisposer.length&&(l.modelDisposer.forEach((function(e){return e()})),l.modelDisposer.length=0),n=n&&n.destroy()}function v(){l._disposer.length&&(l._disposer.forEach((function(e){return e()})),l._disposer.length=0),O(),j()}return Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,g.instance.getEarth();case 2:e=n.sent,ve.a.get("Epsplanet_Assets/widgets/path/aviation/modelList.json").then((function(e){l.modelList=e.data.modelList})).catch((function(e){Object(we["a"])("加载配置文件失败"),v()})),t?v():s();case 5:case"end":return n.stop()}}),n)})))),Object(o["onBeforeUnmount"])((function(){v()})),Object(o["watch"])(i.playing,(function(){!i.playing&&i.cameraAttached&&(n.cameraAttached=!1)})),Object(p["a"])(Object(p["a"])({},Object(o["toRefs"])(l)),{},{viewHeightChange:u,viewDChange:d,viewTypeChange:m,calculateOffset:b,bindModel:f,clearPath:j})}});const bl=P()(ml,[["render",pl]]);var fl=bl;fl.install=function(e){e.component(fl.name,fl)};var hl=fl,jl=[hl],Ol={class:"tool-panel-base",style:{width:"350px","text-align":"left"}},gl=Object(o["createElementVNode"])("br",null,null,-1);function vl(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-switch"),l=Object(o["resolveComponent"])("el-tree"),s=Object(o["resolveComponent"])("el-tab-pane"),u=Object(o["resolveComponent"])("el-tabs");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ol,[Object(o["createVNode"])(c,{style:{"margin-left":"18px"},modelValue:e.bind,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.bind=t}),"inactive-color":"#dcdfe6","active-text":"视角绑定"},null,8,["modelValue"]),gl,Object(o["createVNode"])(u,{"tab-position":"left",modelValue:e.activeName,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.activeName=t})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{label:"左侧",name:"1"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{ref:"treeLeft",props:e.treeProps,data:e.treeDataLeft,"node-key":"id",onCheckChange:e.handleCheckLeft,"show-checkbox":"","empty-text":"暂无数据"},null,8,["props","data","onCheckChange"])]})),_:1}),Object(o["createVNode"])(s,{label:"右侧",name:"2"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{ref:"treeRight",props:e.treeProps,data:e.treeDataRight,"node-key":"id",onCheckChange:e.handleCheckRight,"show-checkbox":"","empty-text":"暂无数据"},null,8,["props","data","onCheckChange"])]})),_:1})]})),_:1},8,["modelValue"])])}var wl=Object(o["defineComponent"])({name:"EpsplanetDoubleView",setup:function(){var e,t,n,a,r=Object(o["getCurrentInstance"])(),i=r.proxy,l=Object(o["reactive"])({_disposer:[0],customLayers:[],activeName:"1",defaultCheckedLeft:[],defaultCheckedRight:[],objList:[0],treeDataLeft:[],treeDataRight:[],bind:!1,treeProps:{label:"label",children:"children"}});Object(o["watch"])((function(){return l.bind}),(function(){l.bind?b():f()})),Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,g.instance.getEarth();case 2:return e=n.sent,n.next=5,ve.a.get("Epsplanet_Assets/widgets/multiView/doubleView/config.json").then((function(e){l.customLayers=e.data.customLayers})).catch((function(e){we["a"].error("加载配置文件失败")}));case 5:t?j():s();case 6:case"end":return n.stop()}}),n)})))),Object(o["onBeforeUnmount"])((function(){t&&j()}));var s=function(){var o;l._disposer=[],l.objList=[];var a=document.getElementsByClassName("cesium-viewer")[0];n=a.parentElement;var r=n.parentElement;n.style.width="50%",n.style.display="inline-block";var s=document.createElement("div");s.id="rightContainer",s.style.width="50%",s.style.height=n.style.height,s.style.display="inline-block",r.appendChild(s);var d=new XE.Earth("rightContainer");t=d,t.sceneTree.root.xbsjFromJSON(e.sceneTree.root.toAllJSON()),(o=t.sceneTree.root.children).push.apply(o,Object(c["a"])(l.customLayers)),l.treeDataLeft=u(e.sceneTree.root.children,l.defaultCheckedLeft),l.treeDataRight=u(t.sceneTree.root.children,l.defaultCheckedRight),i.$refs.treeLeft.setCheckedKeys(l.defaultCheckedLeft),i.$refs.treeRight.setCheckedKeys(l.defaultCheckedRight)},u=function e(t,n){var o=[];return t.forEach((function(t){if(t.children){var a=e(t.children,n);o.push({label:t.title,children:a,id:t.xbsjID})}else o.push({label:t.title,guid:t.czmObject.xbsjGuid,isLeaf:!0,id:t.xbsjID}),t.czmObject.show&&n.push(t.xbsjID)})),o},d=function(t,n,o){if(t.guid){var a=e.getObject(t.guid);a.show=n}},m=function(e,n,o){if(e.guid){var a=t.getObject(e.guid);a.show=n}},b=function(){l._disposer.push(XE.MVVM.bind(t.camera,"position",e.camera,"position"),XE.MVVM.bind(t.camera,"rotation",e.camera,"rotation"))},f=function(){l._disposer.length&&(l._disposer.forEach((function(e){return e()})),l._disposer.length=0)},j=function(){f(),a=a&&a();var e=document.getElementById("rightContainer"),o=n.parentElement;o.removeChild(e),n.style.width="100%",t=t&&t.destroy()};return Object(p["a"])(Object(p["a"])({},Object(o["toRefs"])(l)),{},{handleCheckLeft:d,handleCheckRight:m,bindView:b,unbindView:f})}});const Cl=P()(wl,[["render",vl]]);var Vl=Cl;Vl.install=function(e){e.component(Vl.name,Vl)};var xl=Vl,yl={class:"epsplanet-panel-base"},El={style:{"text-align":"center",margin:"20px"}},Nl=Object(o["createTextVNode"])("左右卷帘"),_l=Object(o["createTextVNode"])("上下卷帘"),kl=Object(o["createElementVNode"])("div",{class:"title"},"图层",-1),Ml=Object(o["createElementVNode"])("div",{class:"point"},null,-1),Tl=Object(o["createElementVNode"])("div",{class:"point1"},null,-1);function Pl(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-radio"),l=Object(o["resolveComponent"])("el-radio-group"),s=Object(o["resolveComponent"])("el-col"),u=Object(o["resolveComponent"])("el-option"),d=Object(o["resolveComponent"])("el-select"),p=Object(o["resolveComponent"])("el-row");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",yl,[Object(o["createElementVNode"])("div",El,[Object(o["createVNode"])(l,{modelValue:e.radio1,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.radio1=t}),onChange:t[1]||(t[1]=function(t){return e.changeSilder()})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{label:"1",size:"large"},{default:Object(o["withCtx"])((function(){return[Nl]})),_:1}),Object(o["createVNode"])(c,{label:"2",size:"large"},{default:Object(o["withCtx"])((function(){return[_l]})),_:1})]})),_:1},8,["modelValue"])]),Object(o["createVNode"])(p,{gutter:8,class:"row"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{span:4},{default:Object(o["withCtx"])((function(){return[kl]})),_:1}),Object(o["createVNode"])(s,{span:20},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{gutter:8},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{span:2},{default:Object(o["withCtx"])((function(){return[Ml]})),_:1}),Object(o["createVNode"])(s,{span:22},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.layerID,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.layerID=t}),placeholder:"选择图层",onChange:t[3]||(t[3]=function(t){return e.chooseLayerOne()}),class:"select"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.layerOption,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:t,label:e.title,value:e.czmObject.xbsjGuid},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]})),_:1}),Object(o["createVNode"])(p,{gutter:8},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{span:2},{default:Object(o["withCtx"])((function(){return[Tl]})),_:1}),Object(o["createVNode"])(s,{span:22},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.layerID2,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.layerID2=t}),placeholder:"选择图层",onChange:t[5]||(t[5]=function(t){return e.chooseLayerTwo()}),class:"select"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.layerOption,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:t,label:e.title,value:e.czmObject.xbsjGuid},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})])}var Sl=Object(o["defineComponent"])({name:"EpsplanetSliderScreen",setup:function(){var e,t,n,a,r,i=Object(o["getCurrentInstance"])(),c=i.proxy,l=c,s=Object(o["reactive"])({radio1:"1",radio2:"1",splitX:1,splitY:1,viewport:"0",xbsjLeftTopView:!0,xbsjLeftBottomView:!0,xbsjRightTopView:!0,xbsjRightBottomView:!0,destroyArray:[""],_czmObj:void 0,layerID:void 0,layerID2:void 0,layerOption:[]}),u={changeSilder:function(){"1"==s.radio1?u.setViewportX():u.setViewportY()},chooseLayer:function(){e.sceneTree.root.children.forEach((function(e){e.czmObject.xbsjGuid==s.layerID&&(t=e.czmObject)})),t.flyTo(),e.sceneTree.root.children.push({czmObject:{xbsjType:"Imagery",xbsjGuid:"bc0a9e3b-5c03-4f8f-a737-0931fc2f0f8d",name:"百度暗色风格",splitDirection:"ImagerySplitDirection.RIGHT",xbsjImageryProvider:{XbsjImageryProvider:{url:"http://api0.map.bdimg.com/customimage/tile?=&x={x}&y={y}&z={z}&scale=1&customid=midnight",srcCoordType:"BD09"}}}}),n=e.sceneTree.root.children[e.sceneTree.root.children.length-1],t.splitDirection="ImagerySplitDirection.RIGHT",s.destroyArray.push(XE.MVVM.bind(l,"splitX",e.camera.viewport,"splitX"),XE.MVVM.bind(l,"splitY",e.camera.viewport,"splitY"))},chooseLayerOne:function(){s.layerOption=e.sceneTree.root.children.filter((function(e){return e.enabled})),s.xbsjRightBottomView=!0,s.xbsjRightTopView=!0;var n="";"1"==s.radio1?(e.sceneTree.root.children.forEach((function(e){e.czmObject.xbsjGuid==s.layerID&&(t=e.czmObject,n=e.czmObject.xbsjType)})),"Imagery"==n?t.splitDirection="ImagerySplitDirection.LEFT":(s.destroyArray.push(XE.MVVM.bind(l,"xbsjRightTopView",t,"xbsjRightTopView"),XE.MVVM.bind(l,"xbsjRightBottomView",t,"xbsjRightBottomView")),s.xbsjRightBottomView=!1,s.xbsjRightTopView=!1),t.flyTo()):(e.sceneTree.root.children.forEach((function(e){e.czmObject.xbsjGuid==s.layerID&&(a=e.czmObject)})),a.splitDirection="ImagerySplitDirection.TOP",a.flyTo())},chooseLayerTwo:function(){s.layerOption=e.sceneTree.root.children.filter((function(e){return e.enabled})),s.xbsjLeftTopView=!0,s.xbsjLeftBottomView=!0;var t="";"1"==s.radio1?(e.sceneTree.root.children.forEach((function(e){e.czmObject.xbsjGuid==s.layerID2&&(n=e.czmObject,t=e.czmObject.xbsjType)})),"Imagery"==t?n.splitDirection="ImagerySplitDirection.RIGHT":(s.destroyArray.push(XE.MVVM.bind(l,"xbsjLeftTopView",n,"xbsjLeftTopView"),XE.MVVM.bind(l,"xbsjLeftBottomView",n,"xbsjLeftBottomView")),s.xbsjLeftTopView=!1,s.xbsjLeftBottomView=!1)):(e.sceneTree.root.children.forEach((function(e){e.czmObject.xbsjGuid==s.layerID&&(r=e.czmObject)})),r.splitDirection="ImagerySplitDirection.BOTTOM")},setViewportX:function(){s.splitY=1,s.splitX=1==s.splitX?.5:1},setViewportY:function(){s.splitX=1,s.splitY=1==s.splitY?.5:1},init:function(){u.setViewportX(),s.layerOption=e.sceneTree.root.children.filter((function(e){return e.enabled})),s.destroyArray.push(XE.MVVM.bind(l,"splitX",e.camera.viewport,"splitX"),XE.MVVM.bind(l,"splitY",e.camera.viewport,"splitY"))},del:function(){var o,i,c,l;null!==(o=t)&&void 0!==o&&o.splitDirection&&(t.splitDirection="ImagerySplitDirection.NONE"),null!==(i=n)&&void 0!==i&&i.splitDirection&&(n.splitDirection="ImagerySplitDirection.NONE"),null!==(c=a)&&void 0!==c&&c.splitDirection&&(a.splitDirection="ImagerySplitDirection.NONE"),null!==(l=r)&&void 0!==l&&l.splitDirection&&(r.splitDirection="ImagerySplitDirection.NONE"),e.camera.viewport.splitX=1,e.camera.viewport.splitY=1,s.destroyArray&&(s.destroyArray.forEach((function(e){;""})),s.destroyArray.length=0)}};return Object(o["onBeforeUnmount"])((function(){u.del()})),Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,u.init();case 4:case"end":return t.stop()}}),t)})))),Object(p["a"])(Object(p["a"])({},Object(o["toRefs"])(s)),u)}});const zl=P()(Sl,[["render",Pl]]);var Rl=zl;Rl.install=function(e){e.component(Rl.name,Rl)};var Bl=Rl,Xl=[xl,Bl],Ll=Object(o["createTextVNode"])(" GeoJSON加载 "),Ul=Object(o["createTextVNode"])(" kml加载 "),Al=Object(o["createTextVNode"])(" gml加载 "),Dl=Object(o["createTextVNode"])(" shp加载 "),Il={class:"nodeBtn"},Gl=["onClick"],Hl={class:"dialog-footer"},Fl=Object(o["createTextVNode"])("确定"),Wl=Object(o["createTextVNode"])("选择本地文件"),ql=Object(o["createElementVNode"])("div",null," 请选择不超过30MB的文件, shp文件请压缩成zip上传, 不要包含文件夹 ",-1),Kl=Object(o["createTextVNode"])("上传到服务器");function Yl(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-button"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-form"),u=Object(o["resolveComponent"])("el-tab-pane"),d=Object(o["resolveComponent"])("el-tabs"),p=Object(o["resolveComponent"])("el-tree"),m=Object(o["resolveComponent"])("el-input"),b=Object(o["resolveComponent"])("el-upload"),f=Object(o["resolveComponent"])("el-table-column"),h=Object(o["resolveComponent"])("el-table"),j=Object(o["resolveComponent"])("el-dialog");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(d,{modelValue:e.activeMainTab,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.activeMainTab=t}),type:"card"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{label:"GeoJSON",name:"1"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{onClick:t[0]||(t[0]=function(t){e.dialogVisible=!0,e.currentTitle="加载GeoJSON",e.currentType="GeoJSON"})},{default:Object(o["withCtx"])((function(){return[Ll]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(u,{label:"kml",name:"2"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{onClick:t[1]||(t[1]=function(t){e.dialogVisible=!0,e.currentTitle="加载kml",e.currentType="kml"})},{default:Object(o["withCtx"])((function(){return[Ul]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(u,{label:"gml",name:"3"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{onClick:t[2]||(t[2]=function(t){e.dialogVisible=!0,e.currentTitle="加载gml",e.currentType="gml"})},{default:Object(o["withCtx"])((function(){return[Al]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(u,{label:"shp",name:"4"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{onClick:t[3]||(t[3]=function(t){e.dialogVisible=!0,e.currentTitle="加载shp",e.currentType="shp"})},{default:Object(o["withCtx"])((function(){return[Dl]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["modelValue"]),Object(o["createVNode"])(p,{data:e.treeData,"node-key":"id",ref:"tree","highlight-current":"",props:e.treeProps},{default:Object(o["withCtx"])((function(t){var n=t.node,a=t.data;return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.label)+" ",1),Object(o["createElementVNode"])("span",Il,[n.isLeaf?(Object(o["openBlock"])(),Object(o["createElementBlock"])("a",{key:0,class:"el-icon-delete",onClick:function(t){return e.deleteFile(n,a)},title:"删除"},null,8,Gl)):Object(o["createCommentVNode"])("",!0)])]})),_:1},8,["data","props"]),Object(o["createVNode"])(j,{title:e.currentTitle,modelValue:e.dialogVisible,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.dialogVisible=t})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.activeDialogTab,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.activeDialogTab=t}),type:"card"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{label:"在线地址",name:"1"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.objToLoad,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.objToLoad=t})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"名称","label-width":"120px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{modelValue:e.objToLoad.name,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.objToLoad.name=t})},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"地址","label-width":"120px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{modelValue:e.objToLoad.url,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.objToLoad.url=t}),placeholder:"请输入链接地址"},null,8,["modelValue"])]})),_:1})]})),_:1},8,["modelValue"]),Object(o["createElementVNode"])("div",Hl,[Object(o["createVNode"])(c,{onClick:t[8]||(t[8]=function(t){e.startLoadFromURL(e.currentType),e.dialogVisible=!1})},{default:Object(o["withCtx"])((function(){return[Fl]})),_:1})])]})),_:1}),Object(o["createVNode"])(u,{label:"本地上传",name:"2"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{class:"upload"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(b,{ref:"upload","file-list":e.fileList,multiple:!1,"auto-upload":!1,accept:".json,.kml,.gml,.zip"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,null,{default:Object(o["withCtx"])((function(){return[Wl]})),_:1}),ql]})),_:1},8,["file-list"]),Object(o["createVNode"])(c,{style:{"margin-left":"10px"},type:"success",onClick:e.startLoadFromLocal},{default:Object(o["withCtx"])((function(){return[Kl]})),_:1},8,["onClick"])]})),_:1}),Object(o["createVNode"])(l,{id:"resInfo"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(h,{data:e.infoData},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{prop:"fileName",label:"文件名称"}),Object(o["createVNode"])(f,{prop:"id",label:"ID"}),Object(o["createVNode"])(f,{prop:"status",label:"状态"})]})),_:1},8,["data"])]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])]})),_:1},8,["title","modelValue"])])}n("fb6a"),n("c740");var Jl=n("69a0"),Ql=n.n(Jl),Zl=n("b85c");function $l(e){var t=[];if(Object.prototype.hasOwnProperty.call(e,"features")){var n,o=e.features;o.forEach((function(e){n={label:e.properties.name,children:$l(e)},t.push(n)}))}return t}function es(e){var t,n,o=[],a=e.getElementsByTagName("name"),r=Object(Zl["a"])(a);try{for(r.s();!(n=r.n()).done;){var i=n.value;t={label:i.innerHTML,children:[]},o.push(t)}}catch(c){r.e(c)}finally{r.f()}return o}var ts=Object(o["defineComponent"])({name:"EpsplanetImportData",props:[],setup:function(){var e,t,a=Object(o["getCurrentInstance"])(),r=a.proxy,i=r,c=Object(o["reactive"])({activeMainTab:"1",activeDialogTab:"1",currentTitle:"",currentType:"",dialogVisible:!1,isUpload:!1,objToLoad:{name:"obj",url:""},treeData:[],treeProps:{label:"label",children:"children"},infoData:[],fileList:[]}),l=n("c26a");function s(e){switch(e){case"GeoJSON":m(c.objToLoad.url);break;case"kml":b(c.objToLoad.url);break;case"gml":b(c.objToLoad.url);break;case"shp":f(c.objToLoad.url);break;default:we["a"].error("文件类型不支持");break}}function u(){c.isUpload=!0;var e=i.fileList[0].raw,n=new FormData;n.append("file",e);var o=new FileReader,a=new Ql.a.ArrayBuffer;o.readAsArrayBuffer(e),o.onload=function(o){a.append(o.target.result);var r=a.end();console.log(r),n.append("md5",r),n.append("name",e.name),ve.a.post(t.fileSource,n,t.formDataConfig).then((function(t){c.isUpload=!1,200===t.status&&!0===t.data.success?(we["a"].success("上传成功"),d(t,e)):(we["a"].error(t.data.msg),j(e.name,"-",t.data.msg))})).catch((function(e){we["a"].error(e.msg)}))}}function d(e,n){var o=e.data.msg,a=n.name.substring(0,n.name.lastIndexOf(".")),r=n.name.substring(n.name.lastIndexOf(".")+1);if("zip"===r)ve.a.get(t.getShpId+o).then((function(e){e.data.data.forEach((function(e){var n=t.shpToGeoJSON+e;ve.a.get(n).then((function(e){var t={label:a,children:$l(e)};c.treeData.push(t),O("xbsjGeoJSON",n),j(a,o,"上传成功")}))}))}));else{var i=t.fileSource+o;ve.a.get(i).then((function(e){if(console.log(e),"json"===r){var n=a.substring(0,a.indexOf(".")),l={label:n,children:$l(e.data)};c.treeData.push(l),O("xbsjGeoJSON",i),j(a,o,"上传成功")}else if("kml"===r||"gml"===r){var s={label:c.objToLoad.name,children:es(e)};c.treeData.push(s);var u="gml"===r?"xbsjGML":"xbsjKML";O(u,i),j(a,o,"上传成功")}else ve.a.delete(t.fileSource+o).then((function(e){we["a"].error("格式错误，请重新上传")}))}))}}function m(e){ve.a.get(e).then((function(t){var n=t.data,o={label:c.objToLoad.name,children:$l(n)};c.treeData.push(o),console.log("tree: ",c.treeData),O("xbsjGeoJSON",e)}))}function b(e){var t;try{t=new ActiveXObject("Microsoft.xmlDOM")}catch(r){t=document.implementation.createDocument("","",null)}try{t.async=!1,t.load(e)}catch(r){var n=new window.XMLHttpRequest;n.open("GET",e,!1),n.send(null),4===n.readyState?n.responseXML?t=n.responseXML.documentElement:we["a"].error("文件格式错误"):we["a"].error("导入失败，未找到指定文件")}var o={label:c.objToLoad.name,children:es(t)};c.treeData.push(o);var a=-1===e.indexOf(".kml")?"xbsjGML":"xbsjKML";O(a,e)}function f(e){l.open(e).then((function(e){e.read().then((function(e){console.log(e)}))}))}function j(e,t,n){var o={fileName:e,id:t,status:n};c.infoData.push(o)}function O(t,n){var o={ref:n.slice(-32),name:c.objToLoad.name,url:n,xbsjType:t};if("xbsjGeoJSON"===t){var a=new XE.Obj.GeoJSON(e);a.xbsjFromJSON(o)}else if("xbsjKML"===t){var r=new XE.Obj.KML(e);r.xbsjFromJSON(o)}else{var i=new XE.Obj.GML(e);i.xbsjFromJSON(o)}}function v(e,n){ve.a.delete(t.fileSource+n.id).then((function(t){if(!0===t.data.success){var o=e.parent,a=o.data.children||o.data,r=a.findIndex((function(e){return e.id===n.id}));a.splice(r,1),we["a"].success(t.data.msg)}else we["a"].error(t.data.msg)}))}return Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,g.instance.getEarth();case 2:return e=n.sent,n.next=5,ve.a.get("Epsplanet_Assets/widgets/others/importData/requestConfig.json").then((function(e){t=e.data.request})).catch((function(e){we["a"].error("加载配置文件失败")}));case 5:case"end":return n.stop()}}),n)})))),Object(p["a"])(Object(p["a"])({},Object(o["toRefs"])(c)),{},{startLoadFromLocal:u,startLoadFromURL:s,deleteFile:v})}});const ns=P()(ts,[["render",Yl]]);var os=ns;os.install=function(e){e.component(os.name,os)};var as=os,rs={class:"epsplanet-panel-base generalQuery"},is=Object(o["createTextVNode"])("模糊查询"),cs=Object(o["createTextVNode"])(" 搜索 ");function ls(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-option"),l=Object(o["resolveComponent"])("el-select"),s=Object(o["resolveComponent"])("el-form-item"),u=Object(o["resolveComponent"])("el-col"),d=Object(o["resolveComponent"])("el-input"),p=Object(o["resolveComponent"])("el-checkbox"),m=Object(o["resolveComponent"])("el-button"),b=Object(o["resolveComponent"])("el-table-column"),f=Object(o["resolveComponent"])("el-table"),h=Object(o["resolveComponent"])("el-empty"),j=Object(o["resolveComponent"])("el-pagination"),O=Object(o["resolveComponent"])("el-row"),g=Object(o["resolveComponent"])("el-form"),v=Object(o["resolveDirective"])("loading");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",rs,[Object(o["createVNode"])(g,{size:"mini","label-width":"5px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(O,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{span:12},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{modelValue:e.curLayer,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.curLayer=t}),placeholder:"请选择图层",style:{width:"200px"},onVisibleChange:e.getLayerAttributes},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.layers,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:e.name,label:e.name,value:e.name},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onVisibleChange"])]})),_:1})]})),_:1}),Object(o["createVNode"])(u,{span:20},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.attributes,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.input,"onUpdate:modelValue":function(t){return e.input=t},placeholder:"请输入"+e.title},null,8,["modelValue","onUpdate:modelValue","placeholder"])]})),_:2},1024)})),256))]})),_:1}),Object(o["createVNode"])(u,{span:24},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{modelValue:e.fuzzy,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.fuzzy=t})},{default:Object(o["withCtx"])((function(){return[is]})),_:1},8,["modelValue"])]})),_:1}),Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{type:"info",onClick:e.findDataByAttribute},{default:Object(o["withCtx"])((function(){return[cs]})),_:1},8,["onClick"])]})),_:1}),Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])(f,{data:e.pageData,stripe:"","highlight-current-row":"",onCurrentChange:e.clickOneData},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(b,{type:"index"}),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.attributes,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(b,{prop:e.fieldName,label:e.title},null,8,["prop","label"])})),256))]})),_:1},8,["data","onCurrentChange"]),[[o["vShow"],e.pageData.length]]),Object(o["withDirectives"])(Object(o["createVNode"])(h,{description:"未找到符合条件的结果"},null,512),[[o["vShow"],0===e.total]])]})),_:1})),[[v,e.loading]]),Object(o["withDirectives"])(Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(j,{"page-size":e.pageSize,layout:"prev, pager, next,total",total:e.total,"current-page":e.currentPage,onCurrentChange:t[2]||(t[2]=function(t){return e.changePage(t)})},null,8,["page-size","total","current-page"])]})),_:1},512),[[o["vShow"],e.total>0]])]})),_:1})]})),_:1})]})),_:1})])}var ss=Object(o["defineComponent"])({name:"EpsplanetGeneralQuery",setup:function(){var e,t,n,a,r=Object(o["reactive"])({_disposers:[],attributes:[],curLayer:"",curAttr:"",curAttrName:"",currentPage:1,fuzzy:!0,layers:[],loading:!1,pageSize:10,pageData:[],services:[],searchResultData:[],selectedAttributes:[],showSelectedAttrOnly:!1,tabledata:[],total:0});function i(){e.interaction.picking.enabled=!0,e.czm.viewer.scene.globe.depthTestAgainstTerrain=!0,e.sceneTree.root.children.push({ref:"testTileset",czmObject:{xbsjType:"Tileset",name:"倾斜模型测试1",url:"http://39.152.31.83:11215/epsplanet/redirect/440a7e9564ea46809d6c0471cf25b84f/文件1/18ccc169ee2d4c79997ec65005abb32d/tileset.json?token=BbNgktJDJkqE2Sj1Iivy0gjQwLIlZAfN",skipLevelOfDetail:!1}}),a=e.sceneTree.$refs.testTileset,a.czmObject.flyTo()}Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:return e=t.sent,t.next=5,ve.a.get("Epsplanet_Assets/widgets/others/generalQuery/config.json").then((function(e){r.services=e.data.services,i()})).catch((function(e){we["a"].error("加载配置文件失败"),V()}));case 5:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){V()}));var c=function(){r.curAttr="",r.layers.length&&(r.layers=[]),r.attributes.length&&(r.attributes=[]),r.services.forEach((function(e){e.layers.forEach((function(e){r.layers.push(e),e.name===r.curLayer&&(e.showSelectedAttrOnly&&(r.showSelectedAttrOnly=e.showSelectedAttrOnly,r.selectedAttributes=e.selectedAttributes),e.searchKeys.forEach((function(e){r.attributes.push(e)})))}))}))},l=function(){r.loading=!0,v();var e="";r.attributes.forEach((function(t,n){t.input?r.fuzzy?e+="".concat(t.fieldName,"%20LIKE%20%27%25").concat(t.input,"%25%27%20"):e+="".concat(t.fieldName,"=%27").concat(t.input,"%27%20"):e+="1=1%20",n<r.attributes.length-1&&(e+="AND%20")}));var t=!0;r.services.forEach(function(){var n=Object(h["a"])(regeneratorRuntime.mark((function n(o){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t){n.next=4;break}return a="\n          ".concat(o.url,"/").concat(o.namespace,"/wfs?service=wfs\n          &request=GetFeature&version=1.1.0\n          &outputFormat=application/json\n          &TYPENAME=").concat(o.namespace,":").concat(r.curLayer,"\n          &CQL_FILTER=").concat(e,"\n          "),n.next=4,ve.a.get(a).then((function(e){200==e.status&&"OK"==e.statusText&&(0!==e.data.features.length?(r.searchResultData=e.data.features,r.total=e.data.features.length,C(1),b(),t=!1):r.total=0)})).catch((function(e){console.log(e),we["a"].error(e)}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),r.loading=!1},s=function(e,t){var n=[];switch(e.type){case"MultiPolygon":e.coordinates[0].forEach((function(e){e.forEach((function(e){n.push(Cesium.Math.toRadians(e[0]),Cesium.Math.toRadians(e[1]))}))})),u(n,"MultiPolygon",t);break;case"Polygon":e.coordinates.forEach((function(e){e.forEach((function(e){n.push(Cesium.Math.toRadians(e[0]),Cesium.Math.toRadians(e[1]))}))})),u(n,"Polygon",t);break;case"LineString":e.coordinates.forEach((function(e){n.push([Cesium.Math.toRadians(e[0]),Cesium.Math.toRadians(e[1])])})),u(n,"LineString",t);break;case"MultiLineString":e.coordinates[0].forEach((function(e){n.push([Cesium.Math.toRadians(e[0]),Cesium.Math.toRadians(e[1])])})),u(n,"MultiLineString",t);break;default:we["a"].warning("未读取到图形信息");break}},u=function(t,o,a){var r={};r="MultiPolygon"===o||"Polygon"===o?{ref:"graphicsPickUp",czmObject:{name:"graphicsPickUp",xbsjType:"ClassificationPolygon",positions:t,ground:!0,depthTest:!0}}:{ref:"graphicsPickUp",czmObject:{name:"graphicsPickUp",xbsjType:"Polyline",positions:t,ground:!0,depthTest:!0,width:20,material:{XbsjColorMaterial:{color:[.9058823529411765,.792156862745098,.03137254901960784,.8]}},evalString:"\n              setInterval(()=>{\n                p.material.XbsjColorMaterial.color[3] = p.material.XbsjColorMaterial.color[3] == 1 ? 0.8 :1\n              },500)\n            "}},e.sceneTree.root.children.push(r),n=e.sceneTree.$refs.graphicsPickUp,n.czmObject.flyTo()},d=function(e,t){w(),console.log(e),s(e.geometry,e),m(e)},m=function(e){r.tabledata=[],r.showSelectedAttrOnly?r.selectedAttributes.forEach((function(t){var n={name:t.title,value:e[t.fieldName]};r.tabledata.push(n)})):Object.keys(e).forEach((function(t){var n={name:t,value:e[t]};r.tabledata.push(n)})),f()},b=function(){var t=document.createElement("div");t.setAttribute("v-show","tabledata.length > 0"),t.id="general-query-popup",t.innerHTML="\n        <table></table>\n      ",e.czm.viewer.container.appendChild(t)},f=function(){var e=document.getElementById("general-query-popup");if(e){for(var t=e.getElementsByTagName("table")[0],n=t.rows.length-1;n>=0;n--)t.deleteRow(n);r.tabledata.forEach((function(e){var n=t.insertRow(),o=n.insertCell(),a=n.insertCell();o.innerHTML=e.name,a.innerHTML=e.value})),e.style.display="block"}},j=function(){var e=document.getElementById("general-query-popup");e&&(e.style.display="none")},O=function(){var t=document.getElementById("general-query-popup");t&&e.czm.viewer.container.removeChild(t)},v=function(){w(),r.searchResultData=[],r.pageData=[],r.tabledata=[]},w=function(){n&&(e.sceneTree.root.children.remove(n),n=void 0)},C=function(e){r.currentPage=e;for(var t=r.pageSize,n=(e-1)*t,o=e*t,a=n;a<o;a++)r.searchResultData[a]&&(r.searchResultData[a].properties.geometry=r.searchResultData[a].geometry,r.pageData.push(r.searchResultData[a].properties))},V=function(){t&&(t=t&&t.destroy()),v(),O(),a&&(e.sceneTree.root.children.remove(a),a=void 0),e.interaction.picking.enabled=!1,e.czm.scene.globe.depthTestAgainstTerrain=!1};return Object(p["a"])(Object(p["a"])({},Object(o["toRefs"])(r)),{},{getLayerAttributes:c,findDataByAttribute:l,clickOneData:d,changePage:C,closeInfoTable:j})}});const us=P()(ss,[["render",ls]]);var ds=us;ds.install=function(e){e.component(ds.name,ds)};var ps=ds,ms={class:"epsplanet-panel-base videoDelivery"},bs={class:"addVideo"},fs=Object(o["createTextVNode"])("确定"),hs={style:{float:"left"}},js=["onClick"],Os={class:"btnDiv"},gs=Object(o["createTextVNode"])("移动"),vs=Object(o["createTextVNode"])("旋转"),ws=Object(o["createTextVNode"])("透明度"),Cs=Object(o["createTextVNode"])("保存"),Vs={class:"heightSet"},xs=Object(o["createElementVNode"])("span",null,"近裁：",-1),ys=Object(o["createElementVNode"])("span",null,"远裁：",-1),Es=Object(o["createElementVNode"])("span",null,"水平广角：",-1),Ns=Object(o["createElementVNode"])("span",null,"垂直广角：",-1),_s={class:"dataExplain"},ks=Object(o["createElementVNode"])("br",null,null,-1),Ms=Object(o["createElementVNode"])("br",null,null,-1),Ts=Object(o["createElementVNode"])("br",null,null,-1);function Ps(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-input"),l=Object(o["resolveComponent"])("el-button"),s=Object(o["resolveComponent"])("EpsplanetButton"),u=Object(o["resolveComponent"])("el-option"),d=Object(o["resolveComponent"])("el-select"),p=Object(o["resolveComponent"])("el-switch"),m=Object(o["resolveComponent"])("el-slider"),b=Object(o["resolveComponent"])("el-collapse-item"),f=Object(o["resolveComponent"])("el-collapse");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ms,[Object(o["createVNode"])(s,{btnName:"添加链接",title:"添加链接",panel:e.panel,ref:"add"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",bs,[Object(o["createVNode"])(c,{modelValue:e.videoName,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.videoName=t}),placeholder:"请输入名称"},null,8,["modelValue"]),Object(o["createVNode"])(c,{modelValue:e.videoUrl,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.videoUrl=t}),placeholder:"请输入视频地址"},null,8,["modelValue"]),Object(o["createVNode"])(l,{class:"longBtn",onClick:t[2]||(t[2]=function(t){return e.createVideo()})},{default:Object(o["withCtx"])((function(){return[fs]})),_:1})])]})),_:1},8,["panel"]),Object(o["createVNode"])(d,{filterable:"",modelValue:e.demoData,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.demoData=t}),placeholder:"请选择样例地址"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.cameraVideoJson,(function(t){return Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:t.czmObject.name,label:t.czmObject.name,value:t.czmObject.name},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("span",hs,Object(o["toDisplayString"])(t.czmObject.name),1),Object(o["createElementVNode"])("span",{onClick:function(n){return e.clickCreatVideo(t)},style:{float:"right",color:"#8492a6","font-size":"13px"}},"定位",8,js)]})),_:2},1032,["label","value"])})),128))]})),_:1},8,["modelValue"]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div",Os,[Object(o["createVNode"])(l,{onClick:t[4]||(t[4]=function(t){return e.positionEditing=!e.positionEditing})},{default:Object(o["withCtx"])((function(){return[gs]})),_:1}),Object(o["createVNode"])(l,{onClick:t[5]||(t[5]=function(t){return e.rotationEditing=!e.rotationEditing})},{default:Object(o["withCtx"])((function(){return[vs]})),_:1}),Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])((function(){return[ws]})),_:1}),Object(o["createVNode"])(l,{onClick:t[6]||(t[6]=function(t){return e.show=!e.show})},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("span",null,"显示",512),[[o["vShow"],!e.show]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("span",null,"隐藏",512),[[o["vShow"],e.show]])]})),_:1})]),Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(p,{modelValue:e.assistLine,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.assistLine=t}),"active-color":"#409EFF","active-text":"辅助线","inactive-text":"辅助线"},null,8,["modelValue"]),Object(o["createVNode"])(l,{class:"save",onClick:e.save},{default:Object(o["withCtx"])((function(){return[Cs]})),_:1},8,["onClick"])]),Object(o["createVNode"])(f,{modelValue:e.activeName,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.activeName=t}),onChange:e.collapseChange},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(b,{title:"高级设置",name:"2"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",Vs,[xs,Object(o["createVNode"])(c,{modelValue:e.nearClip,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.nearClip=t}),placeholder:""},null,8,["modelValue"]),ys,Object(o["createVNode"])(c,{modelValue:e.farClip,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.farClip=t}),placeholder:""},null,8,["modelValue"]),Es,Object(o["createVNode"])(m,{modelValue:e.fovH,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.fovH=t}),min:1,max:179,step:"1"},null,8,["modelValue"]),Ns,Object(o["createVNode"])(m,{modelValue:e.fovV,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.fovV=t}),min:1,max:179,step:"1"},null,8,["modelValue"])]),Object(o["createElementVNode"])("div",_s,[Object(o["createElementVNode"])("span",null,"经度："+Object(o["toDisplayString"])(e.position[0].toFixed(5))+"°",1),Object(o["createElementVNode"])("span",null,"偏航角："+Object(o["toDisplayString"])(e.rotation[0].toFixed(5))+"°",1),ks,Object(o["createElementVNode"])("span",null,"纬度："+Object(o["toDisplayString"])(e.position[1].toFixed(5))+"°",1),Object(o["createElementVNode"])("span",null,"俯仰角："+Object(o["toDisplayString"])(e.rotation[1].toFixed(5))+"°",1),Ms,Object(o["createElementVNode"])("span",null,"高度："+Object(o["toDisplayString"])(e.position[2].toFixed(2))+"m",1),Object(o["createElementVNode"])("span",null,"翻滚角："+Object(o["toDisplayString"])(e.rotation[2].toFixed(5))+"°",1),Ts])]})),_:1})]})),_:1},8,["modelValue","onChange"])],512),[[o["vShow"],e.setting]])])}var Ss=Object(o["defineComponent"])({name:"EpsplanetVideoDelivery",props:[],components:{EpsplanetButton:z},setup:function(e){var t,n,a=Object(o["getCurrentInstance"])(),r=a.proxy,i=r,c=Object(o["reactive"])({activeName:["1"],nearClip:1,farClip:1e3,fovH:10,fovV:10,position:[0,0,0],rotation:[0,0,0],videoUrl:"",cameraVideoJson:[],_video:n,_disposers:[],positionEditing:!1,rotationEditing:!1,videoName:"",panel:{position:{top:0,left:330}},demoData:{},assistLine:!0,setting:!1,show:!0});function l(){c.cameraVideoJson.push({ref:"cameravideo",czmObject:{xbsjType:"CameraVideo",name:"玍海西桥监控1",videoUrl:"http://60.16.5.231:1280/gb28181/21010100001320001005.flv",position:[2.1240572232916772,.7335811944476671,175.24124844676504],rotation:[2.151347155078313,0,0],far:5e3,near:1}},{ref:"cameravideo",czmObject:{xbsjType:"CameraVideo",name:"视频融合",videoUrl:"//www.earthsdk.com/v/last/XbsjEarthUI/assets/demo.mp4",position:[1.9017043698837766,.5972379094016695,446.2499351617626],rotation:[.07413323656963833,-.933639537288121,.0003900191769634631],far:5e3,near:1}})}function s(e){c.videoUrl=e.czmObject.videoUrl,c.videoName=e.czmObject.name,u(e.czmObject.position,e.czmObject.rotation),c._video.twoPostionsEditing=!1,c.farClip=Number(e.czmObject.far),c.nearClip=Number(e.czmObject.near),c._video.flyTo(0)}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];b(),c.setting=!0;var o=new XE.Obj.CameraVideo(t);c._video=o,o.twoPostionsEditing=!0,o.videoUrl=c.videoUrl,o.position=e,o.rotation=n,c._disposers.push(XE.MVVM.bind(i,"positionEditing",o,"positionEditing"),XE.MVVM.bind(i,"rotationEditing",o,"rotationEditing"),XE.MVVM.bindPosition(i,"position",o,"position"),XE.MVVM.bindRotation(i,"rotation",o,"rotation"),XE.MVVM.bind(i,"nearClip",o,"near"),XE.MVVM.bind(i,"farClip",o,"far"),XE.MVVM.bind(i,"videoUrl",o,"videoUrl"),XE.MVVM.bindDegreeRadian(i,"fovH",o,"fovH"),XE.MVVM.bindDegreeRadian(i,"fovV",o,"fovV"),XE.MVVM.bind(i,"show",o,"show"),XE.MVVM.bind(i,"assistLine",o,"showHelper"),XE.MVVM.watch((function(){c.positionEditing=c._video.positionEditing,c.rotationEditing=c._video.rotationEditing})))}function d(){c._video.name=c.videoName,c.videoName="";var e=c._video.toAllJSON(),n=new XE.Obj.CameraVideo(t);n.xbsjFromJSON(e);var o=new XE.SceneTree.Leaf(n);t.sceneTree.root.children.push(o),m(o);var a=setTimeout((function(){b(),clearTimeout(a)}),1e3)}function m(e){t.videoDelivery||(t.videoDelivery=[]),t.videoDelivery.push(e)}function b(){c._disposers&&(c._disposers.forEach((function(e){return e()})),c._disposers.length=0),c._video&&(c._video.destroy(),c._video=void 0)}Object(o["watch"])((function(){return c.fovH}),(function(e){c.fovH=Number(e.toFixed(0))})),Object(o["watch"])((function(){return c.fovV}),(function(e){c.fovV=Number(e.toFixed(0))})),Object(o["watch"])((function(){return c.farClip}),(function(e){c.farClip=Number(e)})),Object(o["watch"])((function(){return c.nearClip}),(function(e){c.nearClip=Number(e)})),Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g.instance.getEarth();case 2:t=e.sent,l();case 4:case"end":return e.stop()}}),e)})))),Object(o["onBeforeUnmount"])((function(){b()}));var f=Object(o["toRefs"])(c);return Object(p["a"])(Object(p["a"])({},f),{},{init:l,clickCreatVideo:s,createVideo:u,save:d,del:b})}});const zs=P()(Ss,[["render",Ps]]);var Rs=zs;Rs.install=function(e){e.component(Rs.name,Rs)};var Bs=Rs,Xs={class:"epsplanet-panel-base dataOutput"},Ls=Object(o["createTextVNode"])("全图层"),Us=Object(o["createTextVNode"])("绘制面"),As=Object(o["createTextVNode"])("  shp  "),Ds=Object(o["createTextVNode"])("geojson"),Is=Object(o["createTextVNode"])("导出");function Gs(e,t,n,a,r,i){var c=Object(o["resolveComponent"])("el-option"),l=Object(o["resolveComponent"])("el-select"),s=Object(o["resolveComponent"])("el-form-item"),u=Object(o["resolveComponent"])("el-radio"),d=Object(o["resolveComponent"])("el-radio-group"),p=Object(o["resolveComponent"])("el-divider"),m=Object(o["resolveComponent"])("el-button"),b=Object(o["resolveComponent"])("el-form");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Xs,[Object(o["createVNode"])(b,{class:"demo-form-inline","label-position":"right"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{label:"图层"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(l,{modelValue:e.curlayer,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.curlayer=t}),placeholder:"请选择图层",multiple:"","collapse-tags":"","collapse-tags-tooltip":""},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.layerList,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:e.name,label:e.label,value:e.name},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])])]})),_:1}),Object(o["createVNode"])(s,{label:"范围"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:e.queryRange,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.queryRange=t}),onChange:e.selectRange},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{label:"all"},{default:Object(o["withCtx"])((function(){return[Ls]})),_:1}),Object(o["createVNode"])(u,{label:"draw"},{default:Object(o["withCtx"])((function(){return[Us]})),_:1})]})),_:1},8,["modelValue","onChange"])]})),_:1}),Object(o["createVNode"])(s,{label:"格式",class:"format"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(d,{modelValue:e.exportType,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.exportType=t})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{label:"shp"},{default:Object(o["withCtx"])((function(){return[As]})),_:1}),Object(o["createVNode"])(u,{label:"geojson"},{default:Object(o["withCtx"])((function(){return[Ds]})),_:1})]})),_:1},8,["modelValue"])])]})),_:1}),Object(o["createVNode"])(p,{style:{margin:"-8px 0px 6px 0px"}}),Object(o["createVNode"])(m,{style:{width:"100%"},onClick:e.exportdata},{default:Object(o["withCtx"])((function(){return[Is]})),_:1},8,["onClick"])]})),_:1})])}n("3ca3"),n("2b3d"),n("9861");var Hs=n("ee5b"),Fs=n.n(Hs),Ws=n("31bf"),qs=n.n(Ws),Ks=Object(o["defineComponent"])({name:"EpsplanetDataOutput",props:[],setup:function(){var e,t,n,a,r,i,l,s,u=Object(o["getCurrentInstance"])(),d=(u.proxy,Object(o["reactive"])({curlayer:"",layerList:[],exportType:"shp",queryRange:"all"}));Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getEarth();case 2:e=t.sent,m();case 4:case"end":return t.stop()}}),t)})))),Object(o["onBeforeUnmount"])((function(){V()}));var m=function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ve.a.get("Epsplanet_Assets/widgets/others/dataOutput/config.json").then((function(e){d.layerList=e.data.layerList,t=e.data.proxy})).catch((function(e){we["a"].error("加载配置文件失败"),V()}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){if(a||"draw"!=d.queryRange){var e=[];d.curlayer.forEach((function(n){d.layerList.forEach((function(o){if(n==o.name){var r="shp"==d.exportType?"shape-zip":"application/json",i="all"==d.queryRange?"1=1":"INTERSECTS(".concat(o.geometry_name,",SRID=4326;POLYGON((").concat(a,")))"),c="".concat(t,"/").concat(o.namespace,"/wfs?service=wfs\n          &request=GetFeature&version=1.1.0\n          &outputFormat=").concat(r,"\n          &TYPENAME=").concat(o.namespace,":").concat(o.name,"\n          &CQL_FILTER=").concat(i);e.push(c)}}))}));var n=d.curlayer.length;switch(n){case 0:console.log("导出失败，未选择图层！！！");break;case 1:w(e[0]);break;default:v(e);break}}else we["a"].warning("未识别到范围线信息,")},f=function(){n||r?n&&r&&(r.innerHTML='<div style="cursor:pointer;position:absolute;width:300px;left:6px;line-height:15px;color:white;"><span style="padding:2px;border-radius:2px;text-stroke:2px #000;font-size:14px;color:#ffffff;background-color:rgba(50,50,50,0.5)">点击左键开始绘制!</span></div>',n.creating=!0,n.show=!0,r.enabled=!0):(r=new XE.Obj.Plots.GeoPin(e),r.innerHTML='<div style="cursor:pointer;position:absolute;width:300px;left:6px;line-height:15px;color:white;"><span style="padding:2px;border-radius:2px;text-stroke:2px #000;font-size:14px;color:#ffffff;background-color:rgba(50,50,50,0.5)">点击左键开始绘制!</span></div>',n=new XE.Obj.Plots.GeoPolygon(e),n.creating=!0,i=new Cesium.ScreenSpaceEventHandler(e.czm.viewer.scene.canvas),i.setInputAction((function(e){n.positions.length>=4&&(r.innerHTML='<div style="cursor:pointer;position:absolute;width:300px;left:6px;line-height:15px;color:white;"><span style="padding:2px;border-radius:2px;text-stroke:2px #000;font-size:14px;color:#ffffff;background-color:rgba(50,50,50,0.5)">按"SHITF + 右键"结束绘制!</span></div>')}),Cesium.ScreenSpaceEventType.LEFT_CLICK),l=new Cesium.ScreenSpaceEventHandler(e.czm.viewer.scene.canvas),l.setInputAction((function(e){r.enabled=!1,a=j(n.positions)}),Cesium.ScreenSpaceEventType.RIGHT_CLICK,Cesium.KeyboardEventModifier.SHIFT),s=XE.MVVM.watch((function(){return Object(c["a"])(n.positions)}),(function(){r.position=n.positions[n.positions.length-1]})),window["polygon"]=n,window["pin"]=r)},j=function(e){var t="",n="";return e.forEach((function(e,o){var a=Cesium.Math.toDegrees(e[0]),r=Cesium.Math.toDegrees(e[1]);t+="".concat(a," ").concat(r,","),n=0==o?"".concat(a," ").concat(r):n})),t+=n,t},O=function(e){return new Promise((function(t,n){ve()({method:"get",url:e,responseType:"arraybuffer"}).then((function(e){t(e.data)})).catch((function(e){n(e.toString())}))}))},v=function(e){var t=new Fs.a,n={},o=[];e.forEach((function(e,a){var r=O(e).then((function(e){var o="geojson"==d.exportType?"导出geojson"+a+".json":"导出shp"+a+".zip";t.file(o,e,{binary:!0}),n[o]=e}));o.push(r)})),Promise.all(o).then((function(){t.generateAsync({type:"blob"}).then((function(e){var t="geojson"==d.exportType?"批量下载geojson.zip":"批量下载shp.zip";qs.a.saveAs(e,t)}))}))},w=function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("geojson"!=d.exportType){e.next=5;break}return e.next=3,ve.a.get(t).then((function(e){if(200==e.status&&"OK"==e.statusText){var t=JSON.stringify(e.data),n=d.curlayer[0]+".json",o=new Blob([t],{type:"application/json"}),a=URL.createObjectURL(o),r=document.createElement("a");document.body.appendChild(r),r.setAttribute("href",a),r.setAttribute("download",n),r.click(),URL.revokeObjectURL(a),document.body.removeChild(r)}})).catch((function(e){console.log(e)}));case 3:e.next=6;break;case 5:"shp"==d.exportType&&(n=d.curlayer[0]+".zip",o=document.createElement("a"),document.body.appendChild(o),o.setAttribute("href",t),o.setAttribute("download",n),o.click(),URL.revokeObjectURL(t),document.body.removeChild(o));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(e){"all"==e?(n.creating=!1,n.show=!1,r.innerHTML=""):f()};function V(){n&&(n.destroy(),n=void 0),r&&(r.destroy(),r=void 0),(i||l)&&(i=i&&i.destroy(),l=l&&l.destroy()),s()}var x=Object(o["toRefs"])(d);return Object(p["a"])(Object(p["a"])({},x),{},{del:V,selectRange:C,exportdata:b})}});const Ys=P()(Ks,[["render",Gs]]);var Js=Ys;Js.install=function(e){e.component(Js.name,Js)};var Qs=Js,Zs=[as,ps,Bs,Qs],$s=Object(o["defineComponent"])({name:"EpsplanetCameraHome",props:["btnClass"],setup:function(e){var t;Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,g.instance.getEarth();case 2:t=n.sent,t.cameraViewManager.globe.flyTo(),v(e.btnClass,!1);case 5:case"end":return n.stop()}}),n)}))))}});const eu=$s;var tu=eu;tu.install=function(e){e.component(tu.name,tu)};var nu=tu,ou=Object(o["defineComponent"])({name:"EpsplanetScreenshot",props:["btnClass"],setup:function(e){var t,n=Object(o["reactive"])({});function a(){t.capture(1920,1080).then((function(e){var t=document.createElement("a");t.href=e,t.download="截图.png",t.click()})).catch((function(e){console.log(e)}))}return Object(o["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,g.instance.getEarth();case 2:t=n.sent,a(),v(e.btnClass,!1);case 5:case"end":return n.stop()}}),n)})))),Object(p["a"])({},Object(o["toRefs"])(n))}});const au=ou;var ru=au;ru.install=function(e){e.component(ru.name,ru)};var iu=ru,cu=[nu,iu],lu=n("876b"),su=n("c3a1"),uu=Object(o["createApp"])(gu);uu.use(su["a"]),uu.use(fu);var du=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=Object(o["h"])(Y,e);return a.appContext=n,Object(o["render"])(a,t),document.body.appendChild(t.firstElementChild),a.component};function pu(e,t,n){var a=document.createElement("div"),r=du(e,a,t,n),i=null===r||void 0===r?void 0:r.proxy;for(var c in e)Object(lu["hasOwn"])(e,c)&&!Object(lu["hasOwn"])(i.$props,c)&&(i[c]=e[c]);if(Object(o["isVNode"])(n))return console.log(n),n.type.components||(n.type.components={}),n.type.components=Object.assign(n.type.components,uu._context.components),r.slots.default=function(){return[n]},r.proxy;if("string"===typeof n){var l=Object(o["resolveComponent"])(n);console.log(l);var s=Object(o["h"])(n);console.log(s)}}n("2c81"),n("e3f4");var mu=[].concat(Object(c["a"])(Pe),Object(c["a"])(to),Object(c["a"])(ri),Object(c["a"])(ic),Object(c["a"])(Gc),Object(c["a"])(rl),Object(c["a"])(jl),Object(c["a"])(Xl),Object(c["a"])(Zs),Object(c["a"])(cu)),bu=function(e){mu.map((function(t){return e.component(t.name,t)}))},fu={install:bu},hu=Object(o["defineComponent"])({name:"App",components:{EpsplanetCloud:ui},data:function(){return{testComp:"",show:!1,toolbarPosition:{top:"10px",left:"10px"},comps:[{label:"模型拾取",component:"EpsplanetModelPicker",icon:"icon-shiqu",position:{top:10,left:700},panel:{position:{top:50,left:100}}},{label:"场景截图",component:"EpsplanetScreenshot",icon:"icon-gongju-8",position:{top:10,left:700},type:"trigger"},{label:"飞行轨迹",component:"EpsplanetAviation",icon:"icon-tool_wsjg_fxgj",panel:{position:{top:50,left:100}}},{label:"双屏对比",component:"EpsplanetDoubleView",icon:"icon-tool_dp_spdb",position:{top:10,left:780},panel:{position:{top:50,left:100}}},{label:"卷帘对比",component:"EpsplanetSliderScreen",icon:"icon-tool_dxhz_chuangliang",position:{top:10,left:780},panel:{position:{top:50,left:100}}},{label:"外部数据",component:"EpsplanetImportData",icon:"icon-tab_wbsj",position:{top:10,left:850},panel:{position:{top:50,left:100}}},{label:"通用查询",component:"EpsplanetGeneralQuery",icon:"icon-tab_tycx",position:{top:10,left:880},panel:{size:{width:300,height:400},position:{top:50,left:100},dockMode:"bottom",showTitle:!0}},{label:"剖切",component:"EpsplanetSliced",icon:"icon-tool_kjcx_pq",panel:{position:{top:50,left:100}}},{label:"图层树",component:"EpsplanetLayerList",icon:"icon-layerlist",panel:{position:{top:80,left:100}}},{label:"模型库",component:"EpsplanetModelBase",icon:"icon-tool_mxk",position:{top:10,left:20},panel:{position:{top:80,left:100},dockMode:"left",showTitle:!1}},{label:"视频投放",component:"EpsplanetVideoDelivery",icon:"icon-tool_wsjg_cjmy",position:{top:10,left:20},panel:{position:{top:0,left:50}}},{label:"微观拾取",component:"EpsplanetVectorPicker",icon:"icon-tool_dxsq_wgsq",position:{top:10,left:20},panel:{position:{top:0,left:50}}},{label:"地下模式",component:"EpsplanetUnderground",icon:"icon-dixia",position:{top:10,left:20},type:"trigger"},{label:"地表透明",component:"EpsplanetSurfaceOpacity",icon:"icon-dixia",position:{top:10,left:20},panel:{position:{top:0,left:50}}},{label:"返回全球",component:"EpsplanetCameraHome",icon:"icon-tool_wsjg",position:{top:70,left:20},type:"trigger"}],comps_effect:[{label:"云",component:"EpsplanetCloud",icon:"icon-tool_swtx_yun",position:{top:10,left:20},panel:{size:{width:300,height:200},position:{top:50,left:50}}},{label:"雪",component:"EpsplanetSnow",icon:"icon-tool_swtx_xue",position:{top:10,left:80},panel:{size:{width:300,height:200},position:{top:50,left:50}}},{label:"雨",component:"EpsplanetRain",icon:"icon-tool_swtx_yu",position:{top:10,left:110},type:"switch"},{label:"黑白",component:"EpsplanetBlackwhite",icon:"icon-tool_swtx_heibai",position:{top:10,left:140},panel:{size:{width:300,height:200},position:{top:50,left:50}}},{label:"泛光",component:"EpsplanetBloom",icon:"icon-tool_swtx_fg",position:{top:10,left:170},panel:{size:{width:300,height:200},position:{top:50,left:50}}},{label:"亮度",component:"EpsplanetBrightness",icon:"icon-tool_swtx_liangdu",panel:{position:{top:50,left:50}}},{label:"马赛克",component:"EpsplanetMosaic",icon:"icon-tool_swtx_msk",type:"switch"},{label:"夜视",component:"EpsplanetNightvision",icon:"icon-tool_swtx_ys",panel:{position:{top:50,left:50}},type:"switch"},{label:"阴影",component:"EpsplanetShadow",icon:"icon-tool_swtx_yinying",panel:{position:{top:50,left:50}}},{label:"轮廓",component:"EpsplanetSilhouette",icon:"icon-tool_swtx_lunk",type:"switch",panel:{position:{top:50,left:50}}}],comps_measure:[{label:"点位",component:"EpsplanetMeasurePoint",icon:"icon-tool_swcl_dianbiao",position:{top:10,left:420},type:"trigger"},{label:"距离",component:"EpsplanetMeasureDistance",icon:"icon-tool_swcl_jl",position:{top:10,left:480},type:"trigger"},{label:"高度",component:"EpsplanetMeasureHeight",icon:"icon-tool_swcl_gd",position:{top:10,left:480},type:"trigger"},{label:"空间面积",component:"EpsplanetMeasureArea",icon:"icon-tool_swcl_mian",position:{top:10,left:480},type:"trigger"},{label:"立体面积",component:"EpsplanetGroundArea",icon:"icon-tool_dxhz_mj",position:{top:10,left:540},panel:{size:{width:300,height:200},position:{top:50,left:50}},type:"trigger"},{label:"方位角",component:"EpsplanetMeasureAzimuth",icon:"icon-tool_dxhz_jd",position:{top:10,left:600},panel:{size:{width:300,height:200},position:{top:50,left:50}}},{label:"贴地距离",component:"EpsplanetGroundDistance",icon:"icon-tool_dxhz_tdjl",position:{top:10,left:640},panel:{size:{width:300,height:200},position:{top:50,left:50}},type:"trigger"},{label:"清除测量",component:"EpsplanetMeasureClear",icon:"icon-close",position:{top:10,left:450},type:"trigger"}],comps_plot:[{label:"点标",component:"EpsplanetPoint",icon:"icon-tool_dxhz_dianbiao",panel:{size:{width:300,height:200},position:{top:50,left:50}}},{label:"折线",component:"EpsplanetPolyline",icon:"icon-tool_dxhz_zhexian",panel:{size:{width:300,height:200},position:{top:50,left:50}}},{label:"多边形",component:"EpsplanetPolygon",icon:"icon-tool_dxhz_dbx",panel:{size:{width:300,height:200},position:{top:50,left:50}}},{label:"矩形",component:"EpsplanetRectangle",icon:"icon-tool_dxhz_jx",panel:{size:{width:300,height:200},position:{top:50,left:50}}},{label:"水面",component:"EpsplanetWater",icon:"icon-water",panel:{size:{width:300,height:200},position:{top:50,left:50}}},{label:"圆",component:"EpsplanetCircle",icon:"icon-tool_dxhz_yuan",panel:{size:{width:300,height:200},position:{top:50,left:50}}},{label:"单箭头",component:"EpsplanetArrow",icon:"icon-tool_dxhz_jt",panel:{size:{width:300,height:200},position:{top:50,left:50}}},{label:"双箭头",component:"EpsplanetDoubleArrow",icon:"icon-tool_dxhz_sjt",panel:{size:{width:300,height:200},position:{top:50,left:50}}},{label:"道路",component:"EpsplanetGroundRoad",icon:"icon-tool_dxhz_gl",position:{top:10,left:260},panel:{position:{top:50,left:50}}},{label:"贴地图片",component:"EpsplanetGroundImage",icon:"icon-tool_dxhz_tdtp",panel:{position:{top:50,left:50}}},{label:"粒子系统",component:"EpsplanetParticle",icon:"icon-tool_dxhz_lzps",panel:{position:{top:50,left:50}}},{label:"平滑多边形",component:"EpsplanetSmoothPolygon",icon:"icon-tool_dxhz_yjdbx",panel:{position:{top:50,left:50}}},{label:"单体化",component:"EpsplanetHaplochromatization",icon:"icon-tool_dxhz_dth",panel:{position:{top:50,left:50}}},{label:"立体形",component:"EpsplanetThreeDimensional",icon:"icon-tool_swtx",panel:{position:{top:50,left:50}}}],comps_analysis:[{label:"开挖分析",component:"EpsplanetPotholing",icon:"icon-tool_kjcx_kwfx",panel:{position:{top:0,left:50}}},{label:"模型压平",component:"EpsplanetFlatten",icon:"icon-tool_kjcx_mxyp",panel:{position:{top:0,left:50}}},{label:"控高分析",component:"EpsplanetControlHeight",icon:"icon-tool_kjcx_kgfx",position:{top:10,left:20},panel:{position:{top:0,left:50}}},{label:"通视分析",component:"EpsplanetLineOfSight",icon:"icon-tool_kjcx_tsfx",position:{top:10,left:260},panel:{position:{top:50,left:50}}},{label:"等高线",component:"EpsplanetContour",icon:"icon-tool_kjcx_dgx",position:{top:10,left:510},panel:{position:{top:50,left:50}}},{label:"淹没",component:"EpsplanetFlood",icon:"icon-tool_kjcx_xmfx",position:{top:10,left:320},panel:{position:{top:50,left:50}}},{label:"剖面",component:"EpsplanetProfile",icon:"icon-tool_kjcx_pmfx",position:{top:10,left:350},panel:{size:{width:800,height:400},position:{top:50,left:50}}},{label:"可视域",component:"EpsplanetVisual",icon:"icon-tool_kjcx_ksyfx",panel:{position:{top:50,left:50}}},{label:"地形着色",component:"EpsplanetTerrainShading",icon:"icon-tab_wapian_secai",panel:{position:{top:50,left:50}}}],comps_other:[{label:"场景截图",component:"EpsplanetScreenshot",icon:"icon-gongju-8",position:{top:10,left:700},type:"trigger"},{label:"飞行轨迹",component:"EpsplanetAviation",icon:"icon-tool_wsjg_fxgj",position:{top:10,left:750},panel:{size:{width:300,height:400},position:{top:50,left:100}}},{label:"双屏对比",component:"EpsplanetDoubleView",icon:"icon-tool_kjcx_pq",position:{top:10,left:780},panel:{size:{width:300,height:400},position:{top:50,left:100}}},{label:"外部数据",component:"EpsplanetImportData",icon:"icon-tab_wbsj",position:{top:10,left:850},panel:{size:{width:300,height:400},position:{top:50,left:100}}},{label:"通用查询",component:"EpsplanetGeneralQuery",icon:"icon-tab_tycx",position:{top:10,left:880},panel:{size:{width:300,height:400},position:{top:50,left:100}}},{label:"卷帘",component:"EpsplanetsliderScreen",icon:"icon-tab_wbsj",position:{top:10,left:910},panel:{size:{width:300,height:400},position:{top:50,left:100}}}]}},watch:{testComp:{handler:function(e){console.log(e,Object(o["resolveComponent"])("EpsplanetSnow"),ui)},deep:!0}},mounted:function(){Object(o["resolveDynamicComponent"])("EpsplanetSnow");document.body.setAttribute("data-sunwayTheme","light")},methods:{openPanel:function(){this.testComp="EpsplanetSnow",setTimeout((function(){var e=pu({title:"test",panel:{position:{top:300,left:300},dockMode:"bottom",showTitle:!0}},null,Object(o["h"])(ui));console.log(e),e.opened=!0}),500)},handleClick:function(){},handleChangeSlider:function(e){console.log(e)},changeTheme:function(){var e,t,n,o=null===(e=document.getElementById("app"))||void 0===e?void 0:e.getAttribute("data-sunwayTheme");"light"==o?null===(t=document.getElementById("app"))||void 0===t||t.setAttribute("data-sunwayTheme","dark"):null===(n=document.getElementById("app"))||void 0===n||n.setAttribute("data-sunwayTheme","light")},clickBtn:function(e){console.log(e)},onReady:function(e){console.log("加载完毕",e),e.sceneTree.root.children.push({czmObject:{xbsjType:"Imagery",xbsjGuid:"41f7f98c-5c95-4e96-b67e-ccf5ece0920d",name:"天地图影像",xbsjImageryProvider:{XbsjImageryProvider:{url:"http://t6.tianditu.com/DataServer?T=img_w&x={x}&y={y}&l={z}&tk=cf7c0b94d43b4d5e1f27a5712b147c70"},UrlTemplateImageryProvider:{},WebMapServiceImageryProvider:{},WebMapTileServiceImageryProvider:{},ArcGisMapServerImageryProvider:{},GoogleEarthEnterpriseImageryProvider:{},createTileMapServiceImageryProvider:{}}}},{czmObject:{show:!1,xbsjType:"Terrain",xbsjGuid:"d47253ba-f703-4282-92fd-0a5de4ebeb9a",name:"全球14级地形",xbsjTerrainProvider:{type:"XbsjCesiumTerrainProvider",XbsjEllipsoidTerrainProvider:{},XbsjCesiumTerrainProvider:{url:"http://www.supermapol.com/realspace/services/3D-stk_terrain/rest/realspace/datas/info/data/path",requestVertexNormals:!0,requestWaterMask:!0},GoogleEarthEnterpriseTerrainProvider:{}}}},{czmObject:{xbsjType:"Tileset",xbsjGuid:"27190b56-16c3-4875-b650-5f3727b1a001",name:"美丽乡村",url:"http://lab.earthsdk.com/model/b2039420837611eaae25edb63a66f405/tileset.json",xbsjPosition:[1.7670422767348508,.4268790916671945,0],xbsjClippingPlanes:{},xbsjCustomShader:{}}},{czmObject:{xbsjType:"Tileset",xbsjGuid:"defdf8aa-b108-4215-aff4-e2fb4ee25602",name:"大雁塔",url:"https://lab.earthsdk.com/model/66327820ce5f11eab7a4adf1d6568ff7/tileset.json",xbsjPosition:[1.9017002809975097,.5972446887154512,3.0624089850964736e-9],xbsjClippingPlanes:{},xbsjCustomShader:{}}},{czmObject:{xbsjType:"Tileset",name:"模型拾取单体测试模型",url:"//lab.earthsdk.com/model/d16c1ce0ac2d11e99dbd8fd044883638/tileset.json",skipLevelOfDetail:!1,xbsjUseOriginTransform:!1,xbsjPosition:[1.9016974701882112,.5972325152147303,500.8641913624607]}},{title:"二维规划",children:[{czmObject:{xbsjType:"Imagery",xbsjGuid:"2d6ded21-0be0-4d67-b305-e5fe996cf03e",name:"安防_L",rectangle:[2.1580196857746077,.458684147441102,2.1583248605632797,.45888781192618655],xbsjImageryProvider:{XbsjImageryProvider:{},UrlTemplateImageryProvider:{},WebMapServiceImageryProvider:{},WebMapTileServiceImageryProvider:{url:"/geoserver39/gwc/service/wmts/rest/2dd391dcc4fa481bb982092c52a77a8b:安防_L_EPSNet/{style}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}?format=image/png",format:"image/png",layer:"安防_L_EPSNet",style:"line",tileMatrixSetID:"EPSG:4326",tileMatrixLabels:["EPSG:4326:0","EPSG:4326:1","EPSG:4326:2","EPSG:4326:3","EPSG:4326:4","EPSG:4326:5","EPSG:4326:6","EPSG:4326:7","EPSG:4326:8","EPSG:4326:9","EPSG:4326:10","EPSG:4326:11","EPSG:4326:12","EPSG:4326:13","EPSG:4326:14","EPSG:4326:15","EPSG:4326:16","EPSG:4326:17","EPSG:4326:18","EPSG:4326:19","EPSG:4326:20","EPSG:4326:21"],tilingScheme:"Geographic",maximumLevel:21},ArcGisMapServerImageryProvider:{},GoogleEarthEnterpriseImageryProvider:{},createTileMapServiceImageryProvider:{},type:"WebMapTileServiceImageryProvider"}}},{czmObject:{xbsjType:"Imagery",xbsjGuid:"d21ad228-7f57-4a7f-a0a7-d708a21a2555",name:"安防_P",rectangle:[2.1580196857746077,.458684147441102,2.1583248605632797,.45888781192618655],xbsjImageryProvider:{XbsjImageryProvider:{},UrlTemplateImageryProvider:{},WebMapServiceImageryProvider:{},WebMapTileServiceImageryProvider:{url:"/geoserver39/gwc/service/wmts/rest/2dd391dcc4fa481bb982092c52a77a8b:安防_P_EPSNet/{style}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}?format=image/png",format:"image/png",layer:"安防_P_EPSNet",style:"point",tileMatrixSetID:"EPSG:4326",tileMatrixLabels:["EPSG:4326:0","EPSG:4326:1","EPSG:4326:2","EPSG:4326:3","EPSG:4326:4","EPSG:4326:5","EPSG:4326:6","EPSG:4326:7","EPSG:4326:8","EPSG:4326:9","EPSG:4326:10","EPSG:4326:11","EPSG:4326:12","EPSG:4326:13","EPSG:4326:14","EPSG:4326:15","EPSG:4326:16","EPSG:4326:17","EPSG:4326:18","EPSG:4326:19","EPSG:4326:20","EPSG:4326:21"],tilingScheme:"Geographic",maximumLevel:21},ArcGisMapServerImageryProvider:{},GoogleEarthEnterpriseImageryProvider:{},createTileMapServiceImageryProvider:{},type:"WebMapTileServiceImageryProvider"}}}]})}}});n("2544");const ju=P()(hu,[["render",i]]);var Ou,gu=ju,vu=(n("7437"),n("959d")),wu=Object(o["createApp"])(gu);for(var Cu in console.log(wu),vu)wu.component(Cu,vu[Cu]);wu.use(fu),wu.use(su["a"]),wu.mount("#app"),console.log(null===(Ou=wu._instance)||void 0===Ou?void 0:Ou.appContext.components)},a6f7:function(e,t,n){e.exports=n.p+"assets/img/双车道-水泥.c266f888.jpg"},ad8f:function(e,t,n){var o={"./三车道-水泥.jpg":"7f71","./三车道-沥青.jpg":"e14e","./单车道-水泥.jpg":"5dc2","./单车道-沥青.jpg":"f027","./双车道-水泥.jpg":"a6f7","./双车道-沥青.jpg":"532d","./四车道-水泥.jpg":"d6ef","./四车道-沥青.jpg":"4b5a"};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}a.keys=function(){return Object.keys(o)},a.resolve=r,e.exports=a,a.id="ad8f"},b583:function(e,t,n){},b6c3:function(e,t,n){"use strict";n("9f19")},c488:function(e,t,n){"use strict";n("b583")},d6ef:function(e,t,n){e.exports=n.p+"assets/img/四车道-水泥.cf024557.jpg"},dce6:function(e,t,n){},e14e:function(e,t,n){e.exports=n.p+"assets/img/三车道-沥青.96f51df0.jpg"},e3f4:function(e,t,n){},f027:function(e,t,n){e.exports=n.p+"assets/img/单车道-沥青.c2a18daa.jpg"}});
//# sourceMappingURL=index.2cb788e1.js.map